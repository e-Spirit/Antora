<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/cloud/1.0/Spryker/index.html">
    <meta name="description" content="Dieses Dokument enthält die Dokumentation für das {modulname}-Modul von {fs}.">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
    <link rel="icon" href="../../../_/img/shortcut-icon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/index.html">Spartacus</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="cloud" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">FirstSpirit Cloud</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../First_Steps_with_FS_Cloud_EN.html">First Steps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Getting_Started_EN.html">Getting Started</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">FirstSpirit Cloud</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../dxm/1.0/index.html">DXM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../dxm/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../ecom/1.0/index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ecom/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/cloud/edit/main/modules/Spryker/pages/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FirstSpirit is used to create versatile and project-specific content.
Thanks to the <em>FirstSpirit Connect for Spryker Commerce OS</em> module, it is possible to transfer these contents to the e-commerce shop system Spryker Commerce OS and use it there.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="NOTE"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the remainder of the document the abbreviated form "Spryker" is used instead of "Spryker Commerce OS".</p>
</div>
<div class="paragraph">
<p>Furthermore, the entire documentation is geared towards connecting to the Spryker B2C Demo Shop in version 202009.0.
Mention of the shop therefore refers exclusively to the B2C Demo Shop.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The module combines the functional strengths of both systems, delivering the key advantages and create a successful overall system made up of two areas that work in parallel and are largely decoupled from one another:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Components on the FirstSpirit side</dt>
<dd>
<p>These components are used for creating and maintaining editorial data.
The data is transferred in JSON format to the relevant <em>CaaS</em> instance, and queried from there by Spryker.</p>
</dd>
<dt class="hdlist1">Components on the Spryker side</dt>
<dd>
<p>These components are used for the integration of the editorial content created in FirstSpirit.
Spryker imports this data and integrates it into the shop.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Included in the delivery of the <em>FirstSpirit Connect for Spryker Commerce OS</em> module is the reference project <em>FirstSpirit Connect Reference Project</em>, which is available as a <a href="https://github.com/e-Spirit/ecom-spryker-reference-project/">GitHub repository</a>.
This documentation is consistently based on the reference project and provides an explanation of the functions made available by the module using common use cases.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="NOTE"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This document is aimed at both Spryker and FirstSpirit developers, who should be able to perform the integration using this document as a guide.<br>
It is <strong>not</strong> intended as a manual for FirstSpirit editors.</p>
</div>
<div class="paragraph">
<p>It is assumed that the reader is confident in the use of FirstSpirit and Spryker as well as <em>CaaS</em> and <em>Omnichannel Manager</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_range_of_functions"><a class="anchor" href="#_range_of_functions"></a>1.1. Range of functions</h3>
<div class="paragraph">
<p><em>FirstSpirit Connect</em> enables editors to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating native shop content with FirstSpirit</p>
</li>
<li>
<p>Access to product and category information</p>
</li>
<li>
<p>Display shop elements and editorial content in the FirstSpirit preview simultaneously</p>
</li>
<li>
<p>Transfer of content into the Spryker Commerce OS</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The corresponding functions are made available when the module is installed and configured in ContentCreator.</p>
</div>
<div class="paragraph">
<p>Familiar FirstSpirit tools are used to maintain the content, meaning that editors who are already familiar with FirstSpirit do not require any additional knowledge.
The content is made available to Spryker as part of a deployment so that it can be imported.
Spryker then integrates the information into the shop.</p>
</div>
<div class="paragraph">
<p>Consequently there is no difference for Spryker in the delivering of editorial contents to the live state.
Even if the FirstSpirit server is shut down due to maintenance work, for example, this does not affect Spryker.</p>
</div>
</div>
<div class="sect2">
<h3 id="_architecture"><a class="anchor" href="#_architecture"></a>1.2. Architecture</h3>
<div class="paragraph">
<p>The connection of FirstSpirit and Spryker is realized by an architecture made up of a range of components (see figure <a href="#architecture">Architecture</a>).</p>
</div>
<div class="paragraph">
<p>These components are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The modules installed on the FirstSpirit server:</p>
<div class="ulist">
<ul>
<li>
<p><em>FirstSpirit Connect</em></p>
</li>
<li>
<p><em>Omnichannel Manager</em></p>
</li>
<li>
<p><em>Content as a Service</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Spryker Instance</p>
</li>
</ul>
</div>
<div id="architecture" class="imageblock">
<div class="content">
<img src="_images/architecture.png" alt="architecture">
</div>
<div class="title">Figure 1. Architecture</div>
</div>
<div class="paragraph">
<p>The individual components always interact according to the following schema:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In FirstSpirit, the creation and editing of editorial content takes place in ContentCreator.
With the help of the <em>Omnichannel Manager</em>, the storefront is embedded in it.</p>
</li>
<li>
<p>The storefront in turn accesses the <em>Preview CaaS</em> and determines the current FirstSpirit content from it.
It also integrates the JavaScript required for <em>Omnichannel Manager</em>, which enables the content in ContentCreator to be edited and highlighted.</p>
</li>
<li>
<p>The transfer of the editorial content into the <em>Preview CaaS</em> takes place automatically with each save action.</p>
</li>
<li>
<p>The filling of the <em>Online CaaS</em> with the released content is triggered by a deployment.
The <em>Online CaaS</em> makes the content available to the importer, who transfers it to Spryker and persists it there.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Spryker thus represents the main component of this architecture.
In addition to providing all shop functionality, it imports the content created or maintained in FirstSpirit from the <em>Online CaaS</em> and integrates it into the shop.
There is only a loose link between FirstSpirit and Spryker.
They primarily work in parallel with one another.</p>
</div>
</div>
<div class="sect2">
<h3 id="_concept"><a class="anchor" href="#_concept"></a>1.3. Concept</h3>
<div class="paragraph">
<p>The <em>FirstSpirit Connect</em> module offers the possibility to maintain editorial contents in FirstSpirit and to transfer them afterwards via deployment to Spryker.
For this, content processing in both systems must be coordinated and compatible with each other.
The subchapters below describe the underlying concept used to archieve this compatibility.</p>
</div>
<div class="sect3">
<h4 id="_pages"><a class="anchor" href="#_pages"></a>1.3.1. Pages</h4>
<div class="paragraph">
<p>Similar to FirstSpirit, pages in Spryker are based on a structure of different components.
In order to exchange editorial content between the two systems, these components must be coordinated.</p>
</div>
<div class="paragraph">
<p>Within the <a href="https://github.com/e-Spirit/ecom-spryker-reference-project/">reference project <em>FirstSpirit Connect Reference Project</em></a> included in the delivery, the CMS slots from Spryker are represented by the content areas of a page template in FirstSpirit.
Sections corresponding to a CMS block can be added to them.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/concept.png" alt="concept">
</div>
<div class="title">Figure 2. Page Rendering</div>
</div>
<div class="paragraph">
<p>With FirstSpirit, CMS blocks can be generated that are displayed in a page via CMS slots.</p>
</div>
</div>
<div class="sect3">
<h4 id="_preview"><a class="anchor" href="#_preview"></a>1.3.2. Preview</h4>
<div class="paragraph">
<p>The integration realized with the <em>FirstSpirit Connect</em> module only allows FirstSpirit to generate and maintain editorial content and to publish it in the form of CMS blocks.
However, Spryker still determines the framework of a page whose CMS slots integrate the generated blocks.</p>
</div>
<div class="paragraph">
<p>To present the preview of a page, FirstSpirit determines its current view in the storefront.
The storefront in turn queries the editorial content from the <em>Preview CaaS</em> and replaces the corresponding CMS blocks.
FirstSpirit displays the result using the <em>Omnichannel Managers</em> in ContentCreator.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment"><a class="anchor" href="#_deployment"></a>1.3.3. Deployment</h4>
<div class="paragraph">
<p>The transmission of the content created in FirstSpirit into the live state is done by Spryker.
For this, the content must be provided, which happens in form of the <em>Online CaaS</em>.
From it Spryker imports the editorial content and persists it in its data system.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_technical_requirements"><a class="anchor" href="#_technical_requirements"></a>1.4. Technical requirements</h3>
<div class="paragraph">
<p>To use the <em>FirstSpirit Connect</em> module, the following technical requirements must be met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the modules <em>FirstSpirit Connect</em>, <em>Content as a Service</em> and <em>Omnichannel Manager</em> in their current versions</p>
</li>
<li>
<p>FirstSpirit (Legacy or Isolated Mode) in version 2020-08 or higher</p>
</li>
<li>
<p>Java 11</p>
</li>
<li>
<p>Spryker Commerce OS 202009.0
with the extensions <a href="https://documentation.spryker.com/docs/enabling-category-cms-block"><code>Category CMS Blocks</code></a> and <a href="https://documentation.spryker.com/docs/product-block"><code>Product CMS Blocks</code></a></p>
</li>
<li>
<p>php in version 7.3 or higher</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When using the supplied <a href="https://github.com/e-Spirit/ecom-spryker-reference-project/">reference project <em>FirstSpirit Connect Reference Project</em></a>, the current version of the <em>BasicWorkflows</em> module is also required.</p>
</div>
</div>
<div class="sect2">
<h3 id="_important_information"><a class="anchor" href="#_important_information"></a>1.5. Important information</h3>
<div class="paragraph">
<p>This chapter contains information that should be observed when using the <em>FirstSpirit Connect</em> module.</p>
</div>
<div class="sect3">
<h4 id="_configuration_of_the_glue_web_server"><a class="anchor" href="#_configuration_of_the_glue_web_server"></a>1.5.1. Configuration of the glue web server</h4>
<div class="paragraph">
<p>During deployment, the content maintained in FirstSpirit is retrieved from the <em>Online CaaS</em> using the importer.
It transfers the data to Spryker and persists them in the backend in its data system.</p>
</div>
<div class="paragraph">
<p>Since the <em>Online CaaS</em> potentially contains a large amount of data, the transfer of the contents requires a certain time span.
Therefore, early timeouts during the import should be avoided.
Due to this reason the web server of the glue API needs to be configured to allow http requests for a duration of at least 60 seconds.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_of_the_firstspirit_project_settings_page"><a class="anchor" href="#_configuration_of_the_firstspirit_project_settings_page"></a>1.5.2. Configuration of the FirstSpirit project settings page</h4>
<div class="paragraph">
<p>The <em>CaaS</em> generations assume that a template for the project settings is maintained in the FirstSpirit project.
Otherwise, the generation job terminates early and reports the following error in the job logs:</p>
</div>
<div class="listingblock">
<div class="title">Exception with missing project settings page</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JAVA hljs" data-lang="JAVA">error during script execution : java.lang.IllegalStateException:
Invalid value for key 'usedCaasProjects' - Value is not a HashMap (zero).
This can happen when a deployment does not include a single PageRef (blue), which is not supported (e.g. remote-media-project).</code></pre>
</div>
</div>
<div class="paragraph">
<p>For this reason, a template must exist in the project and be configured in the project options in <code><strong>ServerManager</strong></code>, even if it has no content.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/p_settings.png" alt="p settings">
</div>
<div class="title">Figure 3. Configuration of the project settings page in the project options</div>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_the_spryker_b2c_demo_shop"><a class="anchor" href="#_use_of_the_spryker_b2c_demo_shop"></a>1.5.3. Use of the Spryker B2C Demo Shop</h4>
<div class="paragraph">
<p>As mentioned before, the entire documentation is geared to the connection of the Spryker B2C Demo Shop.
When using it, some difficulties may occur that are neither caused by the <em>FirstSpirit Connect</em> module nor by the integration.
However, they are listed below and a possible solution is outlined.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Preview page not found in ContentCreator</strong></span></p>
</div>
<div class="paragraph">
<p>If the ContentCreator cannot find the preview page, the page certificate is invalid or does not exist.
In this case, the page must be opened in a separate browser tab to renew the SSL certificate and allow the page to be displayed.
The preview page is then visible again in ContentCreator.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Missing RAM on Composer calls</strong></span></p>
</div>
<div class="paragraph">
<p>There is a RAM limit for PHP by default, but it is too low to execute Composer actions.
For this reason, the limit defined in the <code>php.ini</code> configuration file in the <code><strong>etc/php/7.2/cli</strong></code> directory must be disabled:</p>
</div>
<div class="listingblock">
<div class="title">Deactivation of the RAM limit</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-PHP hljs" data-lang="PHP">[...]
set memory_limit=-1
[...]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
