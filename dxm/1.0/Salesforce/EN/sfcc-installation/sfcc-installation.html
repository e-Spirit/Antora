<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/dxm/1.0/Salesforce/EN/sfcc-installation/sfcc-installation.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../_'</script>
    <link rel="icon" href="../../../../../_/img/shortcut-icon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/index.html">Spartacus</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="dxm" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">DXM</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../chapters/loggingin.html">Logging into DXM</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../chapters/requirements.html">Requirements to use DXM</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../chapters/setup_firsttime.html">Setting up DXM for the first time</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">DXM</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">DXM</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../ecom/1.0/index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../ecom/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/dxm/edit/main/modules/Salesforce/pages/EN/sfcc-installation/sfcc-installation.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_ccloud_installation_and_configuration"><a class="anchor" href="#_ccloud_installation_and_configuration"></a>{ccloud} - Installation and configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Various components must be installed and configured in order to use the functions of the <em>{modulname}</em> module.
The following sub-chapters explain the necessary steps for installing and configuring components in {ccloud}.
The corresponding import file is located in the <code>data</code> folder.</p>
</div>
<div class="sect2">
<h3 id="_setting_up_the_cartridges"><a class="anchor" href="#_setting_up_the_cartridges"></a>Setting up the cartridges</h3>
<div class="paragraph">
<p>The delivery includes three cartridges, which must be transferred to {ccloud} initially.
Different methods for this are described in the {ccloud} documentation under
<a href="https://documentation.demandware.com/DOC2/topic/com.demandware.dochelp/SiteDevelopment/Cartridges.html">menu:B2C Commerce Development[Development Components&gt;Cartridges</a>].</p>
</div>
<div class="paragraph">
<p>Next, the <code>int_espirit_core</code> cartridge must be added to all sites that are to receive {fs} content.
You can find relevant instructions in the {ccloud} documentation under
<a href="https://documentation.demandware.com/DOC2/topic/com.demandware.dochelp/SiteDevelopment/RegisterYourCartridge.html">menu:B2C Commerce Development[Getting Started for Developers&gt;Register Your Cartridge</a>].
Sites that are set up on the {mfra} and are maintained in {fs} also require <code>int_espirit_sfra</code> in their cartridge path.
However, if a site is based on SiteGenesis, its cartridge path must include <code>int_espirit_sitegenesis</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The three cartridges work with all locales and are not subject to any particular restrictions in this respect.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="sfcc_zip_file_import"><a class="anchor" href="#sfcc_zip_file_import"></a>Import of the zip file importExamples</h3>
<div class="paragraph">
<p>For the setup of the <a href="#sfcc_job_schedules">job schedules</a> and the <a href="#sfcc_content_cleanup">content cleanup</a> as well as for the <a href="#sfcc_import_slot_configs">slot configurations</a>
various files are required, which are stored in the file <em>importExamples.zip</em>.
The zip file is included in the <em>metadata</em> directory within the delivery and must be added to the {ccloud}.
To do so, it must be imported via the <code><strong>menu:Administration[Site Development&gt;Site Import &amp; Export]</strong></code> page.
The files contained in it require different configuration steps, which are explained in detail in the corresponding subchapters.</p>
</div>
</div>
<div class="sect2">
<h3 id="sfcc_job_schedules"><a class="anchor" href="#sfcc_job_schedules"></a>Setting up the job schedules</h3>
<div class="paragraph">
<p>To import the content and <a href="#slot_configuration">slot configurations</a> generated by {fs} into {ccloud}, a job schedule must be created in {ccloud} for each site.
Therefore, the <em>metadata</em> directory of the delivery contains the zip file <em>importExamples.zip</em>, which requires an <a href="#sfcc_zip_file_import">import</a> into the {ccloud} as described previously.</p>
</div>
<div class="paragraph">
<p>The jobs imported with the zip file have the job IDs <code>{fs}-Import-RefArch</code> and <code>{fs}-Import-RefArchGlobal</code> by default.
The ID ensures the uniqueness of the jobs for the different sites and can be adjusted as required on the <code><strong>menu:Administration[Operations&gt;Jobs]</strong></code> page.
It is recommended to include the ID of the respective site in the corresponding job ID to ensure uniqueness.</p>
</div>
<div class="paragraph">
<p>The job schedules configured in the file consist of three job steps.
These are of the types <code>Import Content</code>, <code>Import Content Slots</code>, and <code>Rebuild Search Index</code>.
All three job steps initially have the scope <code>RefArch</code> or <code>RefArchGlobal</code>, which must be changed to the appropriate site.
In addition, these define different parameters whose default values can be kept mostly.
Only the parameters <code>WorkingFolder</code> and <code>FileNamePattern</code> need to be adapted to the specific project.
The editing dialog opens by clicking on the job step&#8217;s name.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">WorkingFolder</dt>
<dd>
<p>The parameter <code>WorkingFolder</code> specifies - relative to the <code><strong>IMPEX</strong></code> directory - the path to the directory containing the XML files generated by {fs}.
Its value must be identical for both job steps.</p>
</dd>
<dt class="hdlist1">FileNamePattern</dt>
<dd>
<p>The parameter defines the name of the XML files generated by {fs}.
In the case of the <code>ImportContent</code> job step, it must have the <code>fs_import_library.xml</code> value and for the <code>ImportContentSlots</code> job step, it must have the <code>fs_import_slot_configuration.xml</code> value.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>General information about creating job schedules can be found in the {ccloud} documentation in chapter
<a href="https://documentation.demandware.com/DOC2/topic/com.demandware.dochelp/Jobs/CreatingJobs.html">menu:Administering Your Organization[Jobs&gt;Creating Jobs</a>]</p>
</div>
<div class="paragraph">
<p>The three job steps and their parameters are described in the {ccloud} documentation in the chapters
<a href="https://documentation.b2c.commercecloud.salesforce.com/DOC1/index.jsp?topic=%2Fcom.demandware.dochelp%2FDWAPI%2Fjobstepapi%2Fhtml%2Fapi%2Fjobstep.ImportContent.html"><em>ImportContent</em></a>,
<a href="https://documentation.b2c.commercecloud.salesforce.com/DOC1/index.jsp?topic=%2Fcom.demandware.dochelp%2FDWAPI%2Fjobstepapi%2Fhtml%2Fapi%2Fjobstep.ImportContentSlots.html"><em>ImportContentSlots</em></a>, and
<a href="https://documentation.b2c.commercecloud.salesforce.com/DOC1/index.jsp?topic=%2Fcom.demandware.dochelp%2FDWAPI%2Fjobstepapi%2Fhtml%2Fapi%2Fjobstep.SearchReindex.html"><em>SearchReindex</em></a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="sfcc_content_cleanup"><a class="anchor" href="#sfcc_content_cleanup"></a>Setting up content cleanup</h3>
<div class="paragraph">
<p>In order to delete assets and <a href="#slot_configuration">slot configurations</a> managed and deleted by {fs} from {ccloud} too, the following steps must be taken:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#import_attributes">Import the user-defined system object attributes</a></p>
</li>
<li>
<p><a href="#additional_custom_attributes_assets">Optional: Create additional custom attributes for assets</a></p>
</li>
<li>
<p><a href="#search_refinements">Generate search refinements for assets</a></p>
</li>
<li>
<p><a href="#ocapisettings">Adjust the OC API settings</a></p>
</li>
<li>
<p><a href="#schedule">Set up the deployment schedule</a></p>
</li>
</ol>
</div>
<div id="import_attributes" class="paragraph">
<p><strong>Importing the user-defined system object attributes</strong><br>
For the persistence of time stamps assigned during generation, content cleanup uses the user-defined <code>fsGenerationTime</code> attribute as part of assets and <a href="#slot_configuration">slot configurations</a>.
This must initially be added to the system objects (content and slot configurations).
To create the user-defined system object attributes, the zip file <em>importExamples.zip</em> must be available in the {ccloud}.
It is stored within the <em>metadata</em> directory, which is included in the delivery.
Its provision is done via the previously described <a href="#sfcc_zip_file_import">import process</a>.</p>
</div>
<div id="additional_custom_attributes_assets" class="paragraph">
<p><strong>Create additional custom attributes for assets</strong><br>
The number of content assets to be deleted can be additionally restricted on the basis of any other custom attributes.
If this is desired, appropriate attributes must be created for content assets.
A description can be found in the Commerce Cloud documentation under <a href="https://documentation.demandware.com/DOC2/topic/com.demandware.dochelp/CustomObjects/CreatingCustomattributesforsystemObjects.html">menu:B2C Commerce Development[Business Objects&gt;Creating Custom Attributes for Business Objects</a>]</p>
</div>
<div id="search_refinements" class="paragraph">
<p><strong>Generating search refinements for assets</strong><br>
For the newly created <code>fsGenerationTime</code> attribute and the additionally created <a href="#additional_custom_attributes_assets">custom attributes</a>, a {ccloud} Search Refinement is to be generated.
The {ccloud} documentation describes this under
<a href="https://documentation.demandware.com/DOC2/topic/com.demandware.dochelp/Content/CreatingContentSearchRefinements.html">menu:Merchandising Your Site[Content Assets&gt;Working with Content Assets&gt;Creating Content Search Refinements</a>].</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>After importing the user-defined system object attributes and creating the search refinement, it is necessary to rebuild the site&#8217;s search indexes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ocapisettings"><a class="anchor" href="#ocapisettings"></a>OC API Settings</h3>
<div class="paragraph">
<p>The OC API is used for aspects including <a href="#reports">reports</a> and <a href="#schedule">deployment</a>.
Therefore, the corresponding permissions must be set in Salesforce for the <a href="#clientid"><code>Client ID</code></a> that is used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The rights adjustments described below can also be found in the separate files <em>{ocapi_shop}</em> and <em>{ocapi_data}</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>Client ID</code> that is used requires permission to execute GET queries via the ShopAPI for the resources indicated below.
These must be implemented in the global or site-specific context according to the use case.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/products/*/variations</code></p>
</li>
<li>
<p><code>/products/*</code></p>
</li>
<li>
<p><code>/product_search/variations</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition when using content cleanup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/content_search</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Permissions are additionally required to execute GET, POST, and DELETE queries via the DataAPI for the resources indicated below.
They are to be exclusively defined in the global context.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/catalogs</code> (GET only)</p>
</li>
<li>
<p><code>/catalogs/*/categories</code> (GET only)</p>
</li>
<li>
<p><code>/jobs/*/executions</code> (GET &amp; POST)</p>
</li>
<li>
<p><code>/jobs/*/executions/*</code> (GET only)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition when using content cleanup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/sites/*/slot_configuration_search</code> (POST only)</p>
</li>
<li>
<p><code>/libraries/*/content/*</code> (DELETE only)</p>
</li>
<li>
<p><code>/sites/*/slots/*/slot_configurations/*</code> (DELETE only)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, the usage of the {sr}s requires the following definition:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>/sites/*/sorting_rule_search (nur POST)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If, as an option, workflows are to be used for deleting library folders and folder assignments, permissions are then required to execute DELETE queries via the DataAPI for the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/libraries/*/folders/*</code></p>
</li>
<li>
<p><code>/libraries/*/folder_assignments/*/*</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sfcc_import_slot_configs"><a class="anchor" href="#sfcc_import_slot_configs"></a>Slot configurations</h3>
<div class="paragraph">
<p>The templates from the <code>int_espirit_sfra</code> cartridge are used to add new slots to the site.
Therefor, the delivery provides the zip file <em>importExamples.zip</em> with slot configurations for these slots.
It is stored within the <em>metadata</em> directory, which is included in the delivery.
The provision of the zip file <em>slotConfigurations.xml</em> in the {ccloud} is done via the previously described <a href="#sfcc_zip_file_import">import process</a>.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
