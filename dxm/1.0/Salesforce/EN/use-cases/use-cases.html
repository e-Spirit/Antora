<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/dxm/1.0/Salesforce/EN/use-cases/use-cases.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../_'</script>
    <link rel="icon" href="../../../../../_/img/shortcut-icon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/index.html">Spartacus</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="dxm" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">DXM</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../chapters/loggingin.html">Logging into DXM</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../chapters/requirements.html">Requirements to use DXM</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../chapters/setup_firsttime.html">Setting up DXM for the first time</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">DXM</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">DXM</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../ecom/1.0/index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../ecom/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/dxm/edit/main/modules/Salesforce/pages/EN/use-cases/use-cases.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_use_cases"><a class="anchor" href="#_use_cases"></a>Use cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>{modulname}</em> module provides various options for accessing {ccloud} content and for using this in {fs}.
These functions are equivalent in both clients and are described in the following using the reference project <em>{projectname}</em> supplied in the form of use cases.
The description of each use case is aimed at editors as well as {fs} developers.</p>
</div>
<div class="sect2">
<h3 id="uc_preview"><a class="anchor" href="#uc_preview"></a>Preview</h3>
<div class="paragraph">
<p>To display the preview of a page, the <a href="#webconf">{modulname} {filter}</a> determines the necessary information on the {sf} side.
In the slot-based approach, it identifies the correct storefront URL for this purpose, downloads the HTML on the basis of this URL, and substitutes the slots it contains with the corresponding editorial content.
The slots are uniquely labeled with HTML comments and are represented in {fs} by the content areas of a page template.
If the <code>Content Integration API</code> is being used, however, the {filter} has the Velocity fragments maintained in {fs} evaluated on the {sf} side, and displays the result at the corresponding point on the page.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The editorial content is created and maintained in {fs}.
Editors have the standard tools available to them and do not require any additional knowledge.
From the view of an editor, the content of both systems is automatically merged and displayed in the preview or in the {wc}.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The pages within the reference project that is supplied are based on the slot-based approach as standard.
However, as is the case in the example of the <a href="#catdetailpage">category detail page</a>, it is also possible to use the <code>CI API</code>.
The two approaches are fundamentally different from one another, and whichever one is being used is automatically taken into account by the <a href="#webconf">{modulname} {filter}</a> when a preview is being generated.</p>
</div>
<div class="paragraph">
<p><strong>Slot-based approach</strong><br>
Within the reference project supplied, the slots from {sf} are represented by the content areas of the page templates.
Sections can be added to them; each one corresponds to an asset and, depending on the use case, also has a <a href="#slot_configuration">slot configuration</a>.
To display a page in the preview, the slots contained in the downloaded HTML are substituted by the editorial content.</p>
</div>
<div class="paragraph">
<p>For the substitution, all content relevant for the preview must be labeled with unique HTML comments.
From a technical point of view, these can occur in every template but are only included in page templates in the reference project.
Each consists of a start as well as an end comment and has the format <code>&lt;!-- CMS-&lt;IDENTIFIER&gt;-START -&#8594;</code> or <code>&lt;!-- CMS-&lt;IDENTIFIER&gt;-END -&#8594;</code> by default.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The use of individual affixes can be activated for HTML comments via a toggle in the <a href="#project_settings">project settings</a>, which must be added if necessary.
In this case, the default values are overwritten and specific prefixes and suffixes are used instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These exact same HTML comments must also be inserted into the storefront page by the {sf} developer, and the slots to be substituted must be indicated.
It is important to make sure that the identifier in the {fs} template and in the storefront page match.
Otherwise, there is an error in the presentation of the preview.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Using the Content Integration API</strong><br>
The <code>Content Integration API</code> enables Velocity fragments to be evaluated on the {sf} side.
These fragments are maintained in the {fs} templates and substituted when a page is displayed in the preview.
For this purpose, the {filter} receives the results of the evaluation conducted on the {sf} side and inserts them at the corresponding points on the page.
The Velocity fragments must also be labeled with unique HTML comments to enable the {filter} to carry out this step.
The comments consist of a start comment and an end comment, and must always use the following format: <code>&lt;!-- CMS-VELOCITY-&lt;IDENTIFIER&gt;-START -&#8594;</code> or <code>&lt;!-- CMS-VELOCITY-&lt;IDENTIFIER&gt;-END -&#8594;</code>.</p>
</div>
<div class="paragraph">
<p><strong>Substitutions with regular expressions</strong><br>
Should further substitutions be additionally required, specific regular expressions can be defined.
These have their own syntax and always take the following form:</p>
</div>
<div class="listingblock">
<div class="title">Syntax</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">&lt;!-- CMS-REGEX-PATTERN-START --&gt;
   regex-match="&lt;REGEX&gt;"
   regex-value="&lt;REPLACEMENT&gt;"
&lt;!-- CMS-REGEX-PATTERN-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>While the expression <code>regex-match</code> saves the regular expression, it is the expression <code>regex-value</code> that specifies the content, which will substitute all regex matches in the document.
Both expressions are to be summarized as an instruction by the HTML comments <code>&lt;!-- CMS-REGEX-PATTERN-START -&#8594;</code> and <code>&lt;!-- CMS-REGEX-PATTERN-END -&#8594;</code>.</p>
</div>
<div class="paragraph">
<p>With respect to the reference project, for example in the <em>Preview Generation</em> format template, this enables additional CSS to be integrated into each page template or any link on the <a href="#hp">Homepage</a> to be substituted:</p>
</div>
<div class="listingblock">
<div class="title">Format template</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$-- Set Bootstrap CSS--$
&lt;!-- CMS-REGEX-PATTERN-START --&gt;
   regex-match="&lt;\/head&gt;"
   regex-value="$CMS_IF(#global.is("PREVIEW"))$$CMS_RENDER(template: "preview_css_additions")$$CMS_END_IF$&lt;/head&gt;"
&lt;!-- CMS-REGEX-PATTERN-END --&gt;

$-- Change Homepage Reference --$
&lt;!-- CMS-REGEX-PATTERN-START --&gt;
   regex-match="href=("|').*.home[?]"
   regex-value="href="$CMS_REF(pageref:"homepage")$""
&lt;!-- CMS-REGEX-PATTERN-END --&gt;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a convert2 is used within the regular expressions applied, it is important to make sure that all special characters are correctly resolved.
It may be necessary to adjust the conversion rule, in particular in conjunction with the dollar sign (<code><strong>menu:{manager}[Server properties&gt;Conversion rules]</strong></code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please note that the replacement of the URL depends on the new storefront URL.
The settings can be found under the menu item <code><strong>menu:Merchant Tools[Site Preferences &gt; Storefront URL]</strong></code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>{modulname} Preview Language</strong></p>
</div>
<div class="paragraph">
<p>The following pattern is needed to configure the display language in the {wc}:</p>
</div>
<div class="listingblock">
<div class="title">Pattern</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$-- Set Preview Language --$
&lt;!-- CMS-PARAM-PREVIEWLANG-START --&gt;
	$CMS_VALUE(set_previewLang)$
&lt;!-- CMS-PARAM-PREVIEWLANG-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The format of the language abbreviation that is provided within the pattern is explained by the paragraph <a href="#generationlocale">Determining the locale</a>.
If the {filter} cannot find this pattern it will use <code>default</code> as a value for the preview language.</p>
</div>
<div id="uc_preview_proxy" class="paragraph">
<p><strong>{modulname} preview proxy</strong></p>
</div>
<div class="paragraph">
<p>If problems with cross-origin requests occur during the preview due to the same-origin policy of modern web servers, then these can be remedied by using the preview proxy included in the <em>{modulname}</em> module.</p>
</div>
<div class="paragraph">
<p>In the supplied reference project, this is the case when loading the Font Awesome font via an integrated CSS file, for example.
If the preview proxy is not used, a cross-origin request will be executed when the font is loaded, which will be blocked by the same-origin policy.</p>
</div>
<div class="paragraph">
<p>To manage the loading of the resources in question via the preview proxy and therefore avoid cross-origin requests, the <em>Preview Generation</em> format template includes the following regular expression.
As a result, the configuration of the supplied web server does not need to be adapted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the preconfigured <code>/proxy</code> URL path is not to be used for the preview proxy, it must be adjusted in both the format template and in the <code>web.xml</code>.
A more detailed description of the configuration options via the <code>web.xml</code> is given in the chapter <a href="#webconf">Configuration of the web component</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Proxy integration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$-- Redirect to proxy --$
&lt;!-- CMS-REGEX-PATTERN-START --&gt;
   regex-match="[^"'(]*?\/on\/demandware\.static\/"
   $CMS_IF(#global.is("WEBEDIT"))$
      regex-value="/fs5webedit_$CMS_VALUE(#global.project.id)$/s=****/proxy/on/demandware.static/"
   $CMS_ELSE$
      regex-value="/fs5preview_$CMS_VALUE(#global.project.id)$/proxy/on/demandware.static/"
   $CMS_END_IF$
&lt;!-- CMS-REGEX-PATTERN-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Troubleshooting</strong></p>
</div>
<div class="paragraph">
<p>{modulname} supports developers when analyzing problems and errors in the preview, such as erroneous substitutions or poor response times while generating a preview.</p>
</div>
<div class="paragraph">
<p>Developers can add special parameters to the URL of a preview page in order to influence how the {filter} works and receive useful information as a result.
The available URL extensions are <code>/debugTimings=true</code> and <code>/debugCCFilter=true</code>.</p>
</div>
<div class="paragraph">
<p><code>/debugTimings=true</code> instructs the {filter} to write the execution times of its processing steps as a comment at the end of the HTML document.
For this purpose, the {filter} measures the duration of the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Search for content to be substituted</p>
</li>
<li>
<p>Substitution of slots with the current editorial content</p>
</li>
<li>
<p>Execution of particular substitutions via specific regular expressions</p>
</li>
<li>
<p>Complete processing of the page</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If this parameter is specified, the {filter} generates the following output for the homepage of the reference project:</p>
</div>
<div class="listingblock">
<div class="title">Output of the {filter} for the homepage with /debugTimings=true</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!--
*** TIMING STATS ***

LANGUAGE-DROPDOWN = 0ms
&amp;lt;script [^&amp;lt;]*?/dwux-init.js.*?&amp;lt;/script&amp;gt; = 0ms
[^&amp;quot;'(]*/s/SiteGenesisGlobal_MF_SP/[^&amp;quot;')]* = 53ms
Scanning for content replacement blocks = 1ms
CUSTOM-NAVIGATION-LEFT = 0ms
[^&amp;quot;'(]*?/on/demandware.static/ = 113ms
(&amp;lt;!-- dw.+?--&amp;gt;) = 1ms
&amp;lt;iframe.*?id=&amp;quot;DW-SFToolkit&amp;quot;&amp;gt;.*?&amp;lt;/iframe&amp;gt; = 1ms
LANGUAGE-DROPDOWN-MOBILE = 0ms
&amp;lt;a.*?sid=&amp;quot;([^&amp;quot;]*?)&amp;quot; = 1ms
&amp;lt;/head&amp;gt; = 0ms
WILL-IGNORE-FOR-PREVIEW = 0ms
HOME-CATEGORIES = 0ms
href=(&amp;quot;|').*.home[?] = 1ms
&amp;lt;!-- Demandware Analytics(([sS]*)&amp;lt;/script&amp;gt;) = 1ms
&amp;lt;!-- Demandware Active Data (([sS]*)&amp;lt;/script&amp;gt;) = 0ms
HOME-MAIN = 0ms
HOME-CC-OVERRIDE = 0ms

Total time = 172ms

--&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, the {filter} logs some information in the {fs} Server log if the <code>/debugTimings=true</code> parameter is specified.</p>
</div>
<div class="paragraph">
<p><code>/debugCCFilter=true</code> means that the {filter} does not download the storefront, perform substitutions or present the result in the preview.
The page actually generated by {fs} is shown in the preview instead.
The HTML therefore contains the substitution comments and specifications in addition to the editorial content.
If this parameter is specified, the {filter} therefore generates the following output (in a shortened form) for the homepage of the reference project:</p>
</div>
<div class="listingblock">
<div class="title">Output of the {filter} for the homepage with /debugCCFilter=true</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!-- CMS-HOME-MAIN-START --&gt;
    [...]
&lt;!-- CMS-HOME-MAIN-END --&gt;

&lt;!-- CMS-HOME-CATEGORIES-START --&gt;
    [...]
&lt;!-- CMS-HOME-CATEGORIES-END --&gt;

[...]

&lt;!-- CMS-REGEX-PATTERN-START --&gt;
    regex-match="href=("|').*.home[?]"
    regex-value="href="/fs5webedit_90169/s=qgkM/preview/90169/site/EN_GB/current/90172/90361""
&lt;!-- CMS-REGEX-PATTERN-END --&gt;

[...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using these functions requires a preview page to be called up.
The address of the preview page must have one of the parameters presented here added to it.
There are various ways of doing this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Via the iFrame address in the {wc}</p>
</li>
<li>
<p>Via the address of a page in the external preview</p>
</li>
<li>
<p>Via generated links in the {fs} preview, as shown here using the example of links on the homepage:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!-- CMS-REGEX-PATTERN-START --&gt;
    regex-match="href=("|').*.home[?]"
    regex-value="href="$CMS_REF(pageref:"homepage")$/debugCCFilter=true""
&lt;!-- CMS-REGEX-PATTERN-END --&gt;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Due to their functions, the <code>/debugTimings=true</code> and <code>/debugCCFilter=true</code> parameters cannot be used in combination with one another.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="generation"><a class="anchor" href="#generation"></a>Generation</h3>
<div class="paragraph">
<p>In order to deploy editorial content, {fs} generates two XML files, which contain content assets and <a href="#slot_configuration">slot configurations</a>, and are transferred to the {ccloud}.
The corresponding <a href="#generation_and_deployment">generation and deployment schedule</a> has already been described.
This description also explains that templates in their presentation channels populate XML collectors with content (content assets) and <a href="#slot_configuration">slot configurations</a>.
These collectors are initialized in the <a href="#project_settings">project settings</a>.
All content and configurations to be deployed must be written to the XML collectors.
Otherwise, they will not be transferred.</p>
</div>
<div class="paragraph">
<p>One asset and one slot configuration are typically generated for each section, allowing for personalization at the section level.
<a href="#contentpage">Content pages</a> are the only exception.
In this case, a total of precisely one content asset and one slot configuration are created.</p>
</div>
<div class="paragraph">
<p>This chapter explains how the content and configurations of the project are collected and the XML files generated.</p>
</div>
<div class="sect3">
<h4 id="_content_assets"><a class="anchor" href="#_content_assets"></a>Content Assets</h4>
<div class="paragraph">
<p>Populating the XML collector for content assets involves the following steps:</p>
</div>
<div class="paragraph">
<p><strong>Generating a content asset ID using a project-wide convention</strong></p>
</div>
<div class="paragraph">
<p>In the reference project, the ID of a content asset is comprised of a project-wide prefix, the ID of the generated page reference, and the section ID.
These components are separated from one another by means of a hyphen and any underscores are substituted with hyphens.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In case of a content page the content asset ID simply consists of the prefix and the ID of the generated page reference.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(set_xml_id, ps_dwAssetIdPrefix + "-" + #global.node.uid + "-" + #global.section.id)$
$CMS_SET(set_xml_id, set_xml_id.replaceAll("_","-"))$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Creating a new content asset in the XML collector</strong></p>
</div>
<div class="paragraph">
<p>Once the ID has been determined, a new content asset is created in the XML collector using the <code>useOrCreateContentNode</code> method.
This asset must be populated with the content of all generated languages during the full generation.
For this reason, <code>useOrCreateContentNode</code> only generates a new asset if no asset with the specified ID already exists.
All subsequent method calls on the XML collector then operate on this asset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(void, ps_xmlCollector.useOrCreateContentNode(set_xml_id))$</code></pre>
</div>
</div>
<div class="paragraph">
<p>When a new content asset is created, the <code>fsGenerationTime</code> custom attribute is automatically added along with the current time stamp of the generation.
This is necessary to ensure that the <a href="#sfcccleanup">content cleanup</a> only deletes obsolete content assets from the {ccloud} after deployment.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The value of this attribute must not be changed manually following this.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="generationlocale" class="paragraph">
<p><strong>Determining the locale</strong></p>
</div>
<div class="paragraph">
<p>Some of the following actions require a locale to be specified for the {ccloud}.
For this purpose, the <em>language_mapping</em> format template maps a {fs} language onto a locale of this kind, and is therefore included in each page.
In the template, two variables are generated in the context of the page: <code>set_previewLang</code> and <code>set_xml_lang</code>.
The first of these is used for generating the preview and has the format <code>&lt;language_COUNTRY&gt;</code>.
An example of a potential value is <code>fr_FR</code>.
The <a href="#hp">Homepage</a> chapter also describes this aspect of the template in greater detail.</p>
</div>
<div class="paragraph">
<p>The <code>set_xml_lang</code> variable is used during the process of populating the content assets.
Its value for the master language is x-<code>default</code>.
In all other cases, it assumes the value of <code>set_previewLang</code>, but substitutes the underscore with a hyphen.</p>
</div>
<div class="paragraph">
<p>Since both variables are set in the context of the generated page, they are available in all sections of the page and can therefore be used both for generating the preview and for populating the XML collectors.</p>
</div>
<div class="paragraph">
<p><strong>Setting the display-name property</strong></p>
</div>
<div class="paragraph">
<p>For each language, the display name of the generated page reference corresponds to the display name of the associated content asset, which is set during generation by means of the <code>addContentAttribute</code> method.
The <code>set_xml_lang</code> variable described above is required for this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(void, ps_xmlCollector.addContentAttribute({
    "name":"display-name",
    "value":#global.node.getDisplayName(#global.language).toString(),
    "attributes":{
        "xml:lang":set_xml_lang
    }
}))$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Setting the searchable-flag property to true</strong></p>
</div>
<div class="paragraph">
<p>The content asset needs to be included in the search index of the {ccloud}, which is why the <code>searchable-flag</code> attribute is set to <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(void, ps_xmlCollector.addContentAttribute({
    "name":"searchable-flag",
    "value":"true"
}))$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Setting the online-flag property to true</strong></p>
</div>
<div class="paragraph">
<p>The asset also needs to be available in the shop, which is why the <code>online-flag</code> attribute is also set to <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(void, ps_xmlCollector.addContentAttribute({
    "name":"online-flag",
    "value":"true"
}))$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Setting the body property</strong></p>
</div>
<div class="paragraph">
<p>The editorial content from {fs} is saved in the <code>body</code> custom attribute.
The <code>set_xml_body</code> variable is first created in the reference project, and the rendered content is then stored in this variable.
The variable is then transferred to the XML collector.
The collector automatically embeds the content in a CDATA section, which means that no special preparation is required.
Since the content is language-dependent, the locale in <code>set_xml_lang</code> is used in this step too.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(void, ps_xmlCollector.addCustomAttribute({
    "id":"body",
    "cdata":set_xml_body.toString(),
    "attributes":{
        "xml:lang":set_xml_lang
    }
}))$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Folder</strong></p>
</div>
<div class="paragraph">
<p>The {ccloud} makes it possible to specify a library folder in which it is to store a content asset.
For this purpose, the XML collector provides the <code>addFolderAttribute</code> method, which receives the ID of this kind of folder.
In the reference project, the folder containing all the content assets for a page is stored in the form for the page itself.
Each page template transfers the value of the corresponding form field to the <code>set_parent_id</code> variable.
The sections then use this variable to generate their assets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(void, ps_xmlCollector.addFolderAttribute({
    "id":set_parent_id
}))$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Folders that are referenced in this way must be identified to the {ccloud} by means of corresponding nodes in the generated XML file.
This allows the {ccloud} to create any missing folders.
The <a href="#xml_generation">XML</a> template takes responsibility for this task, and generates a defined set of folders.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Unless any additional measures are taken, only the IDs of these folders can be reliably used in the reference project when generating content assets.
This is because {fs} is only able to guarantee that precisely these folders exist.
In the reference project, the corresponding form elements are therefore hidden in the page templates and assigned fallback values.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_slot_configurations"><a class="anchor" href="#_slot_configurations"></a>Slot configurations</h4>
<div class="paragraph">
<p>The XML collector for <a href="#slot_configuration">slot configurations</a> is populated in the <em>Slot Configuration</em> link template.
Therefore, both pages as well as sections output the corresponding form elements directly via <code>$CMS_VALUE$</code> calls:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!st_slotConfig.isEmpty)$
    $CMS_FOR(_slotConfig,st_slotConfig)$
        $CMS_VALUE(_slotConfig)$
    $CMS_END_FOR$
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The XML for slot configurations is manually assembled in the <em>Slot Configuration</em> template and written to the appropriate collector using the <code>addXml</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(void, ps_xmlCollectorContentSlot.addXml(null, set_slotConfig.toString(), null))$</code></pre>
</div>
</div>
<div class="paragraph">
<p>As with the process of creating the content asset, the <code>fsGenerationTime</code> custom attribute is automatically added to a slot configuration along with the current time stamp of the generation.
This is necessary to ensure that the <a href="#sfcccleanup">content cleanup</a> only deletes obsolete slot configurations from the {ccloud} after the deployment.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The value of this attribute must not be changed manually following this.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="xml_generation"><a class="anchor" href="#xml_generation"></a>Generating the XML files</h4>
<div class="paragraph">
<p>Both generated XML files are based on the XML page template, which reads out the collected content and slot configurations from the XML collectors.
For this purpose, the <a href="#schedule">deployment schedule</a> performs three generations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A <a href="#fdeployment">full generation</a> for populating the XML collectors,</p>
</li>
<li>
<p>a <a href="#pdeployment">partial generation</a> for writing the content assets to an XML file, and</p>
</li>
<li>
<p>a <a href="#pdeployment">partial generation</a> for writing the slot configurations to an XML file.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The full generation must be completed before {fs} can generate the XML files, which is why this step cancels the generation of the XML template.
This is done using the <code>dwre_xmlGeneration</code> schedule variable, which has the value <code>false</code> in the <a href="#fdeployment">full generation</a> and the value <code>true</code> in both <a href="#pdeployment">partial generations</a>.</p>
</div>
<div class="paragraph">
<p>Since both files are based on the same template, a feature is necessary in order to determine which XML collector is read out.
This feature is the <code>ps_importType</code> form field, which can assume the <code>content_library</code> and <code>content_slot</code> values.</p>
</div>
<div class="paragraph">
<p>In the case of <code>content_library</code>, a defined set of library folders is first written to the XML collector for content assets.
The <code>getXml</code> method is then executed on this collector and the result - an XML document - is output via a <code>$CMS_VALUE$</code> call.
If <code>ps_importType</code> has the value <code>content_slot</code>, <code>getXml</code> is called up on the collector for slot configurations instead and the result is also output.</p>
</div>
<div class="paragraph">
<p>The <code>{modulname} Technical Pages</code> content folder contains two pages that are based on the <em>XML</em> template:
<code>Shop Assets</code>, for which <code>ps_importType</code> has the value <code>content_library</code>, and <code>Shop Slot Configurations</code>, for which this form field is set to <code>content_slot</code>.
These pages form the basis of the <code>Shop Assets</code> and <code>Shop Slot Configurations</code> page references in the <code>{modulname} Export Files</code> structure folder;
a <a href="#pdeployment">partial generation</a> is executed for each of these page references.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="navigation"><a class="anchor" href="#navigation"></a>Navigation</h3>
<div class="paragraph">
<p>The storefront&#8217;s main navigation function can be used in {fs} to navigate both the shop and the content maintained on the {fs} side.
Custom entries can also be added.</p>
</div>
<div class="sect3">
<h4 id="navigation"><a class="anchor" href="#navigation"></a>Main navigation</h4>
<div class="paragraph">
<p>The main menu is primarily used to navigate between the various <a href="#catlandingpage">category pages</a> within the preview (see figure <a href="#main_navigation">Navigation</a>).
The main menu is part of the HTML downloaded during the <a href="#uc_preview">preview</a> from the {ccloud} Storefront and is therefore predefined by {ccloud}.</p>
</div>
<div id="main_navigation" class="imageblock">
<div class="content">
<img src="../../_images/navigation.png" alt="navigation">
</div>
<div class="title">Figure 1. Navigation</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The main menu allows the editor to switch between <a href="#catlandingpage">category pages</a>.
If an equivalent exists within {fs} for a category page that has been called up, then the content of this page is shown.
The editor is then able to edit the content originating from {fs}.
If no equivalent to the category page that has been called up exists within {fs}, the original content obtained from {ccloud} is issued instead.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
To display a <a href="#catlandingpage">category page</a> that exists in {fs} to the editor, the links on the <a href="#catlandingpage">category pages</a> are redirected to a dispatcher page via a specific regular expression initially in the reference project.</p>
</div>
<div class="listingblock">
<div class="title">Redirecting the navigation links</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$-- Change Category Reference --$
&lt;!-- CMS-REGEX-PATTERN-START --&gt;
   regex-match="&lt;a.*?\sdata-cgid="([^"]*?)""
   regex-value="&lt;a href="$CMS_REF(pageref:"preview_dispatcher")$/forceRefresh=1?type=category&amp;id=$1" id="$1""
&lt;!-- CMS-REGEX-PATTERN-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This regular expression, along with other specific regular expressions, forms part of the <em>Preview Generation</em> format template.</p>
</div>
<div class="paragraph">
<p>The <em>Preview Dispatcher</em> referenced in this expression is a technical page based on the page template with the same name.
The <em>Preview Dispatcher</em> iterates over the content of the structure folder <em>category_pages</em> by using the {fs} navigation function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This structure folder corresponds to the folder that you configured as the target folder for creating new <a href="#catlandingpage">category pages</a> when <a href="#pcomp">configuring the project component</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For each page found, the <em>Preview Dispatcher</em> memorizes the associated category, together with a corresponding reference to the page.
As a result, for each call it can then decide whether a page exists in {fs} for the requested category and forward accordingly.</p>
</div>
<div class="paragraph">
<p>If it was not possible to identify any pages created in {fs} for a requested category, you are forwarded to a generic category preview page.</p>
</div>
</div>
<div class="sect3">
<h4 id="_expanding_the_navigation_function"><a class="anchor" href="#_expanding_the_navigation_function"></a>Expanding the navigation function</h4>
<div class="paragraph">
<p>Editors can expand the main navigation function.
New menu items are placed in front of those that already exist.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
To add a navigation item, simply place a <a href="#contentpage">content page</a> below the <code>Left Navigation</code> menu item.
Once the page has been released and transferred to the {ccloud}, the new navigation item will appear in the storefront.
As shown in the <a href="#custom_navigation">Example of expanding the main navigation function</a> figure, it is also possible to create nested menu structures.</p>
</div>
<div id="custom_navigation" class="imageblock">
<div class="content">
<img src="../../_images/custom_navigation.png" alt="custom navigation">
</div>
<div class="title">Figure 2. Example of expanding the main navigation function</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Menu structures may be nested up to a maximum of 4 levels deep.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The new <code>menu-custom-left</code> global slot has been introduced on the {sf} side using the <code>menu.isml</code> template supplied, and is surrounded by the following comments:
<code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-START -&#8594;</code> and <code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-END -&#8594;</code>.
This slot can be populated by {fs} in the same way as any other slot and substituted in the preview.
A content asset for this slot contains the HTML for all elements that are to be used for expanding the navigation function.</p>
</div>
<div class="paragraph">
<p>This markup is created in {fs} in the <code>custom_navigation</code> format template.
This template contains a navigation function that searches all page references in the <code>Left Navigation</code> folder.
It then generates the required HTML for all the pages found - both for the preview and for the live state.
This is necessary so that the pages can be integrated into the main navigation function.
For the preview, the result is also enclosed within the following HTML comments: <code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-START -&#8594;</code> and <code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-END -&#8594;</code>.
The template outputs the HTML for the navigation function in both cases.</p>
</div>
<div class="paragraph">
<p>To enable this navigation function to be used in the preview, each page template must integrate the <code>custom_navigation</code> format template by calling up the <code>CMS_RENDER</code> function.</p>
</div>
<div class="paragraph">
<p>The <code>Left Navigation</code> page template, plus a page and a page reference based on this template, are provided for the purpose of generating a content asset.
The page reference is stored in the <code>Left Navigation</code> structure folder.
As described above, the page template integrates the <code>custom_navigation</code> format template and saves the generated content in a content asset via the XML collector.</p>
</div>
<div class="paragraph">
<p>Unlike the other page templates, <code>Left Navigation</code> does not provide any sections.
A <a href="#slot_configuration">slot configuration</a> that will be output in the event of a generation must therefore be maintained in its form.
For this purpose, the page template sets two variables prior to output.
The first of these is a <code>contentSlotId</code>, since there is no content area from that a slot ID could be derived.
The value of these variable is <code>menu-custom-left</code>, since the new slot referred to above is to be populated.
The second variable is <code>contentSlotTemplate</code>, which is set to the value of the <code>pt_sfccTemplate</code> form field.
The fallback value of this field is <code>slots/content/contentAssetBody.isml</code>.
Without this variable, the template for <a href="#slot_configuration">slot configurations</a> would attempt to derive the ISML template from the current section.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>Left Navigation</code> page reference as well as the corresponding page must be manually released once.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hp"><a class="anchor" href="#hp"></a>Homepage</h3>
<div class="paragraph">
<p>The homepage corresponds to the start page of the reference project supplied and is therefore displayed when the {wc} is first opened.
Since its structure differs from that of the other content pages, it has its own template.
This is referenced in the project just once.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The homepage offers the editor three options for entering content:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The header of the page displays a banner in which either a <a href="#banner_image">static image</a> or a <a href="#slider">slider</a> can be integrated.</p>
</li>
<li>
<p>In the main area of the page:</p>
<div class="ulist">
<ul>
<li>
<p>Up to five products can be displayed in the form of a <a href="#grid_container">grid container</a>, which provides seven different options for arranging the products.</p>
</li>
<li>
<p>Any number of products can be linked in the form of <a href="#hot_spots">hot spots</a> on a static image.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The sections required for entering content are covered in more detail in the corresponding sub-chapters.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The homepage template primarily defines how the page is displayed in the <a href="#uc_preview">{fs} preview</a>, whereas assets are predominantly generated in the integrated sections.
However, certain requirements for generation are managed in the form as well as in the HTML channel.
The developer view must therefore take both aspects into account.</p>
</div>
<div class="paragraph">
<p><strong>Preview</strong><br>
{ccloud} supports a range of page types.
In order to display editorial content in the <a href="#uc_preview">{fs} preview</a> or in {wc}, {fs} must generate the correct storefront URL to query the corresponding page in {ccloud}.</p>
</div>
<div class="paragraph">
<p>The page type to be used for the {fs} preview is defined in the <code>Preview Page Type</code> form field.
As <code>Home</code> is the only parameter provided for the homepage, it is selected as a default value and the input component is hidden.</p>
</div>
<div class="paragraph">
<p>To determine the desired storefront URL, it must also be ensured that the language codes used in {fs} and in {ccloud} match.
This task is performed by the <em>language_mapping</em> format template, which is integrated in the HTML channel.
If the language codes do not match, {fs} is unable to determine the corresponding page for the preview.</p>
</div>
<div class="paragraph">
<p>The sections maintained for the homepage are output within unique HTML comments.
These always consist of a start and an end expression and denote the individual content areas.
Based on the comments, {fs} substitutes the slots in the preview with editorial content.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">&lt;!-- CMS-HOME-MAIN-START --&gt;
   $CMS_RENDER(template:"mpp_body_wrapper",body:"home_main_m")$
   $CMS_RENDER(template:"empty_content_slot",label:"Home Main",body:"home_main")$
&lt;!-- CMS-HOME-MAIN-END --&gt;

&lt;!-- CMS-HOME-CATEGORIES-START --&gt;
   $CMS_RENDER(template:"mpp_body_wrapper",body:"home_categories_m")$
   $CMS_RENDER(template:"empty_content_slot",label:"Home Categories",body:"home_categories")$
&lt;!-- CMS-HOME-CATEGORIES-END --&gt;

&lt;!-- CMS-HOME-CC-OVERRIDE-START --&gt;
   $CMS_RENDER(template: "cc_createsectionwe_api")$
&lt;!-- CMS-HOME-CC-OVERRIDE-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a content area has no sections, {fs} displays a gray-shaded area in the preview instead (see figure <a href="#empty_slot_hp">Empty Slot</a>).
This shows the name of the content area and has a button that allows new sections to be generated in {wc}.
The display of the gray area controls the <em>empty_content_slot</em> format template, while the function of the button is implemented in the <em>cc_createsectionwe_api</em> format template.
It contains JavaScript, which may be integrated in the page only once.</p>
</div>
<div id="empty_slot_hp" class="imageblock">
<div class="content">
<img src="../../_images/empty_slot_hp.png" alt="empty slot hp">
</div>
<div class="title">Figure 3. Empty Slot</div>
</div>
<div class="paragraph">
<p>Should further substitutions be required in addition to the exchange of slots, specific regular expressions can be defined.
These have their own syntax and are summarized in the <em>Preview Generation</em> format template.
It controls the generation of the <a href="#uc_preview">preview</a> and is referenced in all page templates of the reference project.</p>
</div>
<div class="paragraph">
<p><strong>Generation</strong><br>
The assets created during the generation are filed in a folder structure in {sf}.
A corresponding folder is therefore defined for each page template in the reference project.
The homepage form has the hidden <code>SFCC Parent Folder</code> field, whose value is assigned to the <code>set_parent_id</code> variable.
It is evaluated in the integrated sections.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(set_parent_id,pt_sfcc_parentFolder)$</code></pre>
</div>
</div>
<div class="paragraph">
<p>A further requirement for generating assets is that the corresponding page must be marked as translated in {fs}.
If this is not the case, the generation is canceled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!#global.preview &amp;&amp; !#global.page.isTranslated)$
   $CMS_SET(#global.stopGenerate, true)$
$CMS_END_IF$</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="contentpage"><a class="anchor" href="#contentpage"></a>Content pages</h3>
<div class="paragraph">
<p>The content pages correspond to the standard pages of the project and are referenced multiple times.
Unlike the <a href="#hp">homepage</a> and the <a href="#detail_pages">category and product pages</a>, they play a special role as they generate just one asset for the entire page.
All editorial content from the content page and the sections added to it are summarized in this asset.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The content pages offer the editor three options for entering content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The header of the page displays a banner in which either a <a href="#banner_image">static image</a> or a <a href="#slider">slider</a> can be integrated.</p>
</li>
<li>
<p>The main area of the page enables the display of:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#hot_spots">hot spots</a></p>
</li>
<li>
<p>a single blog article or an overview of all blog articles</p>
</li>
<li>
<p>a <a href="#video">video</a></p>
</li>
<li>
<p>a text with a heading</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The sections required for entering content are covered in more detail in the corresponding sub-chapters.
As the text section is self-explanatory, this is not described specifically.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Unlike for the remaining pages, the editorial content of the content page and its sections are summarized in a single asset.
This asset is created in the HTML channel of the page template, which differentiates between the display of the page in the <a href="#uc_preview">{fs} preview</a> and in the live state.
The developer view must therefore take both aspects into account.</p>
</div>
<div class="paragraph">
<p><strong>Preview</strong></p>
</div>
<div class="paragraph">
<p>As the creation of the asset only affects generation, both developer views of the content page and the <a href="#hp">homepage</a> are nearly identical with regard to the {fs} preview.</p>
</div>
<div class="paragraph">
<p>The only discrepancy between both templates is in the configuration of the page type that is used, which is also defined in the hidden <code>Preview Page Type</code> form field for the content pages.
In contrast to the <a href="#hp">homepage</a>, it can assume different values in theory.
For the reference project supplied, however, the <code>Page</code> parameter is required and is selected as the default value.</p>
</div>
<div class="paragraph">
<p>Furthermore, the content page has the hidden <code>SFCC Context ID</code> form field, in which a default content asset ID is saved.
As a page still does not have an asset ID before generation, it is required to create the <a href="#uc_preview">preview</a>.</p>
</div>
<div class="paragraph">
<p><strong>Generation</strong></p>
</div>
<div class="paragraph">
<p>For generation, it is important to ensure firstly that the corresponding page is marked as translated in {fs}.
Only when this is the case is generation carried out and the asset for the content page is created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!#global.preview &amp;&amp; !#global.page.isTranslated)$
   $CMS_SET(#global.stopGenerate, true)$
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>For this, the value of the hidden <code>SFCC Parent Folder</code> field is assigned to the <code>set_parent_id</code> variable initially.
This value specifies where the created asset is filed in the {sf} folder structure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(set_parent_id,pt_sfcc_parentFolder)$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The variables are evaluated while the XML collector is populated, which is carried out subsequently.
In the process, a new content node is created, to which the editorial content of the page, among other things, is added.</p>
</div>
</div>
<div class="sect2">
<h3 id="login_page"><a class="anchor" href="#login_page"></a>Login page</h3>
<div class="paragraph">
<p>Just like the <a href="#hp">homepage</a>, the login page has a special role to play.
This means that it differs from the other content pages.
It is used to log into the shop and is only referenced once in the project.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The login page offers the editor various options for entering content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The header of the page displays a banner in which either a <a href="#banner_image">static image</a> or a <a href="#slider">slider</a> can be integrated.</p>
</li>
<li>
<p><a href="#textpicture">Text Picture sections</a> can be added to the top part of the main area of the page.</p>
</li>
<li>
<p>The bottom part of the main area of the page enables the display of:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#producttiles">Product Tiles</a>.</p>
</li>
<li>
<p><a href="#textpicture">Text Picture sections</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
As both the form and the content of the HTML channel for the login page and the <a href="#hp">homepage</a> broadly match, both developer views are also nearly identical.
Therefore, only the differences between the two templates will be described here.</p>
</div>
<div class="paragraph">
<p>The page type to be used for the {fs} preview is also defined for the login pages in the hidden <code>Preview Page Type</code> form field.
Just as for <a href="#catdetailpage">category</a> and <a href="#proddetailpage">product detail pages</a>, the <code>Custom</code> value is required in this context.
It is used for the implementation of page types that are not covered by default by the <a href="#webconf"><code>{filter}</code></a> as well as for the manual specification of the controller to be used.
The controller must be specified using the hidden <code>pt_storefrontUrlCustomController</code> field.
For login pages, its default value is <code>Login-Show</code>, which is added to the Storefront URL.</p>
</div>
<div class="paragraph">
<p>For generation, as is the case with the <a href="#hp">homepage</a>, it is important to ensure that the login page is marked as translated in {fs}.
Only then the generation is carried out and the associated assets will be created.</p>
</div>
</div>
<div class="sect2">
<h3 id="detail_pages"><a class="anchor" href="#detail_pages"></a>Category and product pages</h3>
<div class="paragraph">
<p>The <em>{modulname}</em> module provides an individual report for products and categories in both {jc} and {wc}.
These reports are used to display the category and product information originating from {ccloud}, which can be used to create and maintain editorial content (see figure <a href="#reports">Reports</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To display the category report, the <a href="#show_report"><code>Show Category Report</code></a> checkbox must be activated in the project component.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="reports" class="imageblock">
<div class="content">
<img src="../../_images/reports.png" alt="reports">
</div>
<div class="title">Figure 4. Reports</div>
</div>
<div class="paragraph">
<p>The corresponding report can be used to create both category pages as well as product pages.
To use this feature, you must define the templates on which these pages will be based, and where they are to be integrated into the structure, in the <a href="#pcomp">project component</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>SFCC Context ID</code> field must be included in the page template that is selected in each case so that the ID of the referenced object can be saved.
The field can be hidden.
If this field ought to have a differing identifier for project-specific reasons, then this must be specified within the <a href="#project_settings">project settings</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;CMS_INPUT_TEXT name="pt_storefrontUrlContextId" hidden="yes" useLanguages="no"&gt;
  &lt;LANGINFOS&gt;
    &lt;LANGINFO lang="*" label="SFCC Context ID"/&gt;
  &lt;/LANGINFOS&gt;
&lt;/CMS_INPUT_TEXT&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>With regard to its category or product page, an object in the report can adopt one of three states:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A category or product page does not exist and therefore can be created.</p>
</li>
<li>
<p>A category or product page exists, which can be called up.</p>
</li>
<li>
<p>A category or product page exists but either its page reference or the page cannot be found.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The three cases are displayed in different ways and described below.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since the objects in the report are not permanently updated, the display might not reflect the current status.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="create_detailpage" class="paragraph">
<p><span class="underline"><strong>Creating a category or product page</strong></span><br>
Objects for that a category or product page does not yet exist are identified in the report by a gray icon (see figure <a href="#report_create_normal">Creating a category or product page</a>).
If a page template has been defined in the <a href="#pcomp">project component</a>, the <span class="image"><img src="../../_images/new_detailpage.png" alt="Create Page"></span> button is displayed when such an object is hovered over.</p>
</div>
<div id="report_create_normal" class="imageblock">
<div class="content">
<img src="../../_images/report_create_normal.png" alt="report create normal">
</div>
<div class="title">Figure 5. Creating a category or product page</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A button is also displayed in the <a href="#uc_preview">{fs} preview</a> on <a href="#catlandingpage">category landing pages</a>, <a href="#catdetailpage">category detail pages</a>, and <a href="#proddetailpage">product detail pages</a> that can be accessed via the navigation.
This button functions in the same way as the button in the report.
It is only visible if a corresponding category landing page, category detail page, or product detail page does not exist in the {fs} project.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/landingpagebutton.png" alt="landingpagebutton">
</div>
<div class="title">Figure 6. Creating a category landing page, category detail page, or product detail page</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click on the button in the report or the button on a main category page to open a dialog that is split into two sections and in which a page can be created for the corresponding object.</p>
</div>
<div class="paragraph">
<p>The top section of the dialog is the <code>structure selection area</code>; it is completed automatically and as such is always the same.
Within the structure, the editor has the option to select the menu level at which to generate the new page.
The corresponding input component may already have been preassigned.
In this case, a <a href="#default_folder">structure folder</a> will already have been defined in the configuration dialog of the project component.
However, the editor is free to change this selection.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In some cases, the <code>structure selection area</code> may be hidden in the dialog.
In this case, a <a href="#default_folder">structure folder</a> will also have been predefined in the project component.
At the same time, however, a setting will have been made to prevent the editor from changing this preassignment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Unlike the <code>structure selection area</code>, the <code>form area</code> underneath is always project-specific.
It shows the form for the page template specified in the project component.
The rules defined in the template also apply here.</p>
</div>
<div id="detail_pages_dialog_not_shown_note" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Within the reference project, the form fields of the category or product pages are automatically populated or have corresponding default values.
In addition, a structure folder is predefined in the <a href="#pcomp">project component</a>, which cannot be changed by the editor.
Both for the structure selection area and the form area, there is therefore no need for the editor to input anything.
The dialog is not shown for this reason.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An example dialog is shown in the figure below:</p>
</div>
<div id="report_dialog_newpage" class="imageblock">
<div class="content">
<img src="../../_images/report_dialog_newpage.png" alt="report dialog newpage">
</div>
<div class="title">Figure 7. Dialog for creating a category or product page</div>
</div>
<div class="paragraph">
<p>Click on btn:[Create] to generate the page reference for the category or product page at the selected menu level.
The corresponding page is created in a specific folder in the Page Store.
Within this folder, a distinction between category and product pages is made once again on the basis of subfolders.
The names of the page references and pages generated are based on the <code>product ID (product name)</code> or <code>category ID (category name) schema</code>.</p>
</div>
<div class="paragraph">
<p>If a script has also been specified in the <a href="#pcomp">project component</a>, it is usually executed before and after the category or product page is created.
The <em>create_sfcc_item_wizard</em> script included in the reference project supplied does, however, have a corresponding query, which is used to initiate the script, but only once the page has been created.
It marks each created category or product page as translated for all languages and saves its storefront ID in the form.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please note that only the code from the HTML channel of the script is executed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following parameters are transferred to this script:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19.2307%;">
<col style="width: 19.2307%;">
<col style="width: 61.5386%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data type</th>
<th class="tableblock halign-left valign-top">Object name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BaseContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">context</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The context in which the script is executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beforeInstantiation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> if the script is executed before the page is created; otherwise <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">keyProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The object for that a category or product page is being created. This is either a <code>product</code> or a <code>category</code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Javadoc documentation supplied describes the <code>KeyProvider</code>, <code>Product</code>, and <code>Category</code> interfaces.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the process to generate the category or product page and the execution of the script have been completed, the new page is called up automatically.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Calling up an existing category or product page</strong></span><br>
Objects for that a category or product page already exists are identified in the report by a green icon (see figure <a href="#report_jump_to">Product with product page</a>).
When you hover over them, the <span class="image"><img src="../../_images/report_jump_icon.png" alt="report jump icon"></span> button is displayed.
Click this button to call up the corresponding category or product page.</p>
</div>
<div id="report_jump_to" class="imageblock">
<div class="content">
<img src="../../_images/report_jump_to.png" alt="report jump to">
</div>
<div class="title">Figure 8. Product with product page</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Broken reference to a category or product page</strong></span><br>
If there are objects with a category or product page but the page reference or underlying page cannot be found, the objects are identified in the report by a red icon (see figure <a href="#report_ref_broken">Broken object</a>).
When you hover over them, the <span class="image"><img src="../../_images/report_broken_icon.png" alt="Broken Reference"></span> button is displayed.
Click on this button to open a dialog containing more information.</p>
</div>
<div id="report_ref_broken" class="imageblock">
<div class="content">
<img src="../../_images/report_ref_broken.png" alt="report ref broken">
</div>
<div class="title">Figure 9. Broken object</div>
</div>
<div id="hidden_categories" class="paragraph">
<p><span class="underline"><strong>Hidden categories</strong></span><br>
When the category report is called up, both visible as well as hidden categories are displayed by default.
By removing the <code>Include hidden categories</code> check mark, the results list can be limited to include only visible categories:</p>
</div>
<div id="exclude_hidden_categories" class="imageblock">
<div class="content">
<img src="../../_images/category_report_hidden_excluded.png" alt="category report hidden excluded">
</div>
<div class="title">Figure 10. Hiding hidden categories</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The identification of existing, broken, and unavailable references to category pages described in this chapter applies also to hidden categories.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="catlandingpage"><a class="anchor" href="#catlandingpage"></a>Category landing pages</h4>
<div class="paragraph">
<p>Category landing pages are used to display the products originating from {ccloud}.
They provide an overview of all the products belonging to a selected main category.
The products are arranged and the product information is displayed automatically; this cannot be influenced by the {fs} editor.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The category landing page offers the editor different options for entering content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The header of the page displays a banner into which a <a href="#banner_image">static image</a> can be integrated.</p>
</li>
<li>
<p>The main area has two content areas, in which:</p>
<div class="ulist">
<ul>
<li>
<p>a <a href="#grid_container">grid containers</a>,</p>
</li>
<li>
<p>a <a href="#video">video</a> or</p>
</li>
<li>
<p>text with a heading</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>may be used.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
As both the form and the content of the HTML channel for the category landing page and the <a href="#hp">homepage</a> broadly match, both developer views are also nearly identical.
This is therefore where only the discrepancy between both templates is described:</p>
</div>
<div class="paragraph">
<p>The page type to be used for the {fs} preview is also defined for the category landing pages in the hidden <code>Preview Page Type</code> form field.
In contrast to the homepage, it can assume different values in theory.
For the reference project supplied, however, only the <code>Search</code> parameter is required and is selected as the default value.</p>
</div>
<div class="paragraph">
<p>Furthermore, the form has the <code>SFCC Context ID</code> field.
The <code>SFCC Context ID</code> corresponds to the category ID from the storefront.
If the field is empty, a category landing page maintained in the {fs} project does not exist and the <a href="#uc_preview">preview</a> shows the corresponding Storefront page.
A button to create a category landing page is added to the Storefront page via the <em>Create Page</em> template.
This button functions in the same way as the button in the <a href="#create_detailpage">report</a>.
When generating a category landing page, the category ID is automatically saved to the associated form field.</p>
</div>
<div class="paragraph">
<p>The <em>Preview Generation</em> format template needs the category ID to generate the preview for all pages.
For each page, it expects to receive the category ID in the form of the <code>SFCC Context ID</code> variable.
This ID must therefore be included in every page template, with the exception of the <a href="#hp">homepage</a>.
If the associated form field is empty or the corresponding page in {fs} is not marked as translated, generation is canceled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!#global.preview &amp;&amp; !#global.page.isTranslated || pt_storefrontUrlContextId.isEmpty)$
   $CMS_SET(#global.stopGenerate, true)$
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>As described <a href="#detail_pages_dialog_not_shown_note">above</a>, the form for the category landing pages does not contain any elements to be completed by the editor.
No dialog is therefore shown when a page of this nature is created.
If a form only contains elements for that the attribute <code>hidden</code> has the value <code>yes</code>, the <em>{modulname}</em> module decides for itself that the form does not need to be shown.
In the reference project, the form for the category landing pages does, however, contain an <code>FS_BUTTON</code>, which is only hidden dynamically in {wc} by means of a rule.
In both clients, this button should not result in the dialog being shown when a category landing page is created.
For this reason, the following elements were added to the form:</p>
</div>
<div class="listingblock">
<div class="title">Form</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;CMS_INPUT_TOGGLE name="pt_hideNewPageDialogCC" hFill="yes" hidden="yes" singleLine="no"&gt;
  &lt;LANGINFOS&gt;
    &lt;LANGINFO
      lang="*"
      label="Hide New Page Dialog in ContentCreator"
      description="Hide the dialog in the ContentCreator when creating a new landing page."
    /&gt;
  &lt;/LANGINFOS&gt;
&lt;/CMS_INPUT_TOGGLE&gt;

&lt;CMS_INPUT_TOGGLE name="pt_hideNewPageDialogSA" hFill="yes" hidden="yes" singleLine="no"&gt;
  &lt;LANGINFOS&gt;
    &lt;LANGINFO
      lang="*"
      label="Hide New Page Dialog in SiteArchitect"
      description="Hide the dialog in the SiteArchitect when creating a new landing page."
    /&gt;
  &lt;/LANGINFOS&gt;
&lt;/CMS_INPUT_TOGGLE&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>These explicitly instruct the <em>{modulname}</em> module not to show the dialog in {wc} or in {jc}.
Their fallback values are therefore <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="catdetailpage"><a class="anchor" href="#catdetailpage"></a>Category detail pages</h4>
<div class="paragraph">
<p>As with the <a href="#catlandingpage">category landing pages</a>, the category detail pages are used to display the products originating from {ccloud}.
However, unlike the category landing pages, they provide an overview of all products belonging to a subcategory.
The products are arranged and the product information displayed automatically and cannot be influenced by the {fs} editor.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The category detail page only allows an editor to integrate a <a href="#banner_image">static image</a> into the header of the page.
Furthermore, the editor is unable to maintain content.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Unlike the other pages, which follow the slot-based approach, both <a href="#proddetailpage">product</a> and category detail pages use the <code>Content Integration API (CI API)</code>.
This API enables Velocity fragments that are maintained in the {fs} template to be evaluated on the {sf} side.</p>
</div>
<div class="paragraph">
<p>If the <code>CI API</code> is being used, the hidden <code>Use velocity rendering</code> toggle is activated in the form of the page template within the reference project,
and the <code>Custom</code> parameter is defined in the <code>Preview Page Type</code> form field.
The <code>Content-Render</code> value is also entered in the <code>Velocity rendering controller appendix</code> form field.
This value defines the call of the <code>Content</code> controller that is supplied in the <code>int_espirit_sfra</code> cartridge and carries out Velocity rendering on the {sf} side.
The value must be adapted accordingly if an external controller is being used.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The chapter about the <a href="#login_page">login page</a> describes in more detail how an individual page type can be defined.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another difference compared to the other pages is that the category detail pages only generate a single asset, just like the <a href="#contentpage">content pages</a>.
This asset is created in the HTML channel of the page template, which differentiates between the display of the page in the <a href="#uc_preview">{fs} preview</a> and in the live state.
The developer view must therefore take both the preview as well as the generation and the live state into account.</p>
</div>
<div class="paragraph">
<p><strong>Preview</strong></p>
</div>
<div class="paragraph">
<p>The Velocity fragments can be used to insert {sf} widgets provided by the <code>Common</code> controller in a page.
The <code>$include.widget()</code> function, which is defined in the <code>Content</code> controller, deals with the integration process.
The required widget must be transferred to this function as a parameter.</p>
</div>
<div class="paragraph">
<p>The code example below shows the integration of the {sf} Page Header in the category detail page:</p>
</div>
<div class="listingblock">
<div class="title">Page Header integration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">&lt;!-- CMS-VELOCITY-PAGE_HEADER-START --&gt;
   $include.widget('Common-PageHeader')
&lt;!-- CMS-VELOCITY-PAGE_HEADER-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the general widgets, the <code>CategorySearchResult</code> controller integrates specific data into the category detail page:
In the case of the preview, for example, it uses the category ID of the selected subcategory to determine the corresponding products, and then displays these in the <a href="#uc_preview">preview</a>.
This data is already provided in the live state and is available to use via the <code>$categorySearchResult</code> variable.</p>
</div>
<div class="listingblock">
<div class="title">Integrating subcategory products</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">&lt;!-- CMS-VELOCITY-SEARCH_RESULT-START --&gt;
   $CMS_IF(#global.preview)$
      $include.widget('CategorySearchResult-Show', 'cgid', '$CMS_VALUE(pt_storefrontUrlContextId)$')
   $CMS_ELSE$
      $categorySearchResult
   $CMS_END_IF$
   [...]
&lt;!-- CMS-VELOCITY-SEARCH_RESULT-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Generation</strong></p>
</div>
<div class="paragraph">
<p>For generation purposes, it is important to ensure firstly that the corresponding page is marked as translated in {fs} and that the <code>SFCC Context ID</code> field is populated.
The <code>SFCC Context ID</code> corresponds to the category ID from the storefront.
When a category detail page is being generated via the report, the ID is automatically saved to the associated form field.
The generation is only carried out and the asset for the category detail page is only created once the form field is populated and the corresponding page is marked as translated in {fs}.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!#global.preview &amp;&amp; !#global.page.isTranslated || pt_storefrontUrlContextId.isEmpty)$
   $CMS_SET(#global.stopGenerate, true)$
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The editorial content is then saved in the <code>set_pageContent</code> variable, and the <code>set_parent_id</code> variable is assigned the value of the hidden <code>SFCC Parent Folder</code> field.
This value specifies where the created asset is filed in the {sf} folder structure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(set_parent_id,pt_dwre_parentFolder)$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both variables are evaluated while the XML collector is populated, a process that is carried out subsequently.
In the process, a new content node is created, to which the editorial content of the page, among other things, is added.</p>
</div>
<div class="paragraph">
<p><strong>Live state</strong></p>
</div>
<div class="paragraph">
<p>A category detail page already exists for subcategories on the {sf} side as standard.
This page is used for the live state.
The display is controlled by the <a href="#cartridges">Search controller</a>, which has been expanded to take account of assets generated on the {fs} side.
Using this expansion and a category ID assigned to it, the controller first checks whether a category detail page that has been generated with {fs} is present.
If one is present, it is rendered in the live state with the Velocity engine.
Otherwise, the {sf} standard page is displayed.</p>
</div>
</div>
<div class="sect3">
<h4 id="proddetailpage"><a class="anchor" href="#proddetailpage"></a>Product detail pages</h4>
<div class="paragraph">
<p>Like category detail pages, product pages are used to display products originating from {ccloud}.
However, unlike category detail pages, they do not display an overview of multiple products.
Instead, they provide a detail view of a single product.
The product information originates from {ccloud} and cannot be edited by the {fs} editor.
However, the editor can choose to show and hide this information.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
Product detail pages offer the editor various options for entering content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The page form contains various input components</p>
<div class="ulist">
<ul>
<li>
<p>to define a promotional text.
This text can contain a maximum of 1,024 characters.</p>
</li>
<li>
<p>to show/hide product information.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The header of the page displays a banner into which a <a href="#banner_image">static image</a> can be integrated.</p>
</li>
<li>
<p>The main area of the page enables the display of:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#producttiles">Product Tiles</a>.</p>
</li>
<li>
<p>a <a href="#video">video</a>.</p>
</li>
<li>
<p>a text with a heading.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The sections required for entering content are covered in more detail in the corresponding sub-chapters.
As the text section is self-explanatory, this is not described specifically.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Just like <a href="#catdetailpage">category detail pages</a>, product detail pages use the <code>Content Integration API (CI API)</code>.
This API enables Velocity fragments to be evaluated on the {sf} side.
Moreover, product detail pages only generate a single asset. This asset is generated in the HTML channel of the page template.</p>
</div>
<div class="paragraph">
<p>As both the form and the content of the HTML channel for product and <a href="#catdetailpage">category detail pages</a> broadly match, both developer views are also identical in terms of form and content.
Therefore, only the differences between the two templates will be described here.</p>
</div>
<div class="paragraph">
<p>The {sf} widgets of a product detail page are made available via the <a href="#cartridges"><code>Product</code> controller</a> and integrated into the page using Velocity fragments.
Here too, the <code>$include.widget()</code> function of the <code>Content</code> controller is used for integration purposes (the function transfers the required widget as a parameter).</p>
</div>
<div class="paragraph">
<p>The hidden input components necessary to use the <code>CI API</code> include, for example, the <code>Velocity rendering controller appendix</code> field.
Since product detail pages, like the <a href="#login_page">login page</a>, use an individual controller to generate the preview, this must be specified here.
Therefore, the field contains the <code>Content-Render</code> value, to which a reference to the <code>SFCC Context ID</code> field is added.
This corresponds to the ID of the product to be displayed and is required by the controller.
The <code>{filter}</code> reads out this value and adds it in the corresponding location.</p>
</div>
<div class="listingblock">
<div class="title">Default value for the Velocity rendering controller appendix form field</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">Content-Render?pid={pt_storefrontUrlContextId}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As well as the hidden input components, the form also contains a text field for the entry of a promotional text and various <code>CMS_INPUT_TOGGLEs</code>.
The toggles offer the editor the option to show or hide the widgets on the product detail page individually:</p>
</div>
<div class="listingblock">
<div class="title">Integration with CMS_INPUT_TOGGLE</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!pt_hideProductInfo)$
   &lt;!-- CMS-VELOCITY-PRODUCT_INFO-START --&gt;
   $include.widget('Product-WrapProductTemplate','pid',$product.id,
                   'productTemplate','product/components/productInfo')
   &lt;!-- CMS-VELOCITY-PRODUCT_INFO-END --&gt;
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>For generation purposes, it is important to ensure that product detail pages are also marked as translated and that the <code>SFCC Context ID</code> field is populated.
In this case, the <code>SFCC Context ID</code> corresponds to the product ID from Storefront.
If no product detail page maintained in the {fs} project exists, the preview shows the corresponding Storefront page.
The Storefront page display is based on the <code>Product Detail Page Preview</code> page template.
A button to create a product detail page is added to the Storefront page via the <em>Create Page</em> template.
This button functions in the same way as the button in the report.
When creating a product detail page, the <code>Product Detail Page</code> page template is then used and the product ID is automatically saved to the associated form field.
If the page is marked as translated and the <code>SFCC Context ID</code> field is populated, generation is carried out and the asset for the product detail page is created.</p>
</div>
<div class="paragraph">
<p>As well as providing the widgets, the <code>Product</code> controller also controls how the product detail page is displayed when the website is live.
It uses the product ID to check whether a product detail page that has been generated with {fs} exists.
If it does, it is rendered in the live state with the Velocity engine.
If it does not, a product detail page that already exists by default on the {sf} side is displayed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_banner"><a class="anchor" href="#_banner"></a>Banner</h3>
<div class="paragraph">
<p>The header of a page allows a banner to be displayed in which either a static image or a slider can be integrated.
Both variants each correspond to a section, which is available for the <a href="#hp">homepage</a> and for normal <a href="#contentpage">content pages</a>, as well as in <a href="#blog">articles</a> and for <a href="#detail_pages">category and product pages</a>.</p>
</div>
<div class="paragraph">
<p>These are described in detail in the following sub-chapters.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/slider.png" alt="slider">
</div>
<div class="title">Figure 11. Slider</div>
</div>
<div class="sect3">
<h4 id="slider"><a class="anchor" href="#slider"></a>Slider</h4>
<div class="paragraph">
<p>The slider corresponds to an image list.
All entries in this list correspond to a slider item and are displayed one after another in the header of a page.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
With the slider, the editor is able to create a list of images, which can each be assigned a title as well as a link to a <a href="#detail_pages">category or product page</a>.
The images can be selected from the media store or uploaded with the help of the input component.</p>
</div>
<div class="paragraph">
<p>A <a href="#cat_prod_link">link</a> to a category or product page is specified by entering link text and the associated product or category ID.
Both fields are automatically populated when a product or category is transferred from one of the two reports.
As the link refers to the entire banner, its link text is only used as a tooltip and is not displayed as a clickable link.</p>
</div>
<div class="paragraph">
<p>The selected images are displayed as a slider in the header of the corresponding page and can be cropped individually using the corresponding {fs} functionality.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The slider is based on the <a href="https://v4-alpha.getbootstrap.com/components/carousel/">Bootstrap carousel</a> and integrates the list of images selected by the editor.
The images are selected via an <code>FS_CATALOG</code> input component, whose individual entries use the template for the slider item.
The input component has the <code>upload=yes</code> parameter, which allows the editor to upload new images.</p>
</div>
<div class="paragraph">
<p>To crop the images, the <code>SLIDE</code> <a href="#resolutions">resolution</a> is required, which is already applied in the project properties of the reference project and must be specified in the HTML channel:</p>
</div>
<div class="listingblock">
<div class="title">Specifying the resolution</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$CMS_RENDER(template:"media_link",mediaref: st_picture,res:"SLIDE")$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The entire slider is assigned to the <code>set_sectionContent</code> variable, which is required during generation of the <a href="#hp">homepage</a> or a <a href="#detail_pages">category or product page</a> to populate the corresponding XML file.
For a <a href="#contentpage">content page</a>, however, the variable is only output.</p>
</div>
<div class="paragraph">
<p>As the slider uses no content from {ccloud}, it does not have to be labeled with HTML tags, and is shown in the preview without substitution.</p>
</div>
</div>
<div class="sect3">
<h4 id="banner_image"><a class="anchor" href="#banner_image"></a>Banner image</h4>
<div class="paragraph">
<p>The banner image corresponds to a static image that is displayed in the header of a page.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The static banner image is selected either via the media store or by uploading a new image.
With the help of the standard {fs} functionality, it can be cropped to the required image section.</p>
</div>
<div class="paragraph">
<p>In addition, the section offers editors the following further configuration options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maintaining a one-line title</p>
</li>
<li>
<p>Specifying a link to a category or product page</p>
</li>
<li>
<p>Defining the size and banner display</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once a title has been entered, it will have a blue background and can be positioned left, right, or center on the banner image.
In doing so, it should be specified whether the blue-shaded background is displayed on the left or right, only as a narrow strip, or over the entire height of the banner.
In the central position, it generally spans the entire height.
The input component for positioning only becomes visible when the title is entered and is otherwise hidden.</p>
</div>
<div class="paragraph">
<p>A <a href="#cat_prod_link">link</a> to a category or product page is specified by entering link text and the associated product or category ID.
Both fields are automatically populated when a product or category is transferred from one of the two reports.
As the link refers to the entire banner image, its link text is only used as a tooltip and is not displayed as a clickable link.</p>
</div>
<div class="paragraph">
<p>To define the size of the banner, the options <code>Small</code> and <code>Big</code> are available for editors.<br>
The <code>Small</code> option minimizes the height of the banner and displays it only as a narrow strip.
This could lead to a selected image being cropped at the bottom.<br>
The <code>Big</code> option displays the banner without any height restrictions and also allows the editor to define a design.</p>
</div>
<div class="paragraph">
<p>The options <code>None</code>, <code>Top</code>, and <code>Bottom</code> are available for the design.
The <code>None</code> option results in no changes being made to the banner, while for the other two options, a white overlay is added to the upper left or lower right corner.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/bannerimage.png" alt="bannerimage">
</div>
<div class="title">Figure 12. Banner image with 'Top' design</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The HTML channel references the selected image and displays it together with the configured title and link, while taking into account the image section and layout defined by the editor.
To crop the image, the <code>BANNER</code> <a href="#resolutions">resolution</a> is required, which is already applied in the project properties of the reference project and must be specified in the HTML:</p>
</div>
<div class="listingblock">
<div class="title">Specifying the resolution</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$CMS_RENDER(template:"media_link",mediaref:st_picture,res:"BANNER")$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>st_picture</em> input component has the <code>upload=yes</code> parameter, which allows the editor to upload new images, as well as to select an existing image from the media store.</p>
</div>
<div class="paragraph">
<p>The entire content is assigned to the <code>set_sectionContent</code> variable, which is required during generation of the <a href="#hp">homepage</a> or a <a href="#detail_pages">category or product page</a> to populate the corresponding XML file. For a <a href="#contentpage">content page</a>, however, the variable is only output.</p>
</div>
<div class="paragraph">
<p>As the image is referenced from the media store of the {fs} project and is therefore not affected by substitution of {sf} content, it does not have to be labeled with HTML tags.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="grid_container"><a class="anchor" href="#grid_container"></a>Grid Container</h3>
<div class="paragraph">
<p>In contrast to simple <a href="#contentpage">content pages</a>, the <a href="#hp">homepage</a> and <a href="#catlandingpage">category landing pages</a> are able to display a group of three to five images via the grid container, each corresponding to a grid container element.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/grid.png" alt="grid">
</div>
<div class="title">Figure 13. Grid container</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
With the grid container, the editor is able to create a list of images, which can each be assigned a title as well as a link to a <a href="#detail_pages">product, category</a>, or <a href="#contentpage">content page</a>.
Depending on the configuration, three to five images are displayed from this list and can be individually cropped to the required image section.
The images can originate from the media store or can be uploaded with the help of the input component.</p>
</div>
<div class="paragraph">
<p>The images are arranged according to a certain layout that is predetermined by the editor.
The following seven options are available here.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the list created by the editor contains more entries than is envisaged by the layout, then only the first entries are taken into account.
Surplus elements are ignored by the layout.
The editor receives a notification about this in the form.</p>
</div>
<div class="paragraph">
<p>If the list created by the editor contains fewer entries than is envisaged by the layout, or if the editor does not select an image for an element, placeholders are displayed instead.
In both cases, the page cannot be released until the layout is completed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/grid_opt.png" alt="grid opt">
</div>
<div class="title">Figure 14. Grid container - Layout options</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Within the HTML channel and based on the image section and layout chosen by the editor, the selected images are referenced and their configured titles and links displayed.
Only the number of images corresponding to the layout are taken into account, and all other entries ignored.</p>
</div>
<div class="paragraph">
<p>To crop the images, the <code>GRID_ELEMENT_SQUARE</code>, <code>GRID_ELEMENT_HIGH</code>, and <code>GRID_ELEMENT_WIDE</code> <a href="#resolutions">resolutions</a> are required.
They are already applied in the project properties of the reference project and must be specified in the HTML:</p>
</div>
<div class="listingblock">
<div class="title">Specifying the resolution</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$CMS_REF(st_picture, resolution:"GRID_ELEMENT_SQUARE")$
$CMS_REF(st_picture, resolution:"GRID_ELEMENT_HIGH")$
$CMS_REF(st_picture, resolution:"GRID_ELEMENT_WIDE")$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>st_picture</em> input component has the <code>upload=yes</code> parameter, which allows the editor to upload new images, as well as to select an existing image from the media store.</p>
</div>
<div class="paragraph">
<p>The content is assigned to the <code>set_sectionContent</code> variable, which is required during generation of the <a href="#hp">homepage</a> or a <a href="#catlandingpage">category landing page</a> to populate the corresponding XML file.</p>
</div>
<div class="paragraph">
<p>As the images are referenced from the {fs} media store and there is no substitution of {sf} content, they do not have to be labeled with HTML tags and are displayed in the preview in the usual way.</p>
</div>
</div>
<div class="sect2">
<h3 id="hot_spots"><a class="anchor" href="#hot_spots"></a>Hot spots</h3>
<div class="paragraph">
<p>In addition to the <a href="#grid_container">grid container</a>, products can be displayed in the form of hot spots.
Each hot spot corresponds to a <a href="#cat_prod_link">product link</a>, which is defined on a single static image parallel to the other hot spots.
When you click, a flyout opens for each hot spot, which includes the name, an image, and a description of the corresponding product.</p>
</div>
<div class="paragraph">
<p>The static image is selected and the hot spots are defined with the help of the <em>Shop the look</em> section template, which can only be added to the <a href="#hp">homepage</a> and <a href="#contentpage">content pages</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/hotspot.png" alt="hotspot">
</div>
<div class="title">Figure 15. Hot spots</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
In addition to the static image, the editor can specify a title made up of maximum 20 characters, which can be positioned on the left, on the right or in the center on the image.
The image can either be selected from the media store or uploaded via drag-and-drop on the btn:[Upload a picture] button in the form.
It can be cropped with the help of the familiar {fs} functionality.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the section is used within a <a href="#blog_article">blog article</a>, the image to be selected cannot be cropped.
This functionality is only available if the section is directly integrated into a page.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The editor can create any number of hot spots on the image by selecting an image section and defining a <a href="#cat_prod_link">product link</a> for this.
The link expects a link text and a product ID.
Both fields are automatically populated when a product is transferred from the product report.
After the form has been saved, the created hot spots are displayed in the relevant location on the image and the link text corresponds to the displayed product name.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The HTML channel initially references the selected image and displays it together with the title.
The hot spots are then determined and positioned using the image sections specified by the editor.
For each hot spot, the associated flyout is also created, which appears when the hot spot is clicked and automatically displays the corresponding product information.</p>
</div>
<div class="paragraph">
<p>The entire content is assigned to the <code>set_sectionContent</code> variable, which is required during generation of the <a href="#hp">homepage</a> to populate the corresponding XML file.
For a <a href="#contentpage">content page</a>, however, the variable is only output.</p>
</div>
<div class="paragraph">
<p>As the image is referenced from the media store of the {fs} project and is therefore not affected by substitution of {sf} content, the content does not have to be labeled with HTML tags.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As the image map in {fs} does not provide the option to upload and crop an image by default, the two scripts <em>cc_crop</em> and <em>cc_upload</em> have been added to the reference project.
They make both functionalities available to the editor.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_blog"><a class="anchor" href="#_blog"></a>Blog</h3>
<div class="paragraph">
<p>In contrast to the <a href="#hp">homepage</a> and <a href="#detail_pages">category and product pages</a>, <a href="#contentpage">content pages</a> have the option to display blog articles.
Every blog article corresponds to a dataset of the <em>Article</em> data source and must first be generated by the editor.</p>
</div>
<div class="paragraph">
<p>With the aid of two table templates, they can be presented either in the form of an overview of all available blog articles or as a detail view of one single article.
Both options are described in the sub-chapters below.</p>
</div>
<div class="sect3">
<h4 id="_article_overview"><a class="anchor" href="#_article_overview"></a>Article overview</h4>
<div class="paragraph">
<p>The article overview presents all blog articles included in the project sorted by their creation date.
In each case, the display is limited to the heading of an article plus the teaser and teaser image.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/article_overview.png" alt="article overview">
</div>
<div class="title">Figure 16. Article overview</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The teaser image must be created with the resolution of <code>ARTICLE_TEASER_IMAGE</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
As the overview is generated automatically, the editor can only define the number of blog articles to be displayed as well as their distribution across one or more pages.
It is configured using the familiar {fs} functionality on the <code>Data</code> tab of the relevant page reference.</p>
</div>
<div class="paragraph">
<p>Apart from this, the editor has no access to the function other than to integrate the table template.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The HTML channel of the table template determines the datasets of the <em>Article</em> data source and in each case outputs the heading, the teaser, and the teaser image of all blog articles one after the other.
The individual articles are separated by a horizontal line and their headings match the link to the relevant detail page.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To link the detail page, its reference name must be known to the overview page.
In the reference project, the reference name of the relevant page reference (<em>magazine_article</em>) was therefore permanently included to the template for the overview page.
In individual scenarios, this is therefore to be adapted accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, a navigation function is inserted in the first position before the list of blog articles.
This enables users to browse through the blog articles if they are distributed across several pages.
If all blog articles are presented on a single page, the navigation function is hidden.</p>
</div>
</div>
<div class="sect3">
<h4 id="blog_article"><a class="anchor" href="#blog_article"></a>Articles</h4>
<div class="paragraph">
<p>Every blog article corresponds to a dataset of the <em>Article</em> data source and makes various input options available to the editor.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
To create a blog article, the editor must first enter a heading and teaser text as well as select a teaser image.
A creation date and an author must also be specified.
The editor also has the option of specifying a banner or slider for the article.
These paragraphs are created as described in chapter <a href="#banner">Banner</a>.</p>
</div>
<div class="paragraph">
<p>To record the editorial content, the following sections are also available to the editor.
The <em>Article Tiles</em> section can only be used within blog articles.
It is not included in the section selection for the page templates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Shop the look</strong><br>
The section enables products to be presented as what are known as hot spots.
It corresponds to the section of the same name, which can be added to the <a href="#hp">homepage</a> and <a href="#contentpage">content pages</a> and which has already been described in the previous <a href="#hot_spots">chapter</a>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the section is used within a <a href="#blog_article">blog article</a>, the image to be selected cannot be cropped.
This functionality is only available if the section is directly integrated into a page.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Article Tiles</strong><br>
This section can be used to present three blog articles side by side in a column view.
In each case, the view comprises the heading, the teaser image, and the teaser text plus the author and the creation date of the article.
Clicking the heading calls up the detail page of the corresponding blog article.</p>
<div class="paragraph">
<p>A heading can be specified for the section and displayed left-aligned, right-aligned, or centered above the blog articles.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/article_tiles.png" alt="article tiles">
</div>
<div class="title">Figure 17. Article Tiles</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To link the detail page, the reference name of the relevant page reference (<em>magazine_article</em>) was permanently included to the template for the section.
In individual scenarios, this must be adapted accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Product Tiles</strong><br>
This section is available for blog articles and <a href="#proddetailpage">product detail pages</a>.
It is described in the <a href="#producttiles">chapter of the same name</a>.
In the same way as <em>Article Tiles</em>, this section presents three products side by side in a column view.</p>
<div class="imageblock">
<div class="content">
<img src="../../_images/product_tiles.png" alt="product tiles">
</div>
<div class="title">Figure 18. Product Tiles</div>
</div>
</li>
</ul>
</div>
<div id="text_picture_section" class="ulist">
<ul>
<li>
<p><strong>Text Picture</strong><br>
The section provides five ways of adding text and/or images.
It corresponds to the section of the same name, which can be added to <a href="#login_page">login pages</a> and blog articles and is described in the <a href="#textpicture">corresponding chapter</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The HTML channel first outputs the heading of the blog article along with the name of the author and the creation date.
It then determines the sections generated by the editor and displays these one after the other.</p>
</div>
<div class="paragraph">
<p>As there is no substitution of {sf} content, the blog content does not have to be labeled with HTML tags.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="textpicture"><a class="anchor" href="#textpicture"></a>Text Picture</h3>
<div class="paragraph">
<p>As its name suggests, this section is used to add text and/or images.
It is only permitted in <a href="#blog_article">blog articles</a> and <a href="#login_page">login pages</a>.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
This section provides editors with five different options for entering content.
These options are selected from within a form:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Option 1 - only text</dt>
<dd>
<p>With the first option, only text can be added.</p>
</dd>
<dt class="hdlist1">Option 2 - 1 picture</dt>
<dd>
<p>The second option enables a single image to be added.</p>
</dd>
<dt class="hdlist1">Option 3 - 2 pictures side by side</dt>
<dd>
<p>In addition to the second option, the editor can use the third option to add two images, which are displayed side by side.</p>
</dd>
<dt class="hdlist1">Option 4 - picture left, text right</dt>
<dd>
<p>This option enables the image and text to be displayed simultaneously.
The image is displayed on the left of the text.</p>
</dd>
<dt class="hdlist1">Option 5 - text left, picture right</dt>
<dd>
<p>The fourth and fifth option are equivalent to one another.
In this case, however, the image is displayed on the right of the text.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The content selected by the editor is displayed and positioned accordingly within the HTML channel based on the option selected by the editor.
As the content does not come from {ccloud}, it does not have to be labeled with HTML tags.
It is shown in the preview without substitution.</p>
</div>
</div>
<div class="sect2">
<h3 id="producttiles"><a class="anchor" href="#producttiles"></a>Product Tiles</h3>
<div class="paragraph">
<p>Like article tiles, which can only be used in <a href="#blog_article">blog articles</a>, this section presents three products side by side in a column view.
It is only permitted in a blog article or on a product detail page and shows the name, image, and a description for each product.
Clicking the product name opens the corresponding <a href="#proddetailpage">product detail page</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/product_tiles.png" alt="product tiles">
</div>
<div class="title">Figure 19. Product Tiles</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
In addition to the three products to be selected, the editor can specify an optional title made up of a maximum of 50 characters to be positioned on the left, on the right, or in the center above the product tiles.
The products can be referenced in the form using drag-and-drop (the product name is added as link text).
Unlike the product information, the product name can be edited.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the selection created by the editor contains fewer than three products, the page cannot be released.
It is not possible to select more than three products.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The products selected by the editor are referenced and the title is positioned within the HTML channel.
For each product, its name, a product image, and a description are determined and displayed.
As the information is taken from {sf} without substitutions, HTML tags are not required.</p>
</div>
</div>
<div class="sect2">
<h3 id="video"><a class="anchor" href="#video"></a>Video</h3>
<div class="paragraph">
<p>A page in the reference project can also contain videos alongside purely textual information.
Each video corresponds to a section, which provides different configuration options.
The associated section template can only be added to <a href="#contentpage">content pages</a> and <a href="#catlandingpage">category landing pages</a>, not the <a href="#hp">homepage</a>.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
To reference videos, editors can make use of the <em>YouTube</em> and <em>Vimeo</em> platforms.
Both providers use a unique ID, which in each case forms part of the video URL:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Youtube</strong>: https://www.youtube.com/watch?v=&lt;VIDEO ID&gt;</p>
</li>
<li>
<p><strong>Vimeo</strong>: https://vimeo.com/&lt;VIDEO ID&gt;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The corresponding video for the page can be added using this ID.
The video is displayed in the standard format of <code>16:9</code>.
For YouTube videos, however, the options <code>21:9</code>, <code>4:3</code>, or <code>1:1</code> are also available.
Furthermore, the editor can define whether playback is started automatically and whether the video may be displayed in full screen mode.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Within the HTML channel, the selected video is first referenced in direct relation to the defined video platform.
For this, the display format as well as the different URL parameters are set and, in a final step, the correct video URL generated in accordance with the editor&#8217;s configured settings in the form.</p>
</div>
<div class="paragraph">
<p>This content is assigned to the <code>set_sectionContent</code> variable, which is required during generation of a <a href="#catlandingpage">category landing page</a> to populate the corresponding XML file.
For a <a href="#contentpage">content page</a>, however, the variable is only output.</p>
</div>
<div class="paragraph">
<p>As the embedded video does not come from {ccloud}, it does not have to be labeled with HTML tags.
It is shown in the preview without substitution.</p>
</div>
</div>
<div class="sect2">
<h3 id="_social_media"><a class="anchor" href="#_social_media"></a>Social Media</h3>
<div class="paragraph">
<p>Editors can use content from Facebook, Twitter, and Instagram in the reference project and embed it in a content page.
There is also the option to place buttons on a page so that visitors can use them to share the website link via various platforms.</p>
</div>
<div class="sect3">
<h4 id="_embedding_content"><a class="anchor" href="#_embedding_content"></a>Embedding content</h4>
<div class="paragraph">
<p>Content from social networking sites can be embedded in a website.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The <em>Social Media Embedding</em> section template is used for embedding content from social networking sites.
It requires one of the available platforms - Facebook, Twitter, or Instagram - to be selected within the section form.</p>
</div>
<div class="paragraph">
<p>If Facebook is being used as a platform, the type of post to be embedded must also be defined.
Posts, comments, and videos are available for selection.
In all cases, the URL of the post must then be entered in the corresponding form field.
There may also be additional options available for changing the way in which a post is displayed, depending on the type of post.</p>
</div>
<div class="paragraph">
<p>Twitter also provides a whole host of different options for editors:
It is possible to choose the List, Profile, or Collection Timelines option in the form in order to embed it in the page.
To do this, the editor must enter the name of the Twitter account associated with the timeline in the <code>Screen Name</code> form field.
List and Collection Timelines also require the timeline to be identified in the <code>ID</code> field.</p>
</div>
<div class="paragraph">
<p>Embedding an Instagram post simply requires the URL of the post to be entered in the form.</p>
</div>
<div class="paragraph">
<p>A <a href="#slot_configuration">slot configuration</a> must also be specified for all page templates, with the exception of the <a href="#contentpage">content page</a>.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The section template uses various mechanisms to embed the post in the page, depending on the selected platform.
The resulting HTML markup saves them in the <code>set_sectionContent</code> variable, which simply outputs them if a <a href="#uc_preview">{fs} preview</a> is generated.
When a content page is being generated, the value of the variable must also be output so that the value can be included in the content asset of the content page.
A new asset is created on other pages instead, and the value of <code>set_sectionContent</code> is stored in this asset.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sharing_the_page"><a class="anchor" href="#_sharing_the_page"></a>Sharing the page</h4>
<div class="paragraph">
<p>It is possible to give visitors to the website the option of sharing the page via various social networking sites.
A button for each supported platform can be placed on the page.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The <em>Social Media Share</em> section template is provided for using this function.
In this template, editors first select one or more social networking sites, for which they would like to add buttons in their page.
The size and position of the buttons only need to be defined once for all the selected platforms.
The supported platforms are Facebook and Twitter.</p>
</div>
<div class="paragraph">
<p>In the case of Facebook, there is the option to add individual text to the button; this text is maintained in the section form.
In the case of Twitter, editors have the option of storing the tweet text and hashtags.</p>
</div>
<div class="paragraph">
<p>A <a href="#slot_configuration">slot configuration</a> must also be specified for all page templates, with the exception of the <a href="#contentpage">content page</a>.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Depending on the selected networks, this template also generates different HTML content for the implementation of buttons.
Unlike <a href="#contentpage">content pages</a>, which simply output the markup, the other pages save the markup in a content asset.
In the case of a <a href="#uc_preview">preview</a>, the markup is simply displayed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_changing_the_language"><a class="anchor" href="#_changing_the_language"></a>Changing the language</h3>
<div class="paragraph">
<p>The reference project supplied uses English as the master language.
It also has Italian, French, Japanese, and Chinese as project languages.
To switch the view of a page to one of these languages, the project provides the option of changing languages in the <a href="#uc_preview">preview</a>.
This is displayed either as a dropdown menu or within a menu as a list item, depending on the screen size used.</p>
</div>
<div id="langs" class="imageblock">
<div class="content">
<img src="../../_images/langs.png" alt="langs">
</div>
<div class="title">Figure 20. Changing the language</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
Within the preview of the reference project, the change of language is displayed on the <a href="#hp">homepage</a>, on <a href="#contentpage">content pages</a>, and on <a href="#detail_pages">category and product pages</a>.
This enables the editor to maintain editorial content on each page for all the languages contained within the project.</p>
</div>
<div class="paragraph">
<p>As the selection of existing languages is determined automatically based on the project languages and the display also cannot be influenced, the editor has no access to the function other than to simply use it.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The change of language option is generated through the <em>Language Dropdown</em> format template and made available for use in the <a href="#uc_preview">preview</a> with the <em>Preview Generation</em> format template.
This is displayed either as a dropdown menu or within a menu as a list item, depending on the screen size used (see figure <a href="#langs">Changing the language</a>).</p>
</div>
<div class="paragraph">
<p>Both variants reference the <em>Language Dropdown</em> format template, which controls the display of variants via the <code>showInMenu</code> parameter to be transferred.
As the change of language replaces all of the corresponding {sf} content, both variants must be labeled with unique HTML comments.</p>
</div>
<div class="listingblock">
<div class="title">Changing the language in the Preview Generation format template</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$-- Preview Language Switch --$
&lt;!-- CMS-LANGUAGE-DROPDOWN-START --&gt;
   $CMS_RENDER(template:"sfcc_language_dropdown", mobile:false)$
&lt;!-- CMS-LANGUAGE-DROPDOWN-END --&gt;

&lt;!-- CMS-LANGUAGE-DROPDOWN-MOBILE-START --&gt;
   $CMS_RENDER(template:"sfcc_language_dropdown", mobile:true)$
&lt;!-- CMS-LANGUAGE-DROPDOWN-MOBILE-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>Language Dropdown</em> format template first determines the language currently displayed in the preview and shows this along with the corresponding icon as the first entry in the dropdown or language menu.
The list of all languages contained within the project is then queried and made available as further selection options with the exception of the previously defined language.</p>
</div>
</div>
<div class="sect2">
<h3 id="_links"><a class="anchor" href="#_links"></a>Links</h3>
<div class="paragraph">
<p>The editorial content maintained on the {fs} side contains links that can be used to link content.
In addition, links can be used to provide documents for download or for contact details.</p>
</div>
<div class="paragraph">
<p>These are based on different link templates, which are described in detail in the following sub-chapters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All link templates - with the exception of the article link - have the hidden <em>Add link tags</em> toggle component.
It ensures that the corresponding link has <code>&lt;a&gt;</code> tags when the associated link template is used within a <code>CMS_INPUT_DOM</code>.
If it is used in the context of a <code>CMS_INPUT_LINK</code>, the link does not get any <code>&lt;a&gt;</code> tags.
The toggle is activated via a rule.</p>
</div>
<div class="listingblock">
<div class="title">Add link tags</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$CMS_IF(lt_linkTags)$
   &lt;a href="$CMS_VALUE(lt_url)$"
    $CMS_IF(!lt_linktext.isEmpty)$ title="$CMS_VALUE(lt_linktext)$"$CMS_END_IF$
    target="_blank"&gt;
      $CMS_VALUE(lt_linktext, default: "Link")$
   &lt;/a&gt;
$CMS_ELSE$
   href="$CMS_VALUE(lt_url)$"
   $CMS_IF(!lt_linktext.isEmpty)$ title="$CMS_VALUE(lt_linktext)$"$CMS_END_IF$
   target="_blank"
$CMS_END_IF$</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="cat_prod_link"><a class="anchor" href="#cat_prod_link"></a>Category link and product link</h4>
<div class="paragraph">
<p>The category link and product link make it possible to link to <a href="#detail_pages">category and product pages</a>.
They are almost equivalent to one another and are therefore described jointly in this chapter.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
A link to a <a href="#detail_pages">category or product page</a> is specified by entering link text and the associated product or category ID.
Both fields are automatically populated when a product or category is transferred from one of the two reports.
While the ID cannot be changed, the link text can be changed at will by the editor.
If the editor deletes the link text or if the form field remains empty for other reasons, the term <code>Product</code> or <code>Category</code> is used instead.</p>
</div>
<div class="paragraph">
<p>In addition, category links allow the selection of a {sr}.
{sr}s are used to sort the products displayed on a category page according to predefined criteria.
If the editor does not make a selection, the sorting of the products on the displayed category page is based on the {sr} <code>Best Matches</code> by default.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Within the HTML channel of both templates, a differentiation is made between the preview and the generated state for the generation of links.
In the case of the generated state, an instruction is created, which triggers the determination of the correct URL on the {sf} side.
For a preview, the <a href="#main_navigation">dispatcher</a> included in the Site Store performs this task.
To start with, it checks whether a {fs} page reference exists for the transferred product or category ID.
If no such page reference exists, it determines the associated page from the storefront instead and displays this in the <a href="#uc_preview">preview</a>.
Furthermore, the URL of a category link is extended by a corresponding URL parameter if a {sr} is selected for it.
If the editor has not made a selection, a category page displays the <code>Best Matches</code> by default.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>At the current time, the <a href="#main_navigation">dispatcher</a> is not yet able to correctly assign references to variations of products to a {fs} page reference.
Therefore, the corresponding page from Storefront is always displayed whenever references to variations of products appear.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The use of {sr}s is only possible in the live state.
There is no sorting of any kind within the preview.
It always displays only the <code>Best Matches</code> - regardless of a selected {sr}.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="content_link"><a class="anchor" href="#content_link"></a>FS content link</h4>
<div class="paragraph">
<p>The FS content link is used to link page references within {fs}.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
To create a content link, the editor selects a page reference from the Site Store and specifies any link text.
Unlike the link text, selecting the page reference is a mandatory field.
If the field for the link text remains empty, the term <code>Link</code> is used instead.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a link to a page that exists exclusively in the storefront is required, the <a href="#ex_link">external link</a> must be used instead of the content link.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
As an FS content link is an internal link within the project, the page reference selected by the editor for the preview can be directly referenced.
Contrary to this, for the generated state, an instruction is created, which triggers the determination of the correct URL on the {sf} side.
For this, the asset ID, which is calculated beforehand within the link template, is transferred as a URL parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="article_link"><a class="anchor" href="#article_link"></a>Article link</h4>
<div class="paragraph">
<p>The article link enables individual <a href="#blog_article">blog articles</a> within a continuous text to be linked.
For this reason, it can only be used within the text or <a href="#text_picture_section">Text Picture</a> section.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The article link is equivalent to the <a href="#content_link">FS content link</a>.
The difference is the link target, which, in the case of the article link, corresponds to a blog article.
It therefore expects a dataset from the <em>Article</em> data source to be referenced in addition to the link text.
While the selection of the blog article is a mandatory field, the link text is optional.
If the field remains empty, the heading of the blog article is used initially.
If this has also not been specified, the term <code>Article Link</code> is used instead.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
As with the content link, the article link is an internal link within the project.
For this reason, the selected blog article can be referenced directly in the preview based on its FS ID.
For the generated state, an instruction is created instead, which triggers the determination of the correct URL on the {sf} side.
The asset ID is also transferred to it as a URL parameter.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To link the blog article, the reference name of the relevant page reference (<em>magazine_article</em>) was permanently added to the link template.
In individual scenarios, this must be adapted accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ex_link"><a class="anchor" href="#ex_link"></a>External link</h4>
<div class="paragraph">
<p>The external link is used to link external websites.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The external link functions similarly to the <a href="#content_link">content link</a>.
Unlike this, however, it links to external content and therefore expects a URL in addition to the link text, rather than a page reference.
While the URL is a mandatory field, the link text is optional.
If the field for it remains empty, the term <code>Link</code> is used instead.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By entering the corresponding storefront URL, the external link can also be used for links to content in {ccloud}.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Within the HTML channel, only the external link defined by the editor is created.
As with the <a href="#content_link">content link</a>, it is not necessary to use the <a href="#main_navigation">dispatcher</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_download_link"><a class="anchor" href="#_download_link"></a>Download link</h4>
<div class="paragraph">
<p>The download link is used to provide documents on the website.
They can be downloaded by website visitors and provide them with additional information.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
To provide a document on the website for downloading, the editor must select this from the media store and enter any link text.
While selecting a document is mandatory, the field for the link text can remain empty.
In this case, the term <code>Download</code> is used.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Using the information entered by the editor, the download link is created in the HTML channel.
For the generated state, the <code>$staticlink</code> parameter is added to it, which triggers the determination of the correct URL on the {sf} side.
In addition, the presentation channel does not contain any additional content.</p>
</div>
<div class="paragraph">
<p>More information about linking static content in {sf} can be found under <a href="https://documentation.b2c.commercecloud.salesforce.com/DOC2/index.jsp?topic=%2Fcom.demandware.dochelp%2FContent%2FLinkingtoAnotherSiteURL.html">menu:Merchandising Your Site[Content Assets&gt;Content Assets for Developers&gt;Using Content Link Functions&gt;Linking to Another Site URL</a>].</p>
</div>
</div>
<div class="sect3">
<h4 id="_e_mail_link"><a class="anchor" href="#_e_mail_link"></a>E-mail link</h4>
<div class="paragraph">
<p>The e-mail link gives the option of getting in touch via e-mail.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The form for the e-mail link consists of just two text fields.
In these, the editor enters any link text as well as an e-mail address, the validity of which is checked using a regular expression in the Rules tab.
Unlike the e-mail address, specifying link text is optional.
If the field for it remains empty, the term <code>E-Mail</code> is used instead.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The information entered by the editor is used to create and output a mailto link in the HTML channel.
In addition, the presentation channel does not contain any additional content.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="slot_configuration"><a class="anchor" href="#slot_configuration"></a>Slot configurations</h3>
<div class="paragraph">
<p>Within the supplied reference project <em>{projectname}</em>, assets are represented by sections.
Depending on the use case, they each have a slot configuration, which makes it possible to deliver editorial content in a way that is specific to the target group and tailored to the customer.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The option to configure a slot is provided to an editor in the reference project in the form of an input component.
It is included in the sections available to the editor and may include an unlimited number of slot configurations.
A slot configuration is also defined as a default value for the input component in all available sections.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The preconfigured slot configuration is activated and selected as the default configuration for the associated slot.
To change this, these properties must be modified manually.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Unlike the <a href="#hp">homepage</a>, the <a href="#login_page">login page</a>, and the <a href="#catlandingpage">category pages</a>, the <a href="#contentpage">content page</a>, the <a href="#catdetailpage">category detail page</a>, and the <a href="#proddetailpage">product detail pages</a> only creates a single asset and summarizes all sections added to the page in this.
For this reason, it is not possible to define a slot configuration for each section in these cases.
The corresponding input component is therefore hidden for all sections of a content page, a category detail page, or a product detail page.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The slot configuration can be (de)activated by the editor and selected as the default configuration for the associated slot.
In addition, it makes it possible to define the schedule parameters known from {sf}.
By adding several sections of the same type (e.g. several sliders) but that have different slot configurations, it is possible to implement different types of content.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>One of the schedule parameters to be defined is the <code>Schedule Type</code>, for which the <code>Default</code> value, among others, can be selected.
In this case, a <code>Rank</code> must also be entered, as otherwise errors will occur on the {sf} side.
Without this information, it is not possible to release the associated page.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
An individual slot configuration is represented by the <em>SFCC Slot Configuration</em> link template, which is used within the following sections of the <em>Slot Configuration</em> input component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Banner Image</p>
</li>
<li>
<p>Slider</p>
</li>
<li>
<p>Grid container</p>
</li>
<li>
<p>Shop the look</p>
</li>
<li>
<p>Text</p>
</li>
<li>
<p>Video</p>
</li>
<li>
<p>Product Tiles</p>
</li>
<li>
<p>Social Media Share</p>
</li>
<li>
<p>Social Media Embedding</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Within the HTML channel of the link template, the XML expected by {ccloud} is created in line with the configuration defined by the editor and written in the collector provided.
The XML is transferred to {ccloud} using a deployment.</p>
</div>
<div class="sect3">
<h4 id="variants"><a class="anchor" href="#variants"></a>Variants</h4>
<div class="paragraph">
<p>Slot configurations enable the realisation of different content variants and thus the delivery of target group-specific and customer-specific editorial content.
In order to generate these content variants:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>either multiple slot configurations for a section</p>
</li>
<li>
<p>or several sections of the same type (e.g. several sliders) with different slot configurations in a content area</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>must be created.</p>
</div>
<div class="paragraph">
<p>Since in the second case all variants would be displayed in the <a href="#uc_preview">preview</a> by default,
the reference project has a variant selection for the <a href="#hp">homepage</a>, the <a href="#login_page">login page</a> and for <a href="#catlandingpage">category landing pages</a> (see figure <a href="#img_variants">Variant selection</a>).
As soon as a content area contains more than one section, the variant selection is visible and only the section selected in it is displayed in the preview.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a section has multiple slot configurations, the variant selection only considers the first one.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="img_variants" class="imageblock">
<div class="content">
<img src="../../_images/variants.png" alt="variants">
</div>
<div class="title">Figure 21. Variant selection</div>
</div>
<div class="paragraph">
<p>Each entry of the variant selection shows the title of the corresponding slot configuration and the parameters defined for it, whereby the default option is visualized in the form of a house icon and the rank as a double arrow.
If the title of a slot configuration is missing, the variant selection represents the section type instead.
In addition, deactivated slot configurations receive a gray background and a corresponding label.</p>
</div>
<div class="paragraph">
<p>In addition to the single entries, the variant selection has the {newvar} button, which is used to create new sections in the corresponding content area.
It has the same function as the Easy Edit button on existing sections.</p>
</div>
<div class="paragraph">
<p>The variant selection is integrated via so-called wrappers, which are integrated into the page or section templates in the form of the <em>MPP Body Wrapper</em> and <em>MPP Section Wrapper</em> format templates.
Calling the <em>MPP Section Wrapper</em> replaces the output of the variable <code>set_sectionContent</code> in sections, to which all editorial contents of a section are assigned in the reference project.
Equivalent to this, the <em>MPP Body Wrapper</em> in page templates replaces the output of the respective content area, which must be passed to the wrapper instead.</p>
</div>
<div class="listingblock">
<div class="title">MPP Body Wrapper call for the main area of the homepage</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">&lt;!-- CMS-HOME-MAIN-START --&gt;
   $CMS_RENDER(template:"mpp_body_wrapper",body:"home_main_m")$
   $CMS_RENDER(template:"empty_content_slot",label:"Home Main",body:"home_main_m")$
&lt;!-- CMS-HOME-MAIN-END --&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_release_deleting_and_deployment"><a class="anchor" href="#_release_deleting_and_deployment"></a>Release, deleting, and deployment</h3>
<div class="paragraph">
<p>Content is released, deleted, and deployed within the supplied reference project <em>{projectname}</em> via workflows.
For this reason, it contains a publish workflow, as well as the <em>{bwfs}</em>.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The <em>{bwfs}</em> provide an editor with the option to release modified content and to remove {fs} elements both from the Current State and the Release State.
Both workflows are based on the four-eyes principle and are always executed in the context of a page.
If a conflict arises while a workflow is running, the workflow can be continued once the conflict has been rectified.</p>
</div>
<div class="paragraph">
<p>The publish workflow is available to editors to synchronize changes made in the {fs} project on the {sf} side.
It initiates the <a href="#schedule">deployment schedule</a> and is therefore executed without any context.
For this reason, it is started in {wc} via the <code><strong>Actions</strong></code> menu and in {jc} via the <code><strong>Task list</strong></code>.
The deployment schedule transfers all released content to {ccloud} and triggers the deletion of assets and <a href="#slot_configuration">slot configurations</a>, which have been removed in {fs}, on the {sf} side.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/publish_wf.png" alt="publish wf">
</div>
<div class="title">Figure 22. Publish workflow in {wc}</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The release workflow and the delete workflow correspond to those of the <em>{bwfs}</em> module and have not been changed.
The release workflow is oriented towards the administrative direct release and provides its functionality for the editor.
The delete workflow makes it possible to remove elements from the Current State and the Release State.</p>
</div>
<div class="paragraph">
<p>To transfer the changes made in the {fs} project, the publish workflow has also been added to the reference project.
Using the <em>SFCC Release Deployment</em> script, this determines the <a href="#schedule">deployment schedule</a> and executes it.
Unlike the other two workflows, it does not refer explicitly to one single page.
For this reason, the option <code>Workflow executable without context</code> is activated in its <code><strong>Properties</strong></code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/wf_options.png" alt="wf options">
</div>
<div class="title">Figure 23. Publish workflow options</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To also remove the assets and <a href="#slot_configuration">slot configurations</a> deleted in the {fs} project on the {sf} side, the publish workflow must be executed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
