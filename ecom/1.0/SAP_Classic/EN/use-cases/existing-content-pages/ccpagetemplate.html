<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/ecom/1.0/SAP_Classic/EN/use-cases/existing-content-pages/ccpagetemplate.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://e-spirit.github.io/Antora/cloud/1.0/index.html">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS/CaaS_FSM_Documentation_EN.html">CaaS</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Connect/CaaS_Connect_FSM_Documentation_EN.html">CaaS Connect</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Platform/CaaS_Platform_Documentation_EN.html">CaaS Platform</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_FSM/index.html">Navigation Service (FSM)</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_Platform/documentation.html">Navigation Service (Platform)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/chapters/introduction.html">Spartacus</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/index.html">Salesforce</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/SAP_Classic/firstspiritconnect-sap-documentation_EN.html">SAP Classic</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <a class="navbar-item" href="https://e-spirit.github.io/Antora/dxm/1.0/index.html">DXM</a>
        <a class="navbar-item" href="https://community.crownpeak.com/t5/DQM/ct-p/dqm">DQM</a>
        <a class="navbar-item" href="https://community.crownpeak.com/t5/DG/ct-p/dg">DG</a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ecom" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../../index.html">E-Commerce</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../Spryker/index.html">Spryker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/spryker-installation/spryker-installation.html">Spryker - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/fs-installation/fs-installation.html">FirstSpirit - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/use-cases/use-cases.html">Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/legal-notice.html">Legal Notice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spartacus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../Spartacus/chapters/introduction.html">Main Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/sapcc-installation/sapcc-installation.html">Spartacus - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/fs-installation/fs-installation.html">FirstSpirit - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/use-cases/use-cases.html">Use Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spartacus/FS_Connect_SAP_hl_ServeradminManual_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../Salesforce/index.html">Salesforce</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SAP Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../firstspiritconnect-sap-documentation_EN.html">Main Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../firstspiritconnect-sap-admindoc_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">E-Commerce</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../dxm/1.0/index.html">DXM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../dxm/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../../index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/ecom/edit/main/modules/SAP_Classic/pages/EN/use-cases/existing-content-pages/ccpagetemplate.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect3">
<h4 id="ccpagetemplate"><a class="anchor" href="#ccpagetemplate"></a>{ccloud} Page Template</h4>
<div class="paragraph">
<p>In {fs}, the editorial content is created and edited in {wc}.
With the help of the <em>{ocm}</em>, the staged storefront of the {ccloud} is embedded in it.
The Staged Storefront in turn accesses the <em>Preview {c}</em> and determines the current {fs} contents from it.
This also applies to the online storefront and the <em>Online {c}</em>.</p>
</div>
<div class="paragraph">
<p>This link requires modifications to the page template of the {ccloud} content page; these modifications are explained in this chapter.
The modifications are contained in the <code>landingLayout2Page.jsp</code> page, which is part of the delivery, and can be reproduced in this page.</p>
</div>
<div class="paragraph">
<p>The following code extract shows the querying of a <em>{c}</em> item that is saved in the variable <code>caasItem</code>.
The first step of this process is to determine the <em>{c}</em> collection in which the data is stored:
The {fs} content pages from the reference project are always stored in the <em>contentpages</em> collection, while other content is stored in the standard collection <em>content</em>.</p>
</div>
<div class="listingblock">
<div class="title">Example - Querying of the {c} item</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;%@ taglib prefix="caas" uri="/WEB-INF/tld/addons/fscontentconnect/caas.tld" %&gt;

&lt;c:choose&gt;
   &lt;c:when test="${cmsPage.typeCode == 'ContentPage'}"&gt;
      &lt;c:set var="caasCollection" value="contentpages"/&gt;
   &lt;/c:when&gt;
   &lt;c:otherwise&gt;
      &lt;c:set var="caasCollection" value="content"/&gt;
   &lt;/c:otherwise&gt;
&lt;/c:choose&gt;

&lt;caas:request itemId="${cmsPage.uid}" collection="${caasCollection}" var="caasItem" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To edit editorial content, {wc} displays the familiar EasyEdit buttons, which appear together with a frame while hovering.
Via Omnichannel Manager, {wc} can display external content.
However, <em>{ocm}</em> requires information from {ccloud} to highlight this content.
This information is read from a data object, which is populated via the corresponding page template in {ccloud}.</p>
</div>
<div class="paragraph">
<p>The following code extract shows an example of how this type of data object may be populated; the page type, preview ID, and page ID are transferred to this object.
The preview ID matches the ID of the previously determined <em>{c}</em> item.
If it was not possible to query a <em>{c}</em> item, the preview ID in the data object remains empty.</p>
</div>
<div class="listingblock">
<div class="title">Example - Population of a data object</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">[... Determine the CaaS item (see above) ...]

&lt;c:set var="pagePreviewId" value="${not empty caasItem and not empty caasItem['previewId'] ? caasItem['previewId'] : ''}"/&gt;

&lt;caas:whenFirstSpiritPreview&gt;
   &lt;script type="text/javascript"&gt;
      const PAGE_PREVIEW_DATA = {
         pageType: '${cmsPage.typeCode}',
         pagePreviewId: '${pagePreviewId}',
         pageId: '${cmsPage.uid}',
         pageTemplate: '${cmsPage.masterTemplate.uid}'
      };
   &lt;/script&gt;
&lt;/caas:whenFirstSpiritPreview&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For product detail pages, the product code must be defined as the page ID instead of the UID:</p>
</div>
<div class="listingblock">
<div class="title">Example - Defining the product code</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">const PAGE_PREVIEW_DATA = {
   [...]
   pageId: '${productCode}',
   [...]
};</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition to determining the <em>{c}</em> item and populating the data object, the output must also be defined.
As part of this process, a check is needed whether the previously determined <em>{c}</em> item includes content for the relevant content area.
If this is not the case, fallback content can be defined.</p>
</div>
<div class="paragraph">
<p>The following code extract shows the definition of the output for the content area <code>stage_body</code>:</p>
</div>
<div class="listingblock">
<div class="title">Example - Definition of output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;%@ taglib prefix="caas" uri="/WEB-INF/tld/addons/fscontentconnect/caas.tld" %&gt;

[... Determine the CaaS item and set the PAGE_PREVIEW_DATA object (see above) ...]

&lt;c:choose&gt;
   &lt;c:when test="${not empty caasItem and not empty caasItem['slots']['stage_body']}"&gt;
      &lt;div data-slot-name="stage_body"&gt;
         ${caasItem['slots']['stage_body']}
      &lt;/div&gt;
   &lt;/c:when&gt;
   &lt;c:otherwise&gt;
      &lt;div data-slot-name="stage_body" data-fs-content-editing&gt;
         &lt;cms:pageSlot position="Section1" var="feature"&gt;
            &lt;cms:component component="${feature}"/&gt;
         &lt;/cms:pageSlot&gt;
      &lt;/div&gt;
   &lt;/c:otherwise&gt;
&lt;/c:choose&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Whether the outcome is positive or the fallback is applied, a Dom element must be defined to mark the {fs} content area.
This element allows external content to be visually highlighted and maintained in {wc}.
The name of the content area must be transferred to the Dom element via the <code>data-slot-name</code> attribute.
In the event of a fallback, the Dom element also requires the attribute <code>data-fs-content-editing</code>.
This attribute controls the display of a plus button in {wc}, which shows the label <code>override content</code> or <code>add content</code> when hovering.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">override content</dt>
<dd>
<p>If the fallback is applied and existing content from {ccloud} is displayed, the button is displayed with the <code>override content</code> label while hovering.
This means that there is not yet any content in {fs} for the content area.
For this reason, the existing content can only be overwritten and not edited.
The previously described code extract shows this option.</p>
<div class="imageblock">
<div class="content">
<img src="../../../_images/overridecontent.png" alt="overridecontent">
</div>
<div class="title">Figure 1. override content button</div>
</div>
</dd>
<dt class="hdlist1">add content</dt>
<dd>
<p>If the fallback is applied and the Dom element does not contain any content, the button is displayed with the <code>add content</code> label while hovering.
This situation can arise when there is no content on an empty page for the area in {ccloud}, or if no content has been defined for the Dom element.
Within the <code>landingLayout2Page.jsp</code> page, which is included in the delivery, this option is used for the output of the <code>main_body</code> content area:</p>
<div class="listingblock">
<div class="title">Example - Fallback for output of main_body content area</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;c:choose&gt;
   &lt;c:when test="${not empty caasItem and not empty caasItem['slots']['main_body']}"&gt;
      [... show Content ...]
   &lt;/c:when&gt;
   &lt;c:otherwise&gt;
      &lt;div data-slot-name="main_body" data-fs-content-editing&gt;&lt;/div&gt;
   &lt;/c:otherwise&gt;
&lt;/c:choose&gt;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/addcontent.png" alt="addcontent">
</div>
<div class="title">Figure 2. add content button</div>
</div>
</dd>
</dl>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
