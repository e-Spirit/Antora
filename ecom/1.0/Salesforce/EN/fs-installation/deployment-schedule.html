<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/EN/fs-installation/deployment-schedule.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://e-spirit.github.io/Antora/cloud/1.0/index.html">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS/CaaS_FSM_Documentation_EN.html">CaaS</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Connect/CaaS_Connect_FSM_Documentation_EN.html">CaaS Connect</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Platform/CaaS_Platform_Documentation_EN.html">CaaS Platform</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_FSM/index.html">Navigation Service (FSM)</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_Platform/documentation.html">Navigation Service (Platform)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/FS_Connect_SAP_hl_Documentation_EN.html">Spartacus</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/index.html">Salesforce</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/SAP_Classic/firstspiritconnect-sap-documentation_EN.html">SAP Classic</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/dxm/1.0/index.html">DXM</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ecom" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">E-Commerce</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../Spryker/index.html">Spryker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/spryker-installation/spryker-installation.html">Spryker - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/fs-installation/fs-installation.html">FirstSpirit - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/use-cases/use-cases.html">Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/legal-notice.html">Legal Notice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spartacus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../Spartacus/chapters/introduction.html">Main Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/sapcc-installation/sapcc-installation.html">Spartacus - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/fs-installation/fs-installation.html">FirstSpirit - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/use-cases/use-cases.html">Use Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spartacus/FS_Connect_SAP_hl_ServeradminManual_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Salesforce</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SAP Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../SAP_Classic/firstspiritconnect-sap-documentation_EN.html">Main Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../SAP_Classic/firstspiritconnect-sap-admindoc_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">E-Commerce</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../dxm/1.0/index.html">DXM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../dxm/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/ecom/edit/main/modules/Salesforce/pages/EN/fs-installation/deployment-schedule.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect2">
<h3 id="schedule"><a class="anchor" href="#schedule"></a>Deployment schedule</h3>
<div class="paragraph">
<p>To transfer the content created in {fs} to the {ccloud} storage location, the reference project supplied has a schedule, which contains the actions specified below (see figure <a href="#actions">Generation schedule actions</a>).
A description of the individual actions is provided in the subsequent sub-chapters.</p>
</div>
<div class="paragraph">
<p>More information on creating a schedule is available in the <em>{fsadmindoc_en}</em>.</p>
</div>
<div id="actions" class="imageblock">
<div class="content">
<img src="../../_images/actions.png" alt="actions">
</div>
<div class="title">Figure 1. Generation schedule actions</div>
</div>
<div class="sect3">
<h4 id="sfccinitializer"><a class="anchor" href="#sfccinitializer"></a>Initialize SFCC deployment</h4>
<div class="paragraph">
<p>The first step is to initialize the deployment.
This involves setting up <a href="#sfcc_content_cleanup">content cleanup</a>.
While this is under way, a time stamp prior to the generation is created.
This time stamp is used by the <a href="#sfcccleanup">cleanup action</a> in the last step of the schedule to delete outdated assets and <a href="#slot_configuration">slot configurations</a>.
It is for this reason that the schedule contains the action <code>{sf} {ccloud} Initializer</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/sfcc_initializer.png" alt="sfcc initializer">
</div>
<div class="title">Figure 2. Schedule action</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To use <a href="#sfcc_content_cleanup">content cleanup</a>, the initialization must be the first action of the schedule.
Otherwise this can lead to inconsistencies in the data inventory.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="fdeployment"><a class="anchor" href="#fdeployment"></a>Content preparation - Full generation</h4>
<div class="paragraph">
<p>To deploy the content that is relevant to {ccloud}, it must be determined from the project first.
This requires a full generation to be carried out, generating all the referenced media in the correct resolution.
The full generation also generates the XML collectors initialized in the <a href="#project_settings">project settings</a> and fills them on the basis of the xmlCollector calls in the templates.</p>
</div>
<div class="paragraph">
<p>The schedule therefore has the generation action <code>Content Preparation</code> in whose <code><strong>Properties</strong></code> the following options are activated (see figure <a href="#content_preparation">Content preparation action</a>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Perform FullGeneration</code></p>
</li>
<li>
<p><code>Clear generation directory beforehand</code></p>
</li>
<li>
<p><code>Generate Media in the generation directory</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The defined <code>Prefix for absolute paths</code> <code>/firstspirit</code> is required for the <a href="#wddeployment">WebDAV deployment</a> action.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is only possible to use the <a href="#wdmodule">WebDAV module</a> in conjunction with the default URL creator.
To generate the path, the entry <code>Default URLs</code> is therefore selected, which is absolutely essential at this point.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The template sets for all the languages present in the project are also selected on the <code><strong>Extended</strong></code> tab page.
In addition, the variable <code>dwre_xmlGeneration</code> is added, which contains the value <code>false</code>.
This is set to the value <code>true</code> in the subsequent <a href="#pdeployment"><code>XML Import File</code> actions</a> and ensures that the XML files for the <a href="#slot_configuration">slot configurations</a> and assets are only created once the generation is complete.
The XML template in the project controls the process of generating the XML file.</p>
</div>
<div id="content_preparation" class="imageblock">
<div class="content">
<img src="../../_images/content_preparation.png" alt="content preparation">
</div>
<div class="title">Figure 3. Content preparation action</div>
</div>
</div>
<div class="sect3">
<h4 id="pdeployment"><a class="anchor" href="#pdeployment"></a>XML import file - Partial generations</h4>
<div class="paragraph">
<p>{ccloud} expects all data that is transferred to it to be in the form of XML files.
For this reason, the information determined during the <a href="#fdeployment">full generation</a> must be read out of the XML collectors that are generated.
In this case, the information must instead be written to an XML file that has to be created each time.</p>
</div>
<div class="paragraph">
<p>For each XML collector initialized in the <a href="#project_settings">project settings</a>, the schedule provides another generation action.
In contrast to the <a href="#fdeployment"><code>Content Preparation</code></a> action, these are, however, partial generations.
In their <code><strong>Properties</strong></code>, the option <code>Execute partial generation for following start nodes</code> is therefore activated.
As a starting point, one of the page references based on the XML template is used (see figure <a href="#content_libary">Partial generation</a>).</p>
</div>
<div class="paragraph">
<p>The variable <code>dwre_xmlGeneration</code>, which contains the value <code>true</code>, is also added to the <code><strong>Extended</strong></code> tab page for each of these actions.
Together with the start node selected in each case, this ensures that the selected page reference is not generated until this point in time.
This means that all the information required for creating the XML file will be available when this happens and it will not be possible for any gaps to appear.
The XML template in the project controls the process of generating the XML file.</p>
</div>
<div id="content_libary" class="imageblock">
<div class="content">
<img src="../../_images/content_libary.png" alt="content libary">
</div>
<div class="title">Figure 4. Partial generation</div>
</div>
</div>
<div class="sect3">
<h4 id="wddeployment"><a class="anchor" href="#wddeployment"></a>WebDAV deployment</h4>
<div class="paragraph">
<p>Next, the XML files generated by means of the <a href="#pdeployment">partial generations</a> must be transferred to {ccloud}.
They are published via a script action, for which the following parameters are defined in their <code><strong>Properties</strong></code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/wdparameter.png" alt="wdparameter">
</div>
<div class="title">Figure 5. Properties</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">url</dt>
<dd>
<p>The <code>URL</code> specifies the host and the path on the WebDAV server.
It always has the following structure:</p>
<div class="paragraph">
<p><code>https://&lt;SUBDOMAIN INSTANCE&gt;.demandware.net/on/demandware.servlet/webdav/Sites/Impex/&#8230;&#8203;/&lt;PREFIX&gt;/&lt;SITE ID&gt;</code></p>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The path points to the location where the XML file in question is expected to be during the import.
It must refer to an existing directory.<br>
Additionally, the prefix must be the same as the <code>Prefix for absolute paths</code> used in the <a href="#fdeployment">full generation</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">user</dt>
<dd>
<p>A technical user who is authorized to use the WebDAV interface is required in order to transfer the data.
This user must have write permissions and must be specified by name here.</p>
<div class="paragraph">
<p>Further information about these rights can be found under <a href="https://documentation.b2c.commercecloud.salesforce.com/DOC2/topic/com.demandware.dochelp/Permissions/Creatingroles.html">menu:Administering Your Organization[Permissions, Users, and Roles&gt;Roles and Permissions&gt;Creating Roles and Assigning Permissions</a>] in the {sf} documentation.</p>
</div>
</dd>
<dt class="hdlist1">password</dt>
<dd>
<p>A password is also required for the user specified in the previous step.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The technical user is subject to the password conditions defined by {ccloud}, which require the password to be changed at least every quarter.
The parameter value must be changed each time this is carried out.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">mediaurl</dt>
<dd>
<p>The media folder generated during the generation process, and its content, must be transferred to a separate directory so that {ccloud} can perform the import.
This directory is defined using the parameter <code>mediaurl</code>.
The <code>mediaurl</code> always has the following structure:</p>
<div class="paragraph">
<p><code>https://&lt;SUBDOMAIN INSTANCE&gt;.demandware.net/on/demandware.servlet/webdav/Sites/Libraries/&lt;SITE ID|LIBRARY ID&gt;/default/&lt;PREFIX&gt;</code></p>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>mediaurl</code> must refer to an existing directory.<br>
Furthermore, as with the <code>url</code>, the prefix must be the same as the <code>Prefix for absolute paths</code> used in the <a href="#fdeployment">full generation</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a private library is being used, it is necessary to specify the site ID instead of the library ID in the path.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">srcprefixdir</dt>
<dd>
<p>If only one particular directory is transferred to {ccloud}, it can be specified in relation to the root node of the generation directory using the optional parameter <code>srcprefixdir</code>.
If the parameter is not defined, or no value is saved for it, the entire generation directory will be transferred.</p>
</dd>
<dt class="hdlist1">purge</dt>
<dd>
<p>This parameter is optional and may only have the value <code>true</code> or <code>false</code>.
If <code>true</code> is set, all the files and directories under the specified <code>URL</code> will be deleted before the transfer starts.
If the parameter is set to <code>false</code> or no value at all, all the existing files and directories under the specified <code>URL</code> will be retained.
New data will either be added or, in the case of existing data, overwritten.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The WebDAV deployment must not be executed in the event of an error.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_trigger_sfcc_import_job_schedule"><a class="anchor" href="#_trigger_sfcc_import_job_schedule"></a>Trigger SFCC import job schedule</h4>
<div class="paragraph">
<p>Following the publication of the created XML files via <a href="#wddeployment">WebDAV deployment</a>, the <a href="#sfcc_job_schedules">created job schedule</a> is executed.
In {sf}, the job schedule triggers the import of the generated content and <a href="#slot_configuration">slot configurations</a> into {ccloud}.
The <em>{modulname}</em> module provides the <code>{sf} {ccloud} Importer</code> schedule action for this purpose:</p>
</div>
<div id="sfcc_task" class="imageblock">
<div class="content">
<img src="../../_images/sfcc_task.png" alt="sfcc task">
</div>
<div class="title">Figure 6. Schedule action</div>
</div>
<div class="paragraph">
<p>The action loads a configuration dialog, in which two parameters must be defined in addition to a freely assignable name.</p>
</div>
<div id="sfcc_task_config" class="imageblock">
<div class="content">
<img src="../../_images/import_schedule_task.png" alt="import schedule task">
</div>
<div class="title">Figure 7. Schedule action parameters</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Import Job ID</dt>
<dd>
<p>This field contains the ID of the <a href="#sfcc_job_schedules">created job schedule</a>.</p>
</dd>
<dt class="hdlist1">Timeout</dt>
<dd>
<p>The value in this field displays the time span in seconds, in which the status of the job schedule will be queried every second.
If the job schedule has not completed in the specified time span, this schedule action is indicated as having an error.
The default value is 10 seconds.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As the <code><strong>{sf} {ccloud} Importer</strong></code> requires a successful <a href="#wddeployment">WebDAV deployment</a>, this too must not be executed in the event of an error.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="sfcccleanup"><a class="anchor" href="#sfcccleanup"></a>Salesforce Commerce Cloud Cleanup</h4>
<div class="paragraph">
<p>Once the <a href="#sfcc_job_schedules">created job schedule</a> has been executed, content cleanup is executed.
All outdated assets and <a href="#slot_configuration">slot configurations</a> are queried by the <a href="#ocapisettings">OC API</a> and then deleted.
The <em>{modulname}</em> module provides the <code>{sf} {ccloud} Cleanup</code> schedule action for this purpose:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/sfcc_cleanup.png" alt="sfcc cleanup">
</div>
<div class="title">Figure 8. Schedule action</div>
</div>
<div class="paragraph">
<p>In addition to a freely assignable name for this schedule action, the associated configuration dialog contains the following parameters:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/cleanup_schedule_task.png" alt="cleanup schedule task">
</div>
<div class="title">Figure 9. Schedule action parameters</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Use different site</dt>
<dd>
<p>Content cleanup uses a {ccloud} site to find the content assets and slot configurations to be deleted.
The checkbox <code>Use different site</code> allows the use of content cleanup for a site other than the <a href="#project-app-config-base-url">configured</a> site.</p>
</dd>
</dl>
</div>
<div id="cleanupSiteId" class="dlist">
<dl>
<dt class="hdlist1">Site Id</dt>
<dd>
<p>If the <code>Use different site</code> checkbox is active, the {ccloud} site to be used for content cleanup must be specified in this field.</p>
</dd>
<dt class="hdlist1">menu:Content asset cleanup[Enabled]</dt>
<dd>
<p>This checkbox allows to enable/disable the content cleanup of assets.</p>
</dd>
<dt class="hdlist1">Library Id</dt>
<dd>
<p>The ID of the Content Library from that Content Assets are deleted must be entered in this field.
In the case of a private library, the library ID corresponds to the site ID.</p>
</dd>
</dl>
</div>
<div id="additionalRefinements" class="dlist">
<dl>
<dt class="hdlist1">Additional refinement(s)</dt>
<dd>
<p>In this field, attribute names and values can be specified for further filtering of the content assets to be deleted.
The specification must have the following form:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">ATTRIBUTE_NAME=ATTRIBUTE_VALUE [; ATTRIBUTE_NAME=ATTRIBUTE_VALUE] ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The attribute values can contain the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Replacement by</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#36;&#123;projectId&#125;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the generated {fs} project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#36;&#123;projectName&#125;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the generated {fs} project</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The specified attributes must exist as custom attributes in the {ccloud} and have been filled with values via the <a href="#generation">{fs} generation</a> before the filtering described here can be used.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">menu:Slot configuration cleanup[Enabled]</dt>
<dd>
<p>This checkbox allows the de-/activation of the content cleanup from <a href="#slot_configuration">Slot configurations</a>.</p>
</dd>
<dt class="hdlist1">Filter query</dt>
<dd>
<p>This field is used to filter the <a href="#slot_configuration">slot configurations</a> to be deleted.
A filter is specified as a <a href="https://documentation.b2c.commercecloud.salesforce.com/DOC2/topic/com.demandware.dochelp/OCAPI/current/data/Documents/Query.html">query document</a> in JSON format.
Within the query, the parameters of the field <a href="#additionalRefinements">Additional refinement(s)</a> can be used, as the following example of a
<a href="https://documentation.b2c.commercecloud.salesforce.com/DOC2/topic/com.demandware.dochelp/OCAPI/current/data/Documents/TextQuery.html">TextQuery</a> illustrates:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"text_query": {
    "fields": ["c_fsProjectId"],
    "search_phrase": "${{projectIdRaw}}"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>Filter query</code> field remains empty, the <em>{modulname}</em> module uses a <a href="https://documentation.b2c.commercecloud.salesforce.com/DOC2/topic/com.demandware.dochelp/OCAPI/current/data/Documents/MatchAllQuery.html">MatchAllQuery</a>,
whereby the <a href="#slot_configuration">slot configurations</a> to be deleted are not further filtered.</p>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To avoid inconsistencies in the database or data loss, the action <code><strong>Salesforce {ccloud} Cleanup</strong></code> must be the last action of the schedule.
For the same reason, <a href="#sfcc_content_cleanup">content cleanup</a> requires that this action only performs full generations.
Furthermore, replication within the {ccloud} is not recommended during the execution of the cleanup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since the <code><strong>Salesforce {ccloud} Cleanup</strong></code> requires a successful execution of the <a href="#sfcc_job_schedules">job schedules</a> and thus the import of the content, it must not be executed in the event of an error.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
