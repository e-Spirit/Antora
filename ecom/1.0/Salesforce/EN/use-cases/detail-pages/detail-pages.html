<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/EN/use-cases/detail-pages/detail-pages.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://e-spirit.github.io/Antora/cloud/1.0/index.html">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS/CaaS_FSM_Documentation_EN.html">CaaS</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Connect/CaaS_Connect_FSM_Documentation_EN.html">CaaS Connect</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Platform/CaaS_Platform_Documentation_EN.html">CaaS Platform</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_FSM/index.html">Navigation Service (FSM)</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_Platform/documentation.html">Navigation Service (Platform)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/FS_Connect_SAP_hl_Documentation_EN.html">Spartacus</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/index.html">Salesforce</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/SAP_Classic/firstspiritconnect-sap-documentation_EN.html">SAP Classic</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/dxm/1.0/index.html">DXM</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ecom" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../../index.html">E-Commerce</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../Spryker/index.html">Spryker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/spryker-installation/spryker-installation.html">Spryker - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/fs-installation/fs-installation.html">FirstSpirit - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/use-cases/use-cases.html">Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/legal-notice.html">Legal Notice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spartacus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../Spartacus/chapters/introduction.html">Main Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/sapcc-installation/sapcc-installation.html">Spartacus - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/fs-installation/fs-installation.html">FirstSpirit - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/use-cases/use-cases.html">Use Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spartacus/FS_Connect_SAP_hl_ServeradminManual_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../index.html">Salesforce</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SAP Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../SAP_Classic/firstspiritconnect-sap-documentation_EN.html">Main Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../SAP_Classic/firstspiritconnect-sap-admindoc_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">E-Commerce</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../dxm/1.0/index.html">DXM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../dxm/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../../index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/ecom/edit/main/modules/Salesforce/pages/EN/use-cases/detail-pages/detail-pages.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect2">
<h3 id="detail_pages"><a class="anchor" href="#detail_pages"></a>Category and product pages</h3>
<div class="paragraph">
<p>The <em>{modulname}</em> module provides an individual report for products and categories in both {jc} and {wc}.
These reports are used to display the category and product information originating from {ccloud}, which can be used to create and maintain editorial content (see figure <a href="#reports">Reports</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To display the category report, the <a href="#show_report"><code>Show Category Report</code></a> checkbox must be activated in the project component.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="reports" class="imageblock">
<div class="content">
<img src="../../../_images/reports.png" alt="reports">
</div>
<div class="title">Figure 1. Reports</div>
</div>
<div class="paragraph">
<p>The corresponding report can be used to create both category pages as well as product pages.
To use this feature, you must define the templates on which these pages will be based, and where they are to be integrated into the structure, in the <a href="#pcomp">project component</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>SFCC Context ID</code> field must be included in the page template that is selected in each case so that the ID of the referenced object can be saved.
The field can be hidden.
If this field ought to have a differing identifier for project-specific reasons, then this must be specified within the <a href="#project_settings">project settings</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;CMS_INPUT_TEXT name="pt_storefrontUrlContextId" hidden="yes" useLanguages="no"&gt;
  &lt;LANGINFOS&gt;
    &lt;LANGINFO lang="*" label="SFCC Context ID"/&gt;
  &lt;/LANGINFOS&gt;
&lt;/CMS_INPUT_TEXT&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>With regard to its category or product page, an object in the report can adopt one of three states:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A category or product page does not exist and therefore can be created.</p>
</li>
<li>
<p>A category or product page exists, which can be called up.</p>
</li>
<li>
<p>A category or product page exists but either its page reference or the page cannot be found.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The three cases are displayed in different ways and described below.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since the objects in the report are not permanently updated, the display might not reflect the current status.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="create_detailpage" class="paragraph">
<p><span class="underline"><strong>Creating a category or product page</strong></span><br>
Objects for that a category or product page does not yet exist are identified in the report by a gray icon (see figure <a href="#report_create_normal">Creating a category or product page</a>).
If a page template has been defined in the <a href="#pcomp">project component</a>, the <span class="image"><img src="../../../_images/new_detailpage.png" alt="Create Page"></span> button is displayed when such an object is hovered over.</p>
</div>
<div id="report_create_normal" class="imageblock">
<div class="content">
<img src="../../../_images/report_create_normal.png" alt="report create normal">
</div>
<div class="title">Figure 2. Creating a category or product page</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A button is also displayed in the <a href="#uc_preview">{fs} preview</a> on <a href="#catlandingpage">category landing pages</a>, <a href="#catdetailpage">category detail pages</a>, and <a href="#proddetailpage">product detail pages</a> that can be accessed via the navigation.
This button functions in the same way as the button in the report.
It is only visible if a corresponding category landing page, category detail page, or product detail page does not exist in the {fs} project.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/landingpagebutton.png" alt="landingpagebutton">
</div>
<div class="title">Figure 3. Creating a category landing page, category detail page, or product detail page</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click on the button in the report or the button on a main category page to open a dialog that is split into two sections and in which a page can be created for the corresponding object.</p>
</div>
<div class="paragraph">
<p>The top section of the dialog is the <code>structure selection area</code>; it is completed automatically and as such is always the same.
Within the structure, the editor has the option to select the menu level at which to generate the new page.
The corresponding input component may already have been preassigned.
In this case, a <a href="#default_folder">structure folder</a> will already have been defined in the configuration dialog of the project component.
However, the editor is free to change this selection.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In some cases, the <code>structure selection area</code> may be hidden in the dialog.
In this case, a <a href="#default_folder">structure folder</a> will also have been predefined in the project component.
At the same time, however, a setting will have been made to prevent the editor from changing this preassignment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Unlike the <code>structure selection area</code>, the <code>form area</code> underneath is always project-specific.
It shows the form for the page template specified in the project component.
The rules defined in the template also apply here.</p>
</div>
<div id="detail_pages_dialog_not_shown_note" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Within the reference project, the form fields of the category or product pages are automatically populated or have corresponding default values.
In addition, a structure folder is predefined in the <a href="#pcomp">project component</a>, which cannot be changed by the editor.
Both for the structure selection area and the form area, there is therefore no need for the editor to input anything.
The dialog is not shown for this reason.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An example dialog is shown in the figure below:</p>
</div>
<div id="report_dialog_newpage" class="imageblock">
<div class="content">
<img src="../../../_images/report_dialog_newpage.png" alt="report dialog newpage">
</div>
<div class="title">Figure 4. Dialog for creating a category or product page</div>
</div>
<div class="paragraph">
<p>Click on btn:[Create] to generate the page reference for the category or product page at the selected menu level.
The corresponding page is created in a specific folder in the Page Store.
Within this folder, a distinction between category and product pages is made once again on the basis of subfolders.
The names of the page references and pages generated are based on the <code>product ID (product name)</code> or <code>category ID (category name) schema</code>.</p>
</div>
<div class="paragraph">
<p>If a script has also been specified in the <a href="#pcomp">project component</a>, it is usually executed before and after the category or product page is created.
The <em>create_sfcc_item_wizard</em> script included in the reference project supplied does, however, have a corresponding query, which is used to initiate the script, but only once the page has been created.
It marks each created category or product page as translated for all languages and saves its storefront ID in the form.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please note that only the code from the HTML channel of the script is executed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following parameters are transferred to this script:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 19.2307%;">
<col style="width: 19.2307%;">
<col style="width: 61.5386%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data type</th>
<th class="tableblock halign-left valign-top">Object name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BaseContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">context</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The context in which the script is executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beforeInstantiation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> if the script is executed before the page is created; otherwise <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">keyProvider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The object for that a category or product page is being created. This is either a <code>product</code> or a <code>category</code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Javadoc documentation supplied describes the <code>KeyProvider</code>, <code>Product</code>, and <code>Category</code> interfaces.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the process to generate the category or product page and the execution of the script have been completed, the new page is called up automatically.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Calling up an existing category or product page</strong></span><br>
Objects for that a category or product page already exists are identified in the report by a green icon (see figure <a href="#report_jump_to">Product with product page</a>).
When you hover over them, the <span class="image"><img src="../../../_images/report_jump_icon.png" alt="report jump icon"></span> button is displayed.
Click this button to call up the corresponding category or product page.</p>
</div>
<div id="report_jump_to" class="imageblock">
<div class="content">
<img src="../../../_images/report_jump_to.png" alt="report jump to">
</div>
<div class="title">Figure 5. Product with product page</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Broken reference to a category or product page</strong></span><br>
If there are objects with a category or product page but the page reference or underlying page cannot be found, the objects are identified in the report by a red icon (see figure <a href="#report_ref_broken">Broken object</a>).
When you hover over them, the <span class="image"><img src="../../../_images/report_broken_icon.png" alt="Broken Reference"></span> button is displayed.
Click on this button to open a dialog containing more information.</p>
</div>
<div id="report_ref_broken" class="imageblock">
<div class="content">
<img src="../../../_images/report_ref_broken.png" alt="report ref broken">
</div>
<div class="title">Figure 6. Broken object</div>
</div>
<div id="hidden_categories" class="paragraph">
<p><span class="underline"><strong>Hidden categories</strong></span><br>
When the category report is called up, both visible as well as hidden categories are displayed by default.
By removing the <code>Include hidden categories</code> check mark, the results list can be limited to include only visible categories:</p>
</div>
<div id="exclude_hidden_categories" class="imageblock">
<div class="content">
<img src="../../../_images/category_report_hidden_excluded.png" alt="category report hidden excluded">
</div>
<div class="title">Figure 7. Hiding hidden categories</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The identification of existing, broken, and unavailable references to category pages described in this chapter applies also to hidden categories.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="catlandingpage"><a class="anchor" href="#catlandingpage"></a>Category landing pages</h4>
<div class="paragraph">
<p>Category landing pages are used to display the products originating from {ccloud}.
They provide an overview of all the products belonging to a selected main category.
The products are arranged and the product information is displayed automatically; this cannot be influenced by the {fs} editor.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The category landing page offers the editor different options for entering content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The header of the page displays a banner into which a <a href="#banner_image">static image</a> can be integrated.</p>
</li>
<li>
<p>The main area has two content areas, in which:</p>
<div class="ulist">
<ul>
<li>
<p>a <a href="#grid_container">grid containers</a>,</p>
</li>
<li>
<p>a <a href="#video">video</a> or</p>
</li>
<li>
<p>text with a heading</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>may be used.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
As both the form and the content of the HTML channel for the category landing page and the <a href="#hp">homepage</a> broadly match, both developer views are also nearly identical.
This is therefore where only the discrepancy between both templates is described:</p>
</div>
<div class="paragraph">
<p>The page type to be used for the {fs} preview is also defined for the category landing pages in the hidden <code>Preview Page Type</code> form field.
In contrast to the homepage, it can assume different values in theory.
For the reference project supplied, however, only the <code>Search</code> parameter is required and is selected as the default value.</p>
</div>
<div class="paragraph">
<p>Furthermore, the form has the <code>SFCC Context ID</code> field.
The <code>SFCC Context ID</code> corresponds to the category ID from the storefront.
If the field is empty, a category landing page maintained in the {fs} project does not exist and the <a href="#uc_preview">preview</a> shows the corresponding Storefront page.
A button to create a category landing page is added to the Storefront page via the <em>Create Page</em> template.
This button functions in the same way as the button in the <a href="#create_detailpage">report</a>.
When generating a category landing page, the category ID is automatically saved to the associated form field.</p>
</div>
<div class="paragraph">
<p>The <em>Preview Generation</em> format template needs the category ID to generate the preview for all pages.
For each page, it expects to receive the category ID in the form of the <code>SFCC Context ID</code> variable.
This ID must therefore be included in every page template, with the exception of the <a href="#hp">homepage</a>.
If the associated form field is empty or the corresponding page in {fs} is not marked as translated, generation is canceled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!#global.preview &amp;&amp; !#global.page.isTranslated || pt_storefrontUrlContextId.isEmpty)$
   $CMS_SET(#global.stopGenerate, true)$
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>As described <a href="#detail_pages_dialog_not_shown_note">above</a>, the form for the category landing pages does not contain any elements to be completed by the editor.
No dialog is therefore shown when a page of this nature is created.
If a form only contains elements for that the attribute <code>hidden</code> has the value <code>yes</code>, the <em>{modulname}</em> module decides for itself that the form does not need to be shown.
In the reference project, the form for the category landing pages does, however, contain an <code>FS_BUTTON</code>, which is only hidden dynamically in {wc} by means of a rule.
In both clients, this button should not result in the dialog being shown when a category landing page is created.
For this reason, the following elements were added to the form:</p>
</div>
<div class="listingblock">
<div class="title">Form</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;CMS_INPUT_TOGGLE name="pt_hideNewPageDialogCC" hFill="yes" hidden="yes" singleLine="no"&gt;
  &lt;LANGINFOS&gt;
    &lt;LANGINFO
      lang="*"
      label="Hide New Page Dialog in ContentCreator"
      description="Hide the dialog in the ContentCreator when creating a new landing page."
    /&gt;
  &lt;/LANGINFOS&gt;
&lt;/CMS_INPUT_TOGGLE&gt;

&lt;CMS_INPUT_TOGGLE name="pt_hideNewPageDialogSA" hFill="yes" hidden="yes" singleLine="no"&gt;
  &lt;LANGINFOS&gt;
    &lt;LANGINFO
      lang="*"
      label="Hide New Page Dialog in SiteArchitect"
      description="Hide the dialog in the SiteArchitect when creating a new landing page."
    /&gt;
  &lt;/LANGINFOS&gt;
&lt;/CMS_INPUT_TOGGLE&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>These explicitly instruct the <em>{modulname}</em> module not to show the dialog in {wc} or in {jc}.
Their fallback values are therefore <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="catdetailpage"><a class="anchor" href="#catdetailpage"></a>Category detail pages</h4>
<div class="paragraph">
<p>As with the <a href="#catlandingpage">category landing pages</a>, the category detail pages are used to display the products originating from {ccloud}.
However, unlike the category landing pages, they provide an overview of all products belonging to a subcategory.
The products are arranged and the product information displayed automatically and cannot be influenced by the {fs} editor.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The category detail page only allows an editor to integrate a <a href="#banner_image">static image</a> into the header of the page.
Furthermore, the editor is unable to maintain content.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Unlike the other pages, which follow the slot-based approach, both <a href="#proddetailpage">product</a> and category detail pages use the <code>Content Integration API (CI API)</code>.
This API enables Velocity fragments that are maintained in the {fs} template to be evaluated on the {sf} side.</p>
</div>
<div class="paragraph">
<p>If the <code>CI API</code> is being used, the hidden <code>Use velocity rendering</code> toggle is activated in the form of the page template within the reference project,
and the <code>Custom</code> parameter is defined in the <code>Preview Page Type</code> form field.
The <code>Content-Render</code> value is also entered in the <code>Velocity rendering controller appendix</code> form field.
This value defines the call of the <code>Content</code> controller that is supplied in the <code>int_espirit_sfra</code> cartridge and carries out Velocity rendering on the {sf} side.
The value must be adapted accordingly if an external controller is being used.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The chapter about the <a href="#login_page">login page</a> describes in more detail how an individual page type can be defined.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another difference compared to the other pages is that the category detail pages only generate a single asset, just like the <a href="#contentpage">content pages</a>.
This asset is created in the HTML channel of the page template, which differentiates between the display of the page in the <a href="#uc_preview">{fs} preview</a> and in the live state.
The developer view must therefore take both the preview as well as the generation and the live state into account.</p>
</div>
<div class="paragraph">
<p><strong>Preview</strong></p>
</div>
<div class="paragraph">
<p>The Velocity fragments can be used to insert {sf} widgets provided by the <code>Common</code> controller in a page.
The <code>$include.widget()</code> function, which is defined in the <code>Content</code> controller, deals with the integration process.
The required widget must be transferred to this function as a parameter.</p>
</div>
<div class="paragraph">
<p>The code example below shows the integration of the {sf} Page Header in the category detail page:</p>
</div>
<div class="listingblock">
<div class="title">Page Header integration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">&lt;!-- CMS-VELOCITY-PAGE_HEADER-START --&gt;
   $include.widget('Common-PageHeader')
&lt;!-- CMS-VELOCITY-PAGE_HEADER-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the general widgets, the <code>CategorySearchResult</code> controller integrates specific data into the category detail page:
In the case of the preview, for example, it uses the category ID of the selected subcategory to determine the corresponding products, and then displays these in the <a href="#uc_preview">preview</a>.
This data is already provided in the live state and is available to use via the <code>$categorySearchResult</code> variable.</p>
</div>
<div class="listingblock">
<div class="title">Integrating subcategory products</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">&lt;!-- CMS-VELOCITY-SEARCH_RESULT-START --&gt;
   $CMS_IF(#global.preview)$
      $include.widget('CategorySearchResult-Show', 'cgid', '$CMS_VALUE(pt_storefrontUrlContextId)$')
   $CMS_ELSE$
      $categorySearchResult
   $CMS_END_IF$
   [...]
&lt;!-- CMS-VELOCITY-SEARCH_RESULT-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Generation</strong></p>
</div>
<div class="paragraph">
<p>For generation purposes, it is important to ensure firstly that the corresponding page is marked as translated in {fs} and that the <code>SFCC Context ID</code> field is populated.
The <code>SFCC Context ID</code> corresponds to the category ID from the storefront.
When a category detail page is being generated via the report, the ID is automatically saved to the associated form field.
The generation is only carried out and the asset for the category detail page is only created once the form field is populated and the corresponding page is marked as translated in {fs}.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!#global.preview &amp;&amp; !#global.page.isTranslated || pt_storefrontUrlContextId.isEmpty)$
   $CMS_SET(#global.stopGenerate, true)$
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The editorial content is then saved in the <code>set_pageContent</code> variable, and the <code>set_parent_id</code> variable is assigned the value of the hidden <code>SFCC Parent Folder</code> field.
This value specifies where the created asset is filed in the {sf} folder structure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_SET(set_parent_id,pt_dwre_parentFolder)$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both variables are evaluated while the XML collector is populated, a process that is carried out subsequently.
In the process, a new content node is created, to which the editorial content of the page, among other things, is added.</p>
</div>
<div class="paragraph">
<p><strong>Live state</strong></p>
</div>
<div class="paragraph">
<p>A category detail page already exists for subcategories on the {sf} side as standard.
This page is used for the live state.
The display is controlled by the <a href="#cartridges">Search controller</a>, which has been expanded to take account of assets generated on the {fs} side.
Using this expansion and a category ID assigned to it, the controller first checks whether a category detail page that has been generated with {fs} is present.
If one is present, it is rendered in the live state with the Velocity engine.
Otherwise, the {sf} standard page is displayed.</p>
</div>
</div>
<div class="sect3">
<h4 id="proddetailpage"><a class="anchor" href="#proddetailpage"></a>Product detail pages</h4>
<div class="paragraph">
<p>Like category detail pages, product pages are used to display products originating from {ccloud}.
However, unlike category detail pages, they do not display an overview of multiple products.
Instead, they provide a detail view of a single product.
The product information originates from {ccloud} and cannot be edited by the {fs} editor.
However, the editor can choose to show and hide this information.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
Product detail pages offer the editor various options for entering content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The page form contains various input components</p>
<div class="ulist">
<ul>
<li>
<p>to define a promotional text.
This text can contain a maximum of 1,024 characters.</p>
</li>
<li>
<p>to show/hide product information.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The header of the page displays a banner into which a <a href="#banner_image">static image</a> can be integrated.</p>
</li>
<li>
<p>The main area of the page enables the display of:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#producttiles">Product Tiles</a>.</p>
</li>
<li>
<p>a <a href="#video">video</a>.</p>
</li>
<li>
<p>a text with a heading.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The sections required for entering content are covered in more detail in the corresponding sub-chapters.
As the text section is self-explanatory, this is not described specifically.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
Just like <a href="#catdetailpage">category detail pages</a>, product detail pages use the <code>Content Integration API (CI API)</code>.
This API enables Velocity fragments to be evaluated on the {sf} side.
Moreover, product detail pages only generate a single asset. This asset is generated in the HTML channel of the page template.</p>
</div>
<div class="paragraph">
<p>As both the form and the content of the HTML channel for product and <a href="#catdetailpage">category detail pages</a> broadly match, both developer views are also identical in terms of form and content.
Therefore, only the differences between the two templates will be described here.</p>
</div>
<div class="paragraph">
<p>The {sf} widgets of a product detail page are made available via the <a href="#cartridges"><code>Product</code> controller</a> and integrated into the page using Velocity fragments.
Here too, the <code>$include.widget()</code> function of the <code>Content</code> controller is used for integration purposes (the function transfers the required widget as a parameter).</p>
</div>
<div class="paragraph">
<p>The hidden input components necessary to use the <code>CI API</code> include, for example, the <code>Velocity rendering controller appendix</code> field.
Since product detail pages, like the <a href="#login_page">login page</a>, use an individual controller to generate the preview, this must be specified here.
Therefore, the field contains the <code>Content-Render</code> value, to which a reference to the <code>SFCC Context ID</code> field is added.
This corresponds to the ID of the product to be displayed and is required by the controller.
The <code>{filter}</code> reads out this value and adds it in the corresponding location.</p>
</div>
<div class="listingblock">
<div class="title">Default value for the Velocity rendering controller appendix form field</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">Content-Render?pid={pt_storefrontUrlContextId}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As well as the hidden input components, the form also contains a text field for the entry of a promotional text and various <code>CMS_INPUT_TOGGLEs</code>.
The toggles offer the editor the option to show or hide the widgets on the product detail page individually:</p>
</div>
<div class="listingblock">
<div class="title">Integration with CMS_INPUT_TOGGLE</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-FirstSpirit hljs" data-lang="FirstSpirit">$CMS_IF(!pt_hideProductInfo)$
   &lt;!-- CMS-VELOCITY-PRODUCT_INFO-START --&gt;
   $include.widget('Product-WrapProductTemplate','pid',$product.id,
                   'productTemplate','product/components/productInfo')
   &lt;!-- CMS-VELOCITY-PRODUCT_INFO-END --&gt;
$CMS_END_IF$</code></pre>
</div>
</div>
<div class="paragraph">
<p>For generation purposes, it is important to ensure that product detail pages are also marked as translated and that the <code>SFCC Context ID</code> field is populated.
In this case, the <code>SFCC Context ID</code> corresponds to the product ID from Storefront.
If no product detail page maintained in the {fs} project exists, the preview shows the corresponding Storefront page.
The Storefront page display is based on the <code>Product Detail Page Preview</code> page template.
A button to create a product detail page is added to the Storefront page via the <em>Create Page</em> template.
This button functions in the same way as the button in the report.
When creating a product detail page, the <code>Product Detail Page</code> page template is then used and the product ID is automatically saved to the associated form field.
If the page is marked as translated and the <code>SFCC Context ID</code> field is populated, generation is carried out and the asset for the product detail page is created.</p>
</div>
<div class="paragraph">
<p>As well as providing the widgets, the <code>Product</code> controller also controls how the product detail page is displayed when the website is live.
It uses the product ID to check whether a product detail page that has been generated with {fs} exists.
If it does, it is rendered in the live state with the Velocity engine.
If it does not, a product detail page that already exists by default on the {sf} side is displayed.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
