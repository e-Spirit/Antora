<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/EN/use-cases/navigation/navigation.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://e-spirit.github.io/Antora/cloud/1.0/index.html">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS/CaaS_FSM_Documentation_EN.html">CaaS</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Connect/CaaS_Connect_FSM_Documentation_EN.html">CaaS Connect</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Platform/CaaS_Platform_Documentation_EN.html">CaaS Platform</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_FSM/index.html">Navigation Service (FSM)</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_Platform/documentation.html">Navigation Service (Platform)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/FS_Connect_SAP_hl_Documentation_EN.html">Spartacus</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/index.html">Salesforce</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/SAP_Classic/firstspiritconnect-sap-documentation_EN.html">SAP Classic</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/dxm/1.0/index.html">DXM</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ecom" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../../index.html">E-Commerce</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../Spryker/index.html">Spryker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/spryker-installation/spryker-installation.html">Spryker - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/fs-installation/fs-installation.html">FirstSpirit - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/use-cases/use-cases.html">Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spryker/EN/legal-notice.html">Legal Notice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spartacus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../Spartacus/chapters/introduction.html">Main Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/sapcc-installation/sapcc-installation.html">Spartacus - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/fs-installation/fs-installation.html">FirstSpirit - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../Spartacus/chapters/use-cases/use-cases.html">Use Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../Spartacus/FS_Connect_SAP_hl_ServeradminManual_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../index.html">Salesforce</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SAP Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../SAP_Classic/firstspiritconnect-sap-documentation_EN.html">Main Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../SAP_Classic/firstspiritconnect-sap-admindoc_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">E-Commerce</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../dxm/1.0/index.html">DXM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../dxm/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../../index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/ecom/edit/main/modules/Salesforce/pages/EN/use-cases/navigation/navigation.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect2">
<h3 id="navigation"><a class="anchor" href="#navigation"></a>Navigation</h3>
<div class="paragraph">
<p>The storefront&#8217;s main navigation function can be used in {fs} to navigate both the shop and the content maintained on the {fs} side.
Custom entries can also be added.</p>
</div>
<div class="sect3">
<h4 id="navigation"><a class="anchor" href="#navigation"></a>Main navigation</h4>
<div class="paragraph">
<p>The main menu is primarily used to navigate between the various <a href="#catlandingpage">category pages</a> within the preview.
The main menu is part of the HTML downloaded during the <a href="#uc_preview">preview</a> from the {ccloud} Storefront and is therefore predefined by {ccloud}.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/navigation.png" alt="navigation">
</div>
<div class="title">Figure 1. Navigation</div>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
The main menu allows the editor to switch between <a href="#catlandingpage">category pages</a>.
If an equivalent exists within {fs} for a category page that has been called up, then the content of this page is shown.
The editor is then able to edit the content originating from {fs}.
If no equivalent to the category page that has been called up exists within {fs}, the original content obtained from {ccloud} is issued instead.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
To display a <a href="#catlandingpage">category page</a> that exists in {fs} to the editor, the links on the <a href="#catlandingpage">category pages</a> are redirected to a dispatcher page via a specific regular expression initially in the reference project.</p>
</div>
<div class="listingblock">
<div class="title">Redirecting the navigation links</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">$-- Change Category Reference --$
&lt;!-- CMS-REGEX-PATTERN-START --&gt;
   regex-match="&lt;a.*?\sdata-cgid="([^"]*?)""
   regex-value="&lt;a href="$CMS_REF(pageref:"preview_dispatcher")$/forceRefresh=1?type=category&amp;id=$1" id="$1""
&lt;!-- CMS-REGEX-PATTERN-END --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This regular expression, along with other specific regular expressions, forms part of the <em>Preview Generation</em> format template.</p>
</div>
<div class="paragraph">
<p>The <em>Preview Dispatcher</em> referenced in this expression is a technical page based on the page template with the same name.
The <em>Preview Dispatcher</em> iterates over the content of the structure folder <em>category_pages</em> by using the {fs} navigation function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This structure folder corresponds to the folder that you configured as the target folder for creating new <a href="#catlandingpage">category pages</a> when <a href="#pcomp">configuring the project component</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For each page found, the <em>Preview Dispatcher</em> memorizes the associated category, together with a corresponding reference to the page.
As a result, for each call it can then decide whether a page exists in {fs} for the requested category and forward accordingly.</p>
</div>
<div class="paragraph">
<p>If it was not possible to identify any pages created in {fs} for a requested category, you are forwarded to a generic category preview page.</p>
</div>
</div>
<div class="sect3">
<h4 id="_expanding_the_navigation_function"><a class="anchor" href="#_expanding_the_navigation_function"></a>Expanding the navigation function</h4>
<div class="paragraph">
<p>Editors can expand the main navigation function.
New menu items are placed in front of those that already exist.</p>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Editor view</strong></span><br>
To add a navigation item, simply place a <a href="#contentpage">content page</a> below the <code>Left Navigation</code> menu item.
Once the page has been released and transferred to the {ccloud}, the new navigation item will appear in the storefront.
As shown in the <a href="#custom_navigation">Example of expanding the main navigation function</a> figure, it is also possible to create nested menu structures.</p>
</div>
<div id="custom_navigation" class="imageblock">
<div class="content">
<img src="../../../_images/custom_navigation.png" alt="custom navigation">
</div>
<div class="title">Figure 2. Example of expanding the main navigation function</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Menu structures may be nested up to a maximum of 4 levels deep.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="underline"><strong>Developer view</strong></span><br>
The new <code>menu-custom-left</code> global slot has been introduced on the {sf} side using the <code>menu.isml</code> template supplied, and is surrounded by the following comments:
<code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-START -&#8594;</code> and <code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-END -&#8594;</code>.
This slot can be populated by {fs} in the same way as any other slot and substituted in the preview.
A content asset for this slot contains the HTML for all elements that are to be used for expanding the navigation function.</p>
</div>
<div class="paragraph">
<p>This markup is created in {fs} in the <code>custom_navigation</code> format template.
This template contains a navigation function that searches all page references in the <code>Left Navigation</code> folder.
It then generates the required HTML for all the pages found - both for the preview and for the live state.
This is necessary so that the pages can be integrated into the main navigation function.
For the preview, the result is also enclosed within the following HTML comments: <code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-START -&#8594;</code> and <code>&lt;!-- CMS-CUSTOM-NAVIGATION-LEFT-END -&#8594;</code>.
The template outputs the HTML for the navigation function in both cases.</p>
</div>
<div class="paragraph">
<p>To enable this navigation function to be used in the preview, each page template must integrate the <code>custom_navigation</code> format template by calling up the <code>CMS_RENDER</code> function.</p>
</div>
<div class="paragraph">
<p>The <code>Left Navigation</code> page template, plus a page and a page reference based on this template, are provided for the purpose of generating a content asset.
The page reference is stored in the <code>Left Navigation</code> structure folder.
As described above, the page template integrates the <code>custom_navigation</code> format template and saves the generated content in a content asset via the XML collector.</p>
</div>
<div class="paragraph">
<p>Unlike the other page templates, <code>Left Navigation</code> does not provide any sections.
A <a href="#slot_configuration">slot configuration</a> that will be output in the event of a generation must therefore be maintained in its form.
For this purpose, the page template sets two variables prior to output.
The first of these is a <code>contentSlotId</code>, since there is no content area from that a slot ID could be derived.
The value of these variable is <code>menu-custom-left</code>, since the new slot referred to above is to be populated.
The second variable is <code>contentSlotTemplate</code>, which is set to the value of the <code>pt_sfccTemplate</code> form field.
The fallback value of this field is <code>slots/content/contentAssetBody.isml</code>.
Without this variable, the template for <a href="#slot_configuration">slot configurations</a> would attempt to derive the ISML template from the current section.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>Left Navigation</code> page reference as well as the corresponding page must be manually released once.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
