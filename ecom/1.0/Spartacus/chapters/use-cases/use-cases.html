<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/chapters/use-cases/use-cases.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://e-spirit.github.io/Antora/cloud/1.0/index.html">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS/CaaS_FSM_Documentation_EN.html">CaaS</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Connect/CaaS_Connect_FSM_Documentation_EN.html">CaaS Connect</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Platform/CaaS_Platform_Documentation_EN.html">CaaS Platform</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_FSM/index.html">Navigation Service (FSM)</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_Platform/documentation.html">Navigation Service (Platform)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/FS_Connect_SAP_hl_Documentation_EN.html">Spartacus</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/index.html">Salesforce</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/SAP_Classic/firstspiritconnect-sap-documentation_EN.html">SAP Classic</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/dxm/1.0/index.html">DXM</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ecom" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">E-Commerce</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../Spryker/index.html">Spryker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/spryker-installation/spryker-installation.html">Spryker - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/fs-installation/fs-installation.html">FirstSpirit - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/use-cases/use-cases.html">Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spryker/EN/legal-notice.html">Legal Notice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spartacus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction.html">Main Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sapcc-installation/sapcc-installation.html">Spartacus - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../fs-installation/fs-installation.html">FirstSpirit - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="use-cases.html">Use Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../FS_Connect_SAP_hl_ServeradminManual_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../Salesforce/index.html">Salesforce</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SAP Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../SAP_Classic/firstspiritconnect-sap-documentation_EN.html">Main Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../SAP_Classic/firstspiritconnect-sap-admindoc_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">E-Commerce</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../dxm/1.0/index.html">DXM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../dxm/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">E-Commerce</a></li>
    <li>Spartacus</li>
    <li><a href="../introduction.html">Main Documentation</a></li>
    <li><a href="use-cases.html">Use Cases</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/ecom/edit/main/modules/Spartacus/pages/chapters/use-cases/use-cases.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="use_cases"><a class="anchor" href="#use_cases"></a>1. Use cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Within the progress of a project, different situations can arise that require certain steps to be taken.
The following subchapters describe situations that can typically occur in integration projects,
and describe the necessary steps for resolving them by using the reference project supplied as a reference.</p>
</div>
<div class="sect2">
<h3 id="uc_contentmodule"><a class="anchor" href="#uc_contentmodule"></a>1.1. Development of a new content module</h3>
<div class="paragraph">
<p>Within the overall system created with the <em>FirstSpirit Connect</em> integration, the Spartacus Storefront delivers the editorial content.
However, the creation and maintenance of this content shifts from the Commerce Cloud to FirstSpirit.
For this reason, the provided reference project <em>FirstSpirit Connect Reference Project</em> contains the following section templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>teaser</code></p>
</li>
<li>
<p><code>carousel</code></p>
</li>
<li>
<p><code>multi_slot_container</code></p>
</li>
<li>
<p><code>location_overview</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these section templates requires an Angular UI component on the Spartacus side.
The UI components receive the contents to be displayed and define their output in the shop.</p>
</div>
<div class="paragraph">
<p>In addition to the creation of a further section template in the FirstSpirit project,
the development of a new content module therefore always includes the implementation of an associated Angular UI component in the frontend.
In detail, the following steps are required, which will be explained in more detail in the course of the chapter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation of a section template including maintenance of contents</p>
</li>
<li>
<p>Import and configuration of the DataVisualizer</p>
</li>
<li>
<p>Creation of a converter</p>
</li>
<li>
<p>Implementation of the Angular UI component</p>
</li>
<li>
<p>Extension of the Storefront</p>
</li>
</ul>
</div>
<div id="create_section" class="dlist">
<dl>
<dt class="hdlist1">Creation of a section template</dt>
<dd>
<p>The development of a new content module first requires the creation of a new section template within the SiteArchitect.
The template must then be integrated into a page and filled with content in all available languages.
By saving these contents, they are automatically transferred to the <em>Preview CaaS</em> and are thus available in the preview.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the steps below, the reference name of the new section template has to be specified at various positions.
These positions are all marked by the placeholder <code>&lt;SECTION_REF_NAME&gt;</code>.
The placeholder must be replaced by the reference name in all cases.</p>
</div>
<div class="paragraph">
<p>The same applies to an input component contained in the section, which is named <code>st_input_component</code> in the following steps.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Import and configuration of the DataVisualizer</dt>
<dd>
<p>The <code>fs-spartacus-view-components</code> library contains, among other things, the <code>DataVisualizer</code>, which enables an unprocessed output of the JSON structure stored in the <em>CaaS</em> in the ContentCreator.
Therefore the DataVisualizer requires an import into the main module of the Spartacus application (<code>app.module.ts</code>)
as well as the configuration as a display component for the previously created section template.
In addition, the import of the ConfigModule is necessary to provide all features.</p>
<div class="listingblock">
<div class="title">Import of the ConfigModul</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JavaScript hljs" data-lang="JavaScript">import { ConfigModule } from '@spartacus/core';</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code snippet shows the necessary adjustments in the main module.
The placeholder <code>&lt;SECTION_REF_NAME&gt;</code> must be replaced by the <strong>reference name</strong> of the <a href="#create_section">section template</a> created in the first step.</p>
</div>
<div class="listingblock">
<div class="title">Import and configuration of the DataVisualizer</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JavaScript hljs" data-lang="JavaScript">import { ConfigModule } from '@spartacus/core';
import { DataVisualizerComponent } from 'fs-spartacus-view-components';

[...]

@NgModule({
   imports: [
      ConfigModule.withConfig({
         cmsComponents: {&lt;SECTION_REF_NAME&gt;: {component: DataVisualizerComponent}}
      })
   ]
})
export class AppModule { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the integration of the <code>DataVisualizer</code>, the page containing the new section shows its associated <em>CaaS</em> information in the preview of the ContentCreator.
With the button <b class="button">COPY TO CLIPBOARD</b> the displayed data can also be copied to the clipboard.
They are required for the subsequent creation of the <a href="#create_converter">converter</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The parameters <code>uid</code> and <code>typeCode</code> contained in the displayed data are assumed by the Storefront.
They must therefore be included in the return value of the <a href="#create_converter">converter</a> to be created subsequently.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/images/datavisualizer.png" alt="datavisualizer">
</div>
<div class="title">Figure 1. Data Visualizer</div>
</div>
<div class="paragraph">
<p><strong>Example</strong><br>
In the case of a section, for example, which only contains a <code>CMS_INPUT_TEXT</code> input component for a headline (<code>st_headline</code>), the output of the <code>DataVisualizer</code> corresponds to the following code snippet:</p>
</div>
<div id="caas_document" class="listingblock">
<div class="title">Output of the DataVisualizer</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{  "uid": "headline",
   "typeCode": "headline",
   "otherProperties": {
      "formData": {
         "st_headline": {
            "fsType": "CMS_INPUT_TEXT",
            "name": "st_headline",
            "value": "Only this week: 20% discount"
         }
      },
      "previewId": "b547b345-6077-4574-97b1-308ebcc2e58d.en_GB"
   }
}</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="create_converter" class="dlist">
<dl>
<dt class="hdlist1">Creation of a converter</dt>
<dd>
<p>The data stored in the <em>CaaS</em> for the new section is very complex and also contains information that is not needed for the output in the shop.
For this reason, it is recommended to add an additional transformation step before transferring the data to the Angular UI component.
The transformation of the information into a format that is optimal for the component is performed by a converter.
This must contain the following code and is to be be saved under the name <code>&lt;SECTION_REF_NAME&gt;.component.converter.ts</code> at any position in the Spartacus project.
Thereby the placeholder <code>&lt;SECTION_REF_NAME&gt;</code> corresponds to the reference name of the previously created <a href="#create_section">section template</a>.</p>
<div class="listingblock">
<div class="title">Converter</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JavaScript hljs" data-lang="JavaScript">import { Injectable, InjectionToken } from '@angular/core';
import { Converter, CmsComponent } from '@spartacus/core';

@Injectable({ providedIn: 'root' }) <i class="conum" data-value="1"></i><b>(1)</b>
export class NewSectionComponentConverter implements Converter&lt;CmsComponent, CmsComponent&gt; { <i class="conum" data-value="2"></i><b>(2)</b>
   public convert(source: CmsComponent): CmsComponent { <i class="conum" data-value="3"></i><b>(3)</b>
      return {
         uid: source.uid,
         typeCode: source.typeCode,
         previewId: source.otherProperties.previewId,
         value: source.otherProperties.formData.st_input_component.value <i class="conum" data-value="4"></i><b>(4)</b>
      } as CmsComponent;
   }
}

export const NewSectionConverterToken = new InjectionToken&lt;Converter&lt;CmsComponent,CmsComponent&gt;&gt;('NewSectionConverter'); <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The Injectable annotation creates a new Angular service.
This allows the later <a href="#storefront_extension">injection</a> of the new converter into the bridge.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The new class <code>NewSectionComponentConverter</code> implements the converter interface provided by Spartacus, which expects the method <code>convert</code>.
Each time the section for which the converter is registered is processed, this method is called automatically.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Using the <code>source</code> parameter, the <code>convert</code> method gets all the information available for the section from the <em>CaaS</em>.
The return value of the method allows the filtering of this data and defines which parameters are transferred to the Angular UI component.<br>
The parameters <code>uid</code> and <code>typeCode</code> are assumed by the Storefront and are therefore mandatory.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The structure of the associated values is derived from the <a href="#caas_document"><em>CaaS</em> document</a> and must be adjusted accordingly, especially for the form data to be passed.
The displayed line refers to a simple <code>CMS_INPUT_TEXT</code> input component.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>NewSectionConverterToken</code> created here enables the later <a href="#storefront_extension">registration</a> of the <code>NewSectionComponentConverter</code> in the main module of the Spartacus application (<code>app.module.ts</code>).</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div id="create_ui_component" class="dlist">
<dl>
<dt class="hdlist1">Implementation of the Angular UI component</dt>
<dd>
<p>The data format defined with the help of the <a href="#create_converter">converter</a> enables the <a href="https://angular.io/cli/generate">implementation of the Angular UI component</a>,
which must be saved under the name <code>&lt;SECTION_REF_NAME&gt;.component.ts</code> at any position in the Spartacus project.</p>
<div class="paragraph">
<p>The following code snippet shows an example of the content of the component:</p>
</div>
<div class="listingblock">
<div class="title">Angular UI component</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JavaScript hljs" data-lang="JavaScript">import { CmsComponent } from '@spartacus/core';
import { CmsComponentData } from '@spartacus/storefront';
import { Component } from '@angular/core';

@Component({ <i class="conum" data-value="1"></i><b>(1)</b>
   template: <i class="conum" data-value="2"></i><b>(2)</b>
      `&lt;ng-container *ngIf="(componentData?.data$) | async as convertedData"&gt;
         &lt;h1 [attr.data-preview-id]="convertedData.previewId"&gt;{{convertedData.value}}&lt;/h1&gt; <i class="conum" data-value="3"></i><b>(3)</b>
      &lt;/ng-container&gt;`,
})

export class NewSectionComponent { <i class="conum" data-value="4"></i><b>(4)</b>
   constructor(public componentData: CmsComponentData&lt;CmsComponent&gt;) { }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The new Angular UI component is created using the Component annotation.
The annotation enables the later <a href="#storefront_extension">injection</a> of the component into the bridge.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>template</code> property defines the HTML output of the transferred data within the shop, which has to be adapted to the component to be created on a project-specific basis.
The output is done via a container element (<code>ng-container</code>), which is only displayed in the case of existing data.
If data exists, it is transferred asynchronously to the content module using the variable <code>convertedData</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In this example, the component only outputs a headline.
Therefore it uses the <code>value</code> parameter defined in the <a href="#create_converter">converter</a>, which contains the corresponding form data of the initially created <a href="#create_section">section</a>.
It also includes the attribute <code>data-preview-id</code>, which contains the <code>previewId</code> passed by the converter as a value and allows editing of the headline in the ContentCreator.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>At this point, the new Angular UI component is created.
It receives the data returned by the <a href="#create_converter">converter</a> as constructor parameters.</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div id="storefront_extension" class="dlist">
<dl>
<dt class="hdlist1">Extension of the Storefront</dt>
<dd>
<p>The output of the <a href="#create_section">section</a> created in the first step assumes the integration of the implemented <a href="#create_ui_component">Angular UI component</a>
and the registration of the new <a href="#create_converter">converter</a> in the Storefront.
This requires the following extension of the main module of the Spartacus application (<code>app.module.ts</code>):</p>
<div class="listingblock">
<div class="title">Extension of the main module</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JavaScript hljs" data-lang="JavaScript">import { NewSectionComponent } from './&lt;SECTION_REF_NAME&gt;.component';
import { NewSectionConverterToken, NewSectionComponentConverter } from './&lt;SECTION_REF_NAME&gt;.component.converter';
import { FsComponentConverter } from 'fs-spartacus-common';

@NgModule({
   declarations: [NewSectionComponent], <i class="conum" data-value="1"></i><b>(1)</b>
   imports: [
      ConfigModule.withConfig({
         cmsComponents: {&lt;SECTION_REF_NAME&gt;: { component: NewSectionComponent }} <i class="conum" data-value="2"></i><b>(2)</b>
      })
   ],
   providers: [
      {  provide: NewSectionConverterToken, <i class="conum" data-value="3"></i><b>(3)</b>
         useClass: NewSectionComponentConverter,
         multi: true
      },
      {  provide: FsComponentConverter, <i class="conum" data-value="4"></i><b>(4)</b>
         useValue: {
            &lt;SECTION_REF_NAME&gt;: NewSectionConverterToken
         },
         multi: true <i class="conum" data-value="5"></i><b>(5)</b>
      }
   ],
   entryComponents: [NewSectionComponent] <i class="conum" data-value="6"></i><b>(6)</b>
})
export class AppModule { }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Within the main module a declaration of the new component is first made to include it in the Spartacus project.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>imports' attribute links the <a href="#create_section">section template</a> created in the first step to the component, instructing Spartacus to always use this link when processing the section.
The placeholder `&lt;SECTION_REF_NAME&gt;</code> must be replaced with the reference name of the new section template.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The converter is registered in two steps using the <code>providers</code> attribute:<br>
The first <code>provide</code> entry declares the converter as an Angular service in the Storefront.
It causes the Storefront to automatically create an instance of the converter at runtime each time the <code>NewSectionConverterToken</code> is used.<br>
For a registration of further converters belonging to other sections, this entry has to be duplicated and adjusted accordingly.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The second <code>provide</code> entry introduces the converter to the bridge
by using the <code>useValue</code> parameter to create a link between the newly created <a href="#create_section">section</a> and the token of the <a href="#create_converter">converter</a>.
The bridge therefore accesses the token each time the section is processed, which in turn triggers the creation of a new instance of the converter.
Also in this case, the placeholder <code>&lt;SECTION_REF_NAME&gt;</code> must be replaced by the reference name of the new section template.<br>
The values of the <code>useValue</code> parameter are unlimited in their number and correspond to a key/value pair in each case.
If further converters belonging to other sections should be introduced to the bridge, the corresponding key/value pairs can be added separated by commas:<br>
Example: <code>useValue: { headline: HeadlineConverterToken, carousel: CarouselConverterToken }</code><br></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>In both cases, the <code>multi</code> parameter prevents previous declarations from being overwritten at runtime.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The entry <code>entryComponents</code> informs the Offline Template Compiler (OTC) of Angular that the component can be generated at runtime.</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="uc_datasets"><a class="anchor" href="#uc_datasets"></a>1.2. Dataset usage</h3>
<div class="paragraph">
<p>On the Spartacus side, the output of the content maintained in FirstSpirit is done via <a href="#uc_contentmodule">Angular UI components</a>.
These receive the content to be displayed and define the HTML view in the shop.</p>
</div>
<div class="paragraph">
<p>The content maintenance is based on section templates, which can include datasets in addition to pure content.
The use of datasets requires an FS_INDEX input component, which in turn references the associated data source.</p>
</div>
<div class="paragraph">
<p>The provided reference project <em>FirstSpirit Connect Reference Project</em> contains the section template <code>location_overview</code> as an example.
This allows the input of a headline and the selection of any number of dataset, each of which is an address.
For this purpose it has the <code>FS_INDEX</code> input component <code>st_locations</code>, which in turn references the data source <code>locations</code>.</p>
</div>
<div class="listingblock">
<div class="title">FS_INDEX input component</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JAVA hljs" data-lang="JAVA">&lt;FS_INDEX name="st_locations" height="1" useLanguages="no"&gt;
   &lt;LANGINFOS&gt;
      &lt;LANGINFO lang="*" label="Locations"/&gt;
      &lt;LANGINFO lang="DE" label="Standorte"/&gt;
   &lt;/LANGINFOS&gt;
   &lt;SOURCE name="DatasetDataAccessPlugin"&gt;
      &lt;TEMPLATE uid="locations.locations"/&gt;
   &lt;/SOURCE&gt;
&lt;/FS_INDEX&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <em>CaaS</em>, the selected datasets are stored only as a reference at the section.
Therefore, when querying the data, the bridge automatically checks all documents for such references and determines the datasets by their ID.
The <a href="#create_converter">converter</a> associated with the section takes the data on the Spartacus side and converts it to a format that is optimal for the <a href="#create_ui_component">Angular UI component</a>.
Each of these components is associated with a FirstSpirit section template and defines the HTML output of the transferred data within the shop.</p>
</div>
<div class="paragraph">
<p>For the <code>location_overview</code> section template, the integration provides the <code>location-overview</code> component.
It displays the datasets selected in the FirstSpirit project in the form of an overview below the specified headline.</p>
</div>
</div>
<div class="sect2">
<h3 id="uc_fsdrivenpage"><a class="anchor" href="#uc_fsdrivenpage"></a>1.3. Creation of a FirstSpirit Driven Page</h3>
<div class="paragraph">
<p>The maintenance of editorial content both in FirstSpirit and in the Commerce Cloud is based on a page.
The integration differentiates between <a href="#concept_pagestypes">Shop and FirstSpirit Driven Pages</a>.</p>
</div>
<div class="paragraph">
<p>In contrast to the Shop Driven Pages, the FirstSpirit Driven Pages exist exclusively in FirstSpirit and do not have an associated page in the Commerce Cloud.
They are used to create content or campaign pages, which are not necessarily included in the standard scope of the store.
FirstSpirit Driven Pages can either use the layout of a Shop Driven Page or their own layout, which is defined in the Storefront.
In both cases, the styling of the FirstSpirit Driven Pages is done in Angular, for example, in the <code>styles.scss</code> file of the Storefront.</p>
</div>
<div class="paragraph">
<p>To create a new FirstSpirit Driven Page, some steps have to be performed on the SAP and Spartacus side as well as in FirstSpirit.
These steps are described below.</p>
</div>
<div class="paragraph">
<p><strong>Configuration in SAP and Spartacus</strong></p>
</div>
<div class="paragraph">
<p>In the system realized by the <em>FirstSpirit Connect</em> integration the Storefront takes over the delivery of the content.
It queries the content from both the Commerce Cloud and the respective <em>CaaS</em> instance and links them together.
For this purpose it must be extended by the bridge as described in the <a href="#sp_installation_libraries">installation chapter</a>.</p>
</div>
<div class="paragraph">
<p>In turn, the bridge expects a <a href="#sp_installation_config_pages">definition of the pages</a>, whose processing is to be enabled in the ContentCreator.
For FirstSpirit Driven Pages, the configuration must consider whether the page uses the layout of a Shop Driven Page or its own layout.</p>
</div>
<div class="paragraph">
<p>In the first case, a dummy page must exist in the Commerce Cloud, which is empty except for the desired layout.
This means, for example, that it only includes a general header and footer, but does not contain any other content.
Such a page is required for every layout that should be usable by FirstSpirit Driven Pages.</p>
</div>
<div class="paragraph">
<p>In the second case, the FirstSpirit Driven Page does not have a mapping to a Commerce Cloud page and therefore no layout of such a page is assigned to it.
Thus the Storefront does not know which slots exist and in which order they should be output.
For this reason the <a href="#b2clayoutconfig"><code>b2cLayoutConfig</code> configuration</a> must be extended accordingly.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On the Spartacus side, there exist several general slots, which are output without additional configuration.
Their specification is therefore only required in the bridge`s configuration, but not in the <code>b2cLayoutConfig</code> configuration.
An example for this kind of slots is the <code>BottomHeaderSlot</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Configuration in FirstSpirit</strong></p>
</div>
<div class="paragraph">
<p>In contrast to the delivery of content, its creation and maintenance is done in the FirstSpirit ContentCreator.
In it, Shop and FirstSpirit Driven Pages can be displayed and enriched with editorial content using the <a href="https://docs.e-spirit.com/tpp/index.html.en"><em>Omnichannel Manager</em></a>.</p>
</div>
<div class="paragraph">
<p>The creation and editing of editorial content requires a <a href="#rp_pages">page template</a> in FirstSpirit, which must be created if necessary.
It must be ensured that the content areas match the <a href="#sp_installation_config_pages">slots</a> configured in the bridge:
For each defined slot, the page template must have a content area with <strong>the same</strong> name.
Otherwise, the editorial content will be ignored by the Storefront and not be output in the live state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The mapping between the configured slots and the content areas of the FirstSpirit page templates is not case-sensitive.
The names <code>Section1</code> and <code>section1</code> are therefore considered identical and are successfully mapped to each other.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, all page templates must have the <a href="#rp_pages_inputcomponents">text input components <code>pt_seoUrl</code> and <code>pt_cc_identifier</code></a>.
The input component <code>pt_seoUrl</code> enables the definition of an SEO url and the input component <code>pt_cc_identifier</code> ensures the accessibility of the page in the ContentCreator.</p>
</div>
<div class="paragraph">
<p>The transfer of the created or modified content to the <em>Online CaaS</em> is done with each release.
The <em>CaaS</em> persists the content in JSON format in the form of content fragments and makes them available to the Storefront, which integrates them into the shop together with the Commerce Cloud content.</p>
</div>
</div>
<div class="sect2">
<h3 id="uc_translation"><a class="anchor" href="#uc_translation"></a>1.4. Translation of editorial content</h3>
<div class="paragraph">
<p>FirstSpirit consistently pursues the concept of multiple languages and allows the output of different language variants.
Translation of editorial content into these languages is often done in cooperation with external translation agencies or with the help of translation services.
The integration therefore supports <a href="https://docs.e-spirit.com/cloud/translationstudio/TranslationStudio_Whitepaper_EN.html"><em>TranslationStudio</em></a>, which allows the export of content to be translated into a target system and to reimport translations into the FirstSpirit project.</p>
</div>
<div class="paragraph">
<p>If <em>TranslationStudio</em> is configured in the project, the ContentCreator provides various workflows.
These are executable via the <code><strong>Actions</strong></code> menu and are used to perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Translation of the current page or specific sections on this page</p>
</li>
<li>
<p>Translation of all pages within a specific folder</p>
</li>
<li>
<p>Translation of multiple pages</p>
</li>
<li>
<p>Translation of the datasets of a data source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these workflows opens a dialog where different settings for the translation have to be defined.
These differ depending on the elements to be translated and are described in detail in the <a href="https://docs.e-spirit.com/cloud/translationstudio/TranslationStudio_Editor_Manual_EN.html"><em>TranslationStudio Editor Manual</em></a>.
A click on the <b class="button">Request Translation</b> button triggers the export of the content to be translated into the predefined target system.
Once the translation is complete, a preselected workflow automatically imports the content into the FirstSpirit project and embeds it in the correct places.</p>
</div>
<div class="paragraph">
<p>Alternatively, an EasyEdit button is provided for translating single pages or sections.
The button also first displays the configuration dialog and then opens the so-called TranslationHelper dialog.
This displays both the source text and its translation side by side and enables immediate editing if required.</p>
</div>
</div>
<div class="sect2">
<h3 id="uc_delete_pages"><a class="anchor" href="#uc_delete_pages"></a>1.5. Page deletion</h3>
<div class="paragraph">
<p>Within the progress of a project, some pages are only required for a certain time.
After that, they are no longer needed and can be removed from the project.
For this purpose the reference project provides the delete workflow of the <em>BasicWorkflows</em>.</p>
</div>
<div class="paragraph">
<p>This workflow allows the removal of pages as well as media from the FirstSpirit project.
The deletion can be performed either directly or based on the principle of dual control.
After deleting the corresponding element, the workflow releases the parent structure.
The changes are thus directly transferred to the <em>Preview</em> and the <em>Online CaaS</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The execution of the delete workflow requires both delete and release rights.
If the executing person is missing one of these rights, the workflow is not available.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
