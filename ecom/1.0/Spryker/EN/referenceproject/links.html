<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/EN/referenceproject/links.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://e-spirit.github.io/Antora/cloud/1.0/index.html">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS/CaaS_FSM_Documentation_EN.html">CaaS</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Connect/CaaS_Connect_FSM_Documentation_EN.html">CaaS Connect</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/CaaS_Platform/CaaS_Platform_Documentation_EN.html">CaaS Platform</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_FSM/index.html">Navigation Service (FSM)</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_Platform/documentation.html">Navigation Service (Platform)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/chapters/introduction.html">Spartacus</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Salesforce/index.html">Salesforce</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/SAP_Classic/firstspiritconnect-sap-documentation_EN.html">SAP Classic</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/dxm/1.0/index.html">DXM</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ecom" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">E-Commerce</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../index.html">Spryker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spryker-installation/spryker-installation.html">Spryker - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fs-installation/fs-installation.html">FirstSpirit - Installation and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../use-cases/use-cases.html">Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../legal-notice.html">Legal Notice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spartacus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../Spartacus/chapters/introduction.html">Main Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/sapcc-installation/sapcc-installation.html">Spartacus - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/fs-installation/fs-installation.html">FirstSpirit - Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/referenceproject/referenceproject.html">Reference Project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../Spartacus/chapters/use-cases/use-cases.html">Use Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../Spartacus/FS_Connect_SAP_hl_ServeradminManual_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../Salesforce/index.html">Salesforce</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SAP Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../SAP_Classic/firstspiritconnect-sap-documentation_EN.html">Main Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../SAP_Classic/firstspiritconnect-sap-admindoc_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">E-Commerce</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../dxm/1.0/index.html">DXM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../dxm/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../cloud/1.0/index.html">FirstSpirit Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../cloud/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../headless/1.0/index.html">Headless</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../headless/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/ecom/edit/main/modules/Spryker/pages/EN/referenceproject/links.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="rp_links"><a class="anchor" href="#rp_links"></a>Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The editorial contents maintained in {fs} can contain the following references, which link them with other contents.
They are based on various link templates that are already included in the {refproject_github}[reference project].</p>
</div>
<div class="paragraph">
<p>All link templates exist twice because they differ in the way they are integrated:
In contrast to the general references, the DOM references can only be used within DOM Editors - according to their name.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Category and product link</dt>
<dd>
<p>The <em>{modulname}</em> module provides a report for products and categories in {cc}.
They serve to display the category and product information coming from  , which can be used for links to category or product detail pages.</p>
<div class="paragraph">
<p>Therefore, the reference project contains the link templates {category_link}[<code>category_link</code>] and {product_link}[<code>product_link</code>] as well as {category_link_dom}[<code>dom_category_link</code>] and {product_link_dom}[<code>dom_product_link</code>], which correspond to a category or product link.
They enable category or product detail pages to be referenced and are equivalent to each other.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In contrast to a category, a referenced product is identified by its sku and not by the node ID.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Content page link</dt>
<dd>
<p>The link templates {content_link}[<code>content_link</code>] and {content_link_dom}[<code>dom_content_link</code>] contained in the reference project correspond to a content page link.
This allows referencing <a href="#rp_staticsite">static pages</a> and <a href="#rp_contentpage">dynamic content pages</a> maintained within the {fs} project.
Within the reference project, the selection of the link target is therefore restricted to page references in the structure folder <code>content_pages</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For editors it is not obvious whether a link target is a dynamic content page or a static page.
However, since static pages do not have a URL by default, links to them would generally not be possible.
The <a href="#fs-projectsettings">project settings</a> therefore provide a way of assigning a URL to them.
The technical adjustments made in the reference project are described in the following <a href="#rp_staticcontentlinks">subchapter</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Magazine article link</dt>
<dd>
<p>The reference project contains the link templates {magazine_link}[<code>magazine_article_link</code>] and {magazine_link_dom}[<code>dom_magazine_article_link</code>], which correspond to a magazine article link.
Like the content page link, it enables the referencing of editorial content maintained within the {fs} project.
In contrast to this, the magazine article link refers to <a href="#rp_magazine">magazine articles</a> according to its name.</p>
</dd>
<dt class="hdlist1">External link</dt>
<dd>
<p>Just like the content page link and the magazine article link described above, the {external_link}[external link] enables the referencing of editorial content.
However, in contrast to them it refers exclusively to external content.</p>
</dd>
<dt class="hdlist1">Search link</dt>
<dd>
<p>The reference project contains the link templates {search_link}[<code>search_link</code>] and {search_link_dom}[<code>dom_search_link</code>], which correspond to a search link.
It enables the linking of a search result page to a defined search term.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All of the link templates for the {dom_links}[DOM references] contain in their output channel a call to the corresponding <a href="#sp_widgets">widget</a> which controls the  -side output of the reference.
This way, the HTML for the reference is generated automatically.
A project-specific adaptation of the HTML is not possible.</p>
</div>
<div class="listingblock">
<div class="title">Widget call within the DOM category reference</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-XML hljs" data-lang="XML">{% widget 'FirstSpiritCategoryLinkWidget' args [$CMS_VALUE(lt_category.values[0].getNodeId)$, "$CMS_VALUE(lt_linkText.convert2)$"] only %}{% endwidget %}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In contrast, the link templates for {general_links}[general references] only contain the definition of two parameters.
They thus follow the same concept as the page and section templates.
In this way, only the URL of the reference is generated and the HTML is freely definable on the   side.</p>
</div>
<div class="listingblock">
<div class="title">Parameter definition within the category reference</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-XML hljs" data-lang="XML">$CMS_SET(set_id)$
   $CMS_VALUE(lt_category.values[0].getNodeId)$
$CMS_END_SET$
$CMS_SET(void, set_link.put("id", set_id.toString()))$
$CMS_SET(void, set_link.put("type","category"))$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Processing the general references is controlled by the <code>link.twig</code> Twig template, which is part of the <a href="#sp_modules">{fs}Preview module</a> and determines the corresponding URL based on the reference type.</p>
</div>
<div class="listingblock">
<div class="title">Twig template link.twig</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-XML hljs" data-lang="XML">{% define data = {link: link} %}
{%- if data.link.type is defined -%}
   {%- set type = data.link.type -%}
   {%- if data.link.id is defined and data.link.id is not empty -%}
      {%- set id = data.link.id -%}
      {%- if  type == "cmspage" -%}
         {%- set url = getCmsPageUrl(id) -%}
      {%- elseif type == "category" -%}
         {%- set url = getCategoryPageUrl(id) -%}
      {%- elseif type == "product" -%}
         {%- set url = getProductPageUrl(id) -%}
      {%- endif -%}
   {%- else -%}
      {%- if type == "search" -%}
         {%- set url = path('search') ~ '?q=' ~ data.link.query -%}
      {%- elseif type == "external" -%}
         {%- set url = data.link.url -%}
      {%- elseif type == "static" -%}
         {%- set url = data.link.url -%}
      {%- endif -%}
   {%- endif -%}
{%- endif -%}

{%- if url is defined and url is not null -%}
   {{- url -}
}{%- endif -%}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Twig template is called in the individual components that represent the {fs} sections in  :</p>
</div>
<div class="listingblock">
<div class="title">Example call for the Twig template link.twig</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-PHP hljs" data-lang="PHP"> &lt;a href="{% include template('link', 'FirstSpiritPreview') with { link: data.fsBlockData.link } %}"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, the Twig functions for determining the general references can also be called directly:</p>
</div>
<div class="listingblock">
<div class="title">calls of the Twig functions to determine the general references</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-PHP hljs" data-lang="PHP">{% set url = getCmsPageUrl(cms_page_id) %}
{% set url = getProductPageUrl(productId) %}
{% set url = getCategoryPageUrl(categoryId) %}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="rp_staticcontentlinks"><a class="anchor" href="#rp_staticcontentlinks"></a>Content page links to static pages</h4>
<div class="paragraph">
<p>When creating content page links, editors are not able to see any difference between static and dynamic pages.
However, since static pages do not have a URL by default, links to them would generally not be possible.
The <a href="#fs-projectsettings">project settings</a> therefore provide a way of assigning a URL to them.
For this purpose, the project settings contain the FS_CATALOG <code>ps_staticLinks</code>, which is filled via the btn:[Static Page Templates Import] button.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A future modification of the URLs defined in the project settings requires the execution of both the <a href="#fs-deployment">full generation</a> and the <a href="#fs-previewdeployment">preview generation</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The button btn:[Static Page Templates Import] calls the executable <code>ProjectPropertiesStaticPageUrlListExecutable</code> which determines the content of the {static_pages_github}[template folder <code>static_pages</code>].
For each template contained in this folder it adds an entry to the FS_CATALOG based on the technical {static_pages_section}[section template <code>static_page_url</code>].
Every entry contains a reference to the respective template and a language-dependent field for the relative URL to be defined.</p>
</div>
<div class="paragraph">
<p>For creating the entries and referencing the templates automatically within these entries, the button has the following parameters,
which are predefined within the {refproject_github}[reference project]:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>staticPageCatalog</strong>: This parameter defines the FS_CATALOG component in the project settings.</p>
</li>
<li>
<p><strong>staticPageUrlTemplateUid</strong>: This parameter specifies the reference name of the technical section template on which the entries in the FS_CATALOG are created.</p>
</li>
<li>
<p><strong>staticPageTemplateFolder</strong>: This parameter defines the reference name of the template folder that contains all templates for static pages.</p>
</li>
<li>
<p><strong>pageTemplateFsReference</strong>: The name of the FS_REFERENCE component from the technical section template is assigned to this parameter for referencing the static page templates automatically.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable content page links to static pages, the URLs defined in the project settings must be available in the link templates.
Therefore, the {project_settings_caas_channel}[output channel] of the project settings contains the following code that stores the URL of a static page template in the variable <code>set_ps_staticLinks</code>.</p>
</div>
<div class="listingblock">
<div class="title">output channel of the project settings</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JAVA hljs" data-lang="JAVA">$CMS_SET(set_ps_staticLinks,{:})$
$CMS_FOR(for_staticLink,ps_staticLinks.filter(x-&gt;!x.item.st_pageTemplate.isEmpty))$
   $CMS_SET(void, set_ps_staticLinks
      .put(
         for_staticLink.item.st_pageTemplate.get.uid,
         for_staticLink.item.st_url.convert2
      )
   )$
$CMS_END_FOR$
$CMS_SET(set_ps_contentPageList,["contentpage"])$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Within the reference project the variable is queried in the {content_link_caas_channel}[output channel] of the content page link.
This way editors do not have to distinguish between static and dynamic content pages when selecting a link target.</p>
</div>
<div class="listingblock">
<div class="title">Code snippet of the content page link</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JAVA hljs" data-lang="JAVA">$CMS_SET(set_pageUid,lt_pageRef.get().page.template.uid)$
$CMS_IF(set_pageUid == "contentpage")$
[...]
$CMS_ELSIF(!set_ps_staticLinks.isEmpty)$
   $CMS_IF(set_ps_staticLinks.containsKey(set_pageUid) &amp;&amp; !set_ps_staticLinks.get(set_pageUid).isEmpty)$
      $CMS_SET(void, set_link.put("url", set_ps_staticLinks.get(set_pageUid)))$
      $CMS_SET(void, set_link.put("type","static"))$
      [...]
   $CMS_END_IF$
   [...]
$CMS_END_IF$</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
