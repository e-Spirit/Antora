<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Navigation Service - Serveradmin Documentation :: CrownSpirit Documentation</title>
    <link rel="canonical" href="https://e-spirit.github.io/Antora/headless/1.0/Nav_Service_FSM/Navigation_Service_Serveradmin_Documentation_EN.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
    <link rel="icon" href="../../../_/img/shortcut-icon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://e-spirit.github.io/Antora">CrownSpirit Documentation</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Cloud</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Headless</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">E-Commerce</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spryker/index.html">Spryker</a>
            <a class="navbar-item" href="https://e-spirit.github.io/Antora/ecom/1.0/Spartacus/index.html">Spartacus</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">FirstSpirit</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=editors">Editors</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=developers">Developers</a>
            <a class="navbar-item" href="https://docs.e-spirit.com/lp/?locale=en&main=firstspirit&sub=administrators">Administrators</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Crownpeak</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="headless" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Headless</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">CaaS Connect</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../CaaS_Connect/CaaS_Connect_FSM_Documentation_EN.html">Module documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../CaaS_Connect/CaaS_Connect_ServerAdministrator_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../CaaS/CaaS_FSM_Documentation_EN.html">Content as a Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../CaaS_Platform/CaaS_Platform_Documentation_EN.html">CaaS Platform</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Navigation Service (FSM)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Main Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="chapters/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="chapters/components.html">Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="chapters/config.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="chapters/auth.html">Authentification</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="Navigation_Service_Serveradmin_Documentation_EN.html">Admin Manual</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Nav_Service_Platform/documentation.html">Navigation Service (Platform)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Headless</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../component-b/1.0/index.html">CrownSpirit Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../component-b/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../ecom/1.0/index.html">E-Commerce</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ecom/1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../fsxa-pwa/1.3.0/index.html">FSXA-PWA</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../fsxa-pwa/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../fsxa-ui/4.1.0/index.html">FSXA-UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../fsxa-ui/4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../../fsxa-ui/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Headless</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../component-b/1.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Headless</a></li>
    <li>Navigation Service (FSM)</li>
    <li><a href="Navigation_Service_Serveradmin_Documentation_EN.html">Admin Manual</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/pahl-espirit/headless/edit/main/modules/Nav_Service_FSM/pages/Navigation_Service_Serveradmin_Documentation_EN.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Navigation Service - Serveradmin Documentation</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#technicalrequirements">1.1. Technical requirements</a></li>
<li><a href="#architecture">1.2. Architecture</a></li>
</ul>
</li>
<li><a href="#components">2. Components</a></li>
<li><a href="#_installation_and_configuration">3. Installation and configuration</a>
<ul class="sectlevel2">
<li><a href="#moduleinstallation">3.1. Module Installation</a></li>
<li><a href="#moduleconfig">3.2. Configuration of the FirstSpirit service</a></li>
<li><a href="#projectappconfig">3.3. Configuration of the Navigation Service project component</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FirstSpirit provides its own template-based <a href="https://docs.e-spirit.com/odfs/tutorials/erste-projekt/seitenvorlage-e/navigation/index.html">navigation function</a> for statically generated pages.
In the modern headless world, a different solution is needed, one that seamlessly integrates a dynamic mapping between a navigation route and the corresponding content behind it.</p>
</div>
<div class="paragraph">
<p>The Navigation Service module provides a mechanism to transfer the structure of the FirstSpirit site store of a project into a JSON format and make it available via the Navigation Service endpoint.
According to the <a href="https://navigationservice.e-spirit.cloud/docs/user/en/documentation.html">documentation of the Navigation Service endpoint</a> the structure can then be queried via its REST interface.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This document covers the installation and configuration of the module on the FirstSpirit server. All necessary configurations that must be performed in the project are described in the <a href="https://docs.e-spirit.com/module/navigation-service-fsm/Navigation_Service_FSM_Documentation_EN.html">Navigation Service Documentation</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="technicalrequirements"><a class="anchor" href="#technicalrequirements"></a>1.1. Technical requirements</h3>
<div class="paragraph">
<p>Besides the FirstSpirit {fsRuntimeVersion} version, the module requires access to the Navigation Service.
e-Spirit AG is responsible for setting this up as part of the provision of the infrastructure.</p>
</div>
</div>
<div class="sect2">
<h3 id="architecture"><a class="anchor" href="#architecture"></a>1.2. Architecture</h3>
<div class="paragraph">
<p>The functionalities of the Navigation Service are realized by the interaction of different components (see figure <a href="#architecture_image">Architecture</a>).</p>
</div>
<div class="paragraph">
<p>These components are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Navigation Service</p>
</li>
<li>
<p>Navigation Service module</p>
</li>
</ul>
</div>
<div id="architecture_image" class="imageblock">
<div class="content">
<img src="_images/images/architecture.png" alt="architecture">
</div>
<div class="title">Figure 1. Architecture</div>
</div>
<div class="paragraph">
<p>The interaction of the components always follows the following scheme:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The creation and updating of navigation-relevant content takes place at FirstSpirit.
Changes are made available to the <em>Navigation Service endpoint</em> (see <em>REST API</em>) in the context of an update.
For this purpose, the FirstSpirit server creates a connection to it and transmits all relevant data.</p>
</li>
<li>
<p>The Navigation Service receives this data and updates its internal data model based on the information provided.</p>
</li>
<li>
<p>The customer&#8217;s application requests the stored information as needed from <em>Navigation Service endpoint</em>, which provides a REST API for this purpose.
The querying of the data is performed according to the pull principle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The communication between the FirstSpirit server and the Navigation Service is done by HTTPS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="components"><a class="anchor" href="#components"></a>2. Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the Navigation Service in an existing FirstSpirit project infrastructure requires two additional components</p>
</div>
<div class="paragraph">
<p>When the Navigation Service module has been installed, a FirstSpirit service named <em>Navigation Client Service</em> and a project component named <em>Navigation Project Configuration</em> are provided to the FirstSpirit server.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Navigation Client Service</dt>
<dd>
<p>Upon installation of the Navigation Service module, the Navigation Client Service is added to the FirstSpirit server and is then started.
For a transfer to the Navigation Service endpoint the project component must be added to the respective project.
The Navigation Client Service then takes care of creating the navigations of the FirstSpirit projects.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only when the Navigation Client Service is running will changes be transmitted to the Navigation Service .</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Navigation Project Configuration</dt>
<dd>
<p>By adding/removing the project component <em>Navigation Project Configuration</em> to a FirstSpirit project, it is regulated whether navigations are created for this project.
It has its own configuration, which is described in the chapter <a href="#projectappconfig">Configuration of the Navigation Service project component</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation_and_configuration"><a class="anchor" href="#_installation_and_configuration"></a>3. Installation and configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The setup of the Navigation Service for operation on a FirstSpirit server is done by installing the Navigation Service module.
It is part of the distribution and already contains all necessary client components.</p>
</div>
<div class="paragraph">
<p>Following subchapters describe the necessary installation and configuration steps.</p>
</div>
<div class="sect2">
<h3 id="moduleinstallation"><a class="anchor" href="#moduleinstallation"></a>3.1. Module Installation</h3>
<div class="paragraph">
<p>The module must be installed on the FirstSpirit server using the supplied <code>navigation-service-{build-version}.fsm</code> file.
Open the <code><strong>ServerManager</strong>' and select the area `<strong>menu:Server Properties [Modules]</strong></code>.</p>
</div>
<div id="installed_modules" class="imageblock">
<div class="content">
<img src="_images/images/modules.png" alt="modules">
</div>
<div class="title">Figure 2. Moduls</div>
</div>
<div class="paragraph">
<p>Within the main panel there is a list of all modules installed on the FirstSpirit server.
Select the <code>navigation-service-{build-version}.fsm</code> file after clicking <b class="button">Install</b> and confirm the selection with <b class="button">Open</b>.</p>
</div>
<div class="paragraph">
<p>After the successful installation the folder `navigation-service' has been added to the list of folders, which has to get all rights via the button <b class="button">Configure</b> (see figure <a href="#installed_modules">Moduls</a>).</p>
</div>
<div class="paragraph">
<p>Furthermore, the module requires a configuration, which is explained in the following subchapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="moduleconfig"><a class="anchor" href="#moduleconfig"></a>3.2. Configuration of the FirstSpirit service</h3>
<div class="paragraph">
<p>A connection between the Navigation Service endpoint and the FirstSpirit server is required for the transmission of data to the Navigation Service endpoint.
For that purpose a configuration file with the following structure has to be placed in the FirstSpirit directory of the module.</p>
</div>
<div class="paragraph">
<p>The module configuration has the following structure:</p>
</div>
<div class="listingblock">
<div class="title">Content of the navigationFSM.json file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "navServiceBaseUrl": "URL of the Navigation Service",
  "keycloakCredentials": {
    "realm": "&lt;KEY-CLOAK-REALM-NAME&gt;",
    "auth-server-url": "&lt;KEY-CLOAK-URL&gt;",
    "resource": "&lt;KEY-CLOAK-CLIENT-ID&gt;",
    "credentials": {
      "secret": "XXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX"
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>It has to be stored under the following path in the root directory of the FirstSpirit server:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;FS-ROOT&gt;/conf/modules/Navigation Service.NavigationClientService/navigationFSM.json</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="projectappconfig"><a class="anchor" href="#projectappconfig"></a>3.3. Configuration of the Navigation Service project component</h3>
<div class="paragraph">
<p>With the usage of the Navigation Service module the project component <em>Navigation Project Configuration</em> becomes available to the FirstSpirit server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The addition of the Navigation Project Configuration to a FirstSpirit project triggers an initial creation of its navigation structure.</p>
</div>
<div class="paragraph">
<p>Removing the Navigation Project Configuration will delete the created navigations in the Navigation Service.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To add the project component, open the <code><strong>ServerManager</strong></code> and select the <code><strong><span class="menuseq"><b class="menu">Project settings</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">project component</b></span></strong></code> area.</p>
</div>
<div class="paragraph">
<p>A list of all existing project component is displayed in the main panel.
After clicking <b class="button">Add</b>, select the <code>{component name}</code> and confirm the selection with <b class="button">OK</b>.</p>
</div>
<div id="projectcomponents_add" class="imageblock">
<div class="content">
<img src="_images/images/projectcomponents_add.png" alt="projectcomponents add">
</div>
<div class="title">Figure 3. Adding the project component: Navigation Project Configuration</div>
</div>
<div class="paragraph">
<p>This project component will be added to the list in the content area and must be configured afterwards (see figure <a href="#projectcomponents_add">Adding the project component: Navigation Project Configuration</a>).</p>
</div>
<div class="paragraph">
<p>Select the entry in the list and open the corresponding configuration dialog via <b class="button">Configure</b>.</p>
</div>
<div class="paragraph">
<p>Fill in the fields as described below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/projectcomponents_config.png" alt="projectcomponents config">
</div>
<div class="title">Figure 4. Navigation Service Configuration</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">CaaS 3.x mode</dt>
<dd>
<p>This mode is available in case the FirstSpirit server has the Content as a Service module installed in a version equal or greater than 3.
If the <code>CaaS 3.x mode</code> is activated, the corresponding CaaS routes are used in the navigation as the reference to the data.
Additionally, the <code>Advanced URLs</code> UrlFactory is used for the SEO routes.</p>
</dd>
<dt class="hdlist1">Content Reference URL Prefix</dt>
<dd>
<p>A optional prefix can be entered in this field. The value will be prepended to the generated <code>ContentReference</code> URL of each FirstSpirit page reference.</p>
</dd>
<dt class="hdlist1">Content Reference URL Factory</dt>
<dd>
<p>In this field the URL Factory which is responsible for the path generation of the referenced content can be selected.
This selection field is disabled once <code>CaaS 3.x mode</code> has been enabled.</p>
</dd>
<dt class="hdlist1">SEO Route Url Factory</dt>
<dd>
<p>In this field the URL Factory which is responsible for the SEO routes can be selected.
This selection field is disabled once <code>CaaS 3.x mode</code> has been enabled.</p>
</dd>
<dt class="hdlist1">Navigation URL (release and preview state)</dt>
<dd>
<p>These listed navigation URLs indicate the locations to which the navigations created for the project are transmitted.
These are endpoints for the front-end developers, provided by e-Spirit.</p>
</dd>
<dt class="hdlist1">Available in languages</dt>
<dd>
<p>This is a list of all languages of the current FirstSpirit project, for each of which a navigation is provided.</p>
</dd>
<dt class="hdlist1">Ignore errors</dt>
<dd>
<p>This mode is <strong>not recommended</strong> and per default deactivated in all projects.
If it is enabled, errors will be ignored when generating the navigation.
Instead, <em>null</em> values will be written to the affected locations.
You will therefore lose the certainty that data in the Navigation Service is always correct.</p>
</dd>
<dt class="hdlist1">Permissions</dt>
<dd>
<p>Here you can configure whether permissions information should be part of the navigation.
The <em>Input name</em> defines the name of the <em>CMS_INPUT_PERMISSION</em> input component.
Permissions will only be written to the navigation if this value is set.
The <em>Activity name</em> specifies which set of permissions should be used.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/Nav_Service_FSM/pages/Navigation_Service_Serveradmin_Documentation_EN.adoc - include::chapters/legalnotice.adoc[]</p>
</div>
<div class="paragraph">
<p>Details regarding any third-party software products in use but not created by e-Spirit AG, as well as the third-party licenses and, if applicable, update information can be found in the file <code>THIRD-PARTY.txt</code> included with the module.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
